<!DOCTYPE html>
<html lang="zh-TW">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="https://gmpg.org/xfn/11">

	<title>Vue3 複習09 &#8211; wordpress_blog</title>
<meta name="robots" content="noindex, nofollow">
	<style>img:is([sizes="auto" i], [sizes^="auto," i]) { contain-intrinsic-size: 3000px 1500px }</style>
	<link rel="alternate" type="application/rss+xml" title="訂閱《wordpress_blog》&raquo; 資訊提供" href="/wordpress_blog/feed/">
<link rel="alternate" type="application/rss+xml" title="訂閱《wordpress_blog》&raquo; 留言的資訊提供" href="/wordpress_blog/comments/feed/">
<script>
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.7.2"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"🏳️‍⚧️","🏳️​⚧️")?!1:!n(e,"🇺🇳","🇺​🇳")&&!n(e,"🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴​󠁧​󠁢​󠁥​󠁮​󠁧​󠁿");case"emoji":return!n(e,"🐦‍⬛","🐦​⬛")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
</script>
<style id="wp-emoji-styles-inline-css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="/wordpress_blog/wp-includes/css/dist/block-library/style.min.css?ver=6.7.2" media="all">
<style id="classic-theme-styles-inline-css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css">:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--palette-1-color-0: #212121;--wp--preset--color--palette-1-color-1: #757575;--wp--preset--color--palette-1-color-2: #212121;--wp--preset--color--palette-1-color-3: #212121;--wp--preset--color--palette-1-color-4: #212121;--wp--preset--color--palette-1-color-5: #f5f5f5;--wp--preset--color--palette-1-color-6: #ffffff;--wp--preset--color--palette-1-color-7: #ffffff;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 14px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 18px;--wp--preset--font-size--x-large: 42px;--wp--preset--font-size--normal: 16px;--wp--preset--font-size--larger: 24px;--wp--preset--font-size--extra-large: 32px;--wp--preset--font-size--huge: 48px;--wp--preset--font-size--gigantic: 64px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="botiga-style-css" href="/wordpress_blog/wp-content/themes/botiga/style.css?ver=1.1.2" media="all">
<link rel="stylesheet" id="botiga-style-min-css" href="/wordpress_blog/wp-content/themes/botiga/assets/css/styles.min.css?ver=1.1.2" media="all">
<link rel="stylesheet" id="botiga-custom-styles-css" href="/wordpress_blog/wp-content/uploads/botiga/custom-styles.css?ver=1648804469" media="all">
<link rel="https://api.w.org/" href="/wordpress_blog/wp-json/">
<link rel="alternate" title="JSON" type="application/json" href="/wordpress_blog/wp-json/wp/v2/posts/837">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/wordpress_blog/xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.7.2">
<link rel="canonical" href="/wordpress_blog/reviewvue3_09/">
<link rel="shortlink" href="/wordpress_blog/?p=837">
<link rel="alternate" title="oEmbed (JSON)" type="application/json+oembed" href="/wordpress_blog/wp-json/oembed/1.0/embed?url=%2Freviewvue3_09%2F">
<link rel="alternate" title="oEmbed (XML)" type="text/xml+oembed" href="/wordpress_blog/wp-json/oembed/1.0/embed?url=%2Freviewvue3_09%2F&#038;format=xml">
<link rel="icon" href="/wordpress_blog/wp-content/uploads/2022/03/logo.png" sizes="32x32">
<link rel="icon" href="/wordpress_blog/wp-content/uploads/2022/03/logo.png" sizes="192x192">
<link rel="apple-touch-icon" href="/wordpress_blog/wp-content/uploads/2022/03/logo.png">
<meta name="msapplication-TileImage" content="/wp-content/uploads/2022/03/logo.png">
	
</head>

<body class="post-template-default single single-post postid-837 single-format-standard wp-custom-logo wp-embed-responsive header-header_layout_1 blog-single-layout1">


<div id="page" class="site">

	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	
			<div class="top-bar visibility-desktop-only">
				<div class="container-fluid">
					<div class="top-bar-inner">
						<div class="row valign">

															<div class="col header-elements delimiter-none">
									<div class="header-item top-bar-social"><div class="social-profile">
<a target="_blank" href="https://www.facebook.com/watergrass0402/"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></i></a><a target="_blank" href="https://github.com/GeeHsu"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></i></a>
</div></div>								</div>
																						<div class="col header-elements delimiter-none">
													
			<nav class="header-item top-bar-secondary-navigation secondary-navigation">
				<div class="menu-topbar-container"><ul id="secondary" class="menu">
<li id="menu-item-143" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-143"><a href="/wordpress_blog/setup/">網站架設</a></li>
<li id="menu-item-144" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-144"><a href="/wordpress_blog/source/">資料來源</a></li>
<li id="menu-item-262" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-262"><a href="/wordpress_blog/resource/">學習資源</a></li>
</ul></div>			</nav>
											</div>
							
						</div>
					</div>
				</div>
			</div>
			
							
				<header id="masthead" class="site-header header_layout_1">
					<div class="container-fluid">
						<div class="site-header-inner">
							<div class="row valign">
								<div class="col-md-5">
										
			<nav id="site-navigation" class="main-navigation">
				<div class="menu-navbar-container"><ul id="primary-menu" class="menu">
<li id="menu-item-109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-109"><a href="/wordpress_blog/about/">關於</a></li>
<li id="menu-item-110" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-110">
<a href="/wordpress_blog/learn/">學習</a><span tabindex="0" class="dropdown-symbol"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512.011 512.011"><path d="M505.755 123.592c-8.341-8.341-21.824-8.341-30.165 0L256.005 343.176 36.421 123.592c-8.341-8.341-21.824-8.341-30.165 0s-8.341 21.824 0 30.165l234.667 234.667a21.275 21.275 0 0015.083 6.251 21.275 21.275 0 0015.083-6.251l234.667-234.667c8.34-8.341 8.34-21.824-.001-30.165z"></path></svg></i></span>
<ul class="sub-menu">
	<li id="menu-item-140" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-140"><a href="/wordpress_blog/category/hexschool/">六角學院</a></li>
	<li id="menu-item-141" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-141"><a href="/wordpress_blog/category/ninja/">Net Ninja</a></li>
	<li id="menu-item-483" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-483"><a href="/wordpress_blog/category/youtube/">Youtube</a></li>
</ul>
</li>
<li id="menu-item-111" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-111"><a href="/wordpress_blog/linestore/">LINE STORE</a></li>
</ul></div>			</nav><!-- #site-navigation -->
											</div>
								<div class="col-md-2">
												<div class="site-branding">
				<a href="/wordpress_blog/" class="custom-logo-link" rel="home"><img width="512" height="512" src="/wordpress_blog/wp-content/uploads/2022/03/logo.png" class="custom-logo" alt="wordpress_blog" decoding="async" fetchpriority="high"></a>					<p class="site-title"><a href="/wordpress_blog/" rel="home">wordpress_blog</a></p>
										<p class="site-description">This is a dynamic to static website.</p>
							</div>
<!-- .site-branding -->
											</div>
								<div class="col-md-5 header-elements">
																	</div>							
							</div>
						</div>
					</div>
								<div class="header-search-form">
			<form role="search" method="get" class="search-form" action="/">
	<label class="screen-reader-text" for="search-form-1">Search&hellip;</label>
	<input type="search" id="search-form-1" class="search-field" value="" name="s" placeholder="Search &hellip;">
	<button type="submit" class="search-submit" value="Search"><i class="ws-svg-icon"><svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.875 3.75a7.125 7.125 0 100 14.25 7.125 7.125 0 000-14.25zM2.25 10.875a8.625 8.625 0 1117.25 0 8.625 8.625 0 01-17.25 0z"></path><path fill-rule="evenodd" d="M15.913 15.914a.75.75 0 011.06 0l4.557 4.556a.75.75 0 01-1.06 1.06l-4.557-4.556a.75.75 0 010-1.06z"></path></svg></i></button>
</form>
			</div>
			
									</header>

										<div class="search-overlay"></div>
			
			<div class="botiga-offcanvas-menu">
				<div class="mobile-header-item">
					<div class="row">
						<div class="col">
										<div class="site-branding">
				<a href="/wordpress_blog/" class="custom-logo-link" rel="home"><img width="512" height="512" src="/wordpress_blog/wp-content/uploads/2022/03/logo.png" class="custom-logo" alt="wordpress_blog" decoding="async"></a>					<p class="site-title"><a href="/wordpress_blog/" rel="home">wordpress_blog</a></p>
										<p class="site-description">This is a dynamic to static website.</p>
							</div>
<!-- .site-branding -->
									</div>
						<div class="col align-right">
							<a class="mobile-menu-close" href="#"><i class="ws-svg-icon icon-cancel"><svg width="16" height="16" fill="none" viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2.219.781L.78 2.22 9.562 11l-8.78 8.781 1.437 1.438L11 12.437l8.781 8.782 1.438-1.438L12.437 11l8.782-8.781L19.78.78 11 9.562 2.219.783z"></path></svg></i></a>
						</div>
					</div>
				</div>
				<div class="mobile-header-item">
						
			<nav id="site-navigation" class="main-navigation">
				<div class="menu-navbar-container"><ul id="primary-menu" class="menu">
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-109"><a href="/wordpress_blog/about/">關於</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-110">
<a href="/wordpress_blog/learn/">學習</a><span tabindex="0" class="dropdown-symbol"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512.011 512.011"><path d="M505.755 123.592c-8.341-8.341-21.824-8.341-30.165 0L256.005 343.176 36.421 123.592c-8.341-8.341-21.824-8.341-30.165 0s-8.341 21.824 0 30.165l234.667 234.667a21.275 21.275 0 0015.083 6.251 21.275 21.275 0 0015.083-6.251l234.667-234.667c8.34-8.341 8.34-21.824-.001-30.165z"></path></svg></i></span>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-140"><a href="/wordpress_blog/category/hexschool/">六角學院</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-141"><a href="/wordpress_blog/category/ninja/">Net Ninja</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-483"><a href="/wordpress_blog/category/youtube/">Youtube</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-111"><a href="/wordpress_blog/linestore/">LINE STORE</a></li>
</ul></div>			</nav><!-- #site-navigation -->
							</div>
				<div class="mobile-header-item">
									<a target="&quot;_blank&quot;" class="button header-item" href="https://www.facebook.com/watergrass0402/">聯絡我</a>
							</div>			
			</div>
			
							<header id="masthead-mobile" class="site-header mobile-header">
					<div class="container-fluid">
						<div class="row valign flex-nowrap">
							<div class="col-sm-6 col-md-4 col-grow-mobile">
											<div class="site-branding">
				<a href="/wordpress_blog/" class="custom-logo-link" rel="home"><img width="512" height="512" src="/wordpress_blog/wp-content/uploads/2022/03/logo.png" class="custom-logo" alt="wordpress_blog" decoding="async"></a>					<p class="site-title"><a href="/wordpress_blog/" rel="home">wordpress_blog</a></p>
										<p class="site-description">This is a dynamic to static website.</p>
							</div>
<!-- .site-branding -->
										</div>
							<div class="col-auto col-sm-6 col-md-8 col-grow-mobile header-elements valign align-right">
																	
															<a href="#" class="menu-toggle">
				<i class="ws-svg-icon"><svg width="16" height="11" viewbox="0 0 16 11" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="16" height="1"></rect><rect y="5" width="16" height="1"></rect><rect y="10" width="16" height="1"></rect></svg></i>
			</a>
																		</div>						
						</div>
					</div>
								<div class="header-search-form">
			<form role="search" method="get" class="search-form" action="/">
	<label class="screen-reader-text" for="search-form-2">Search&hellip;</label>
	<input type="search" id="search-form-2" class="search-field" value="" name="s" placeholder="Search &hellip;">
	<button type="submit" class="search-submit" value="Search"><i class="ws-svg-icon"><svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.875 3.75a7.125 7.125 0 100 14.25 7.125 7.125 0 000-14.25zM2.25 10.875a8.625 8.625 0 1117.25 0 8.625 8.625 0 01-17.25 0z"></path><path fill-rule="evenodd" d="M15.913 15.914a.75.75 0 011.06 0l4.557 4.556a.75.75 0 01-1.06 1.06l-4.557-4.556a.75.75 0 010-1.06z"></path></svg></i></button>
</form>
			</div>
			
									</header>
						<div class="search-overlay"></div>
			<div class="header-image"><img src="/wordpress_blog/wp-content/uploads/2022/03/seashore.jpg" width="1920" height="500" alt=""></div>
<div class="container content-wrapper"><div class="row main-row">			
	<main id="primary" class="site-main no-sidebar">

		

<article id="post-837" class="post-837 post type-post status-publish format-standard hentry category-hexschool">
	
		
	<header class="entry-header">
		
		
		<h1 class="entry-title">Vue3 複習09</h1>			<div class="entry-meta entry-meta-below delimiter-none">
<span class="posted-on"><a href="/wordpress_blog/reviewvue3_09/" rel="bookmark"><time class="entry-date published" datetime="2024-04-23T17:06:43+08:00">2024 年 4 月 23 日</time><time class="updated" datetime="2024-05-04T08:53:48+08:00">2024 年 5 月 4 日</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="/wordpress_blog/author/gee-hsu/">gee.hsu</a></span></span>
</div>			</header><!-- .entry-header -->

	
	<div class="entry-content">
		
<h2 class="wp-block-heading">最終挑戰</h2>



<h3 class="wp-block-heading">最終作業課程介紹</h3>



<h4 class="wp-block-heading">課程目標</h4>



<p>透過課程專屬 API 完成獨立作品</p>



<h4 class="wp-block-heading">電商網站操作流程</h4>



<ul class="wp-block-list">
<li>管理員</li>



<li>用戶</li>
</ul>



<h4 class="wp-block-heading">開發的架構說明</h4>



<ul class="wp-block-list">
<li>前端
<ul class="wp-block-list">
<li>前台</li>



<li>後台</li>
</ul>
</li>



<li>後端</li>
</ul>



<h4 class="wp-block-heading">學習面向</h4>



<ul class="wp-block-list">
<li>後台 – 登入授權、編輯商品、檢視訂單、建立優惠券…<br>學習開發流程、後台邏輯建構</li>



<li>前台 – 檢視商品、選購並加入購物車、提交訂單、模擬付款…
<ul class="wp-block-list">
<li>完整作品經營</li>



<li>美感、細節培養</li>



<li>解決問題的能力</li>
</ul>
</li>
</ul>



<h4 class="wp-block-heading">API 說明</h4>



<p>[API]: https://站點/api/:api_path/admin/product</p>



<ul class="wp-block-list">
<li>申請帳號 – 登入授權也是使用此帳號</li>



<li>申請專屬 API 連結 – 資料內容也會獨立</li>



<li>開始練習</li>
</ul>



<h4 class="wp-block-heading">API 文件</h4>



<p>[API]: https://站點/api/:api_path/admin/product</p>



<p>[方法]: POST</p>



<pre class="wp-block-code"><code>// &#91;參數]:
{
  "data": {
    "title": "&#91;賣]動物園造型衣服3",
    "category": "衣服2",
    ...
  }
}
</code></pre>



<h3 class="wp-block-heading">課程 API 文件及相關資源</h3>



<ol class="wp-block-list">
<li>課程需要先註冊屬於個人的 API 路徑，註冊方法在下一小節會介紹，<a href="https://vue3-course-api.hexschool.io/" target="_blank" rel="noreferrer noopener">註冊網址與 API 站點連結</a>
</li>



<li><a href="https://github.com/hexschool/vue3-course-api-wiki/wiki" target="_blank" rel="noreferrer noopener">API 文件</a></li>



<li>課程中後期，不會所有步驟都一一說明，所以課程中有提供每個階段的 commit，讓大家可以看到每個章節老師修改了哪些部分：<a href="https://github.com/hexschool/vue3-course-api-wiki/wiki/%E9%80%B2%E5%BA%A6-Commit" target="_blank" rel="noreferrer noopener">所有課程進度 Commit (對應課程章節)</a>
</li>



<li>課程中也會提供許多 HTML 片段模板，減少重複繁瑣的行為，如提到會提供模板的部分，<a href="https://github.com/hexschool/vue3-course-api-wiki/wiki/%E8%AA%B2%E7%A8%8B%E9%83%A8%E5%88%86%E6%A8%A1%E6%9D%BF" target="_blank" rel="noreferrer noopener">連結</a>
</li>



<li>雖然課程中 ESLint 選擇為 Airbnb 格式：
<ul class="wp-block-list">
<li>體驗簡單一點的開發規則可選擇 Standard</li>



<li>對 ES6 及錯誤排除有一定掌握者可選擇 Airbnb</li>
</ul>
</li>
</ol>



<p>關於 ESLint 搭配 VSCode 的自動排版可參考（注意，並非所有錯誤都可自動排除）：<a href="https://wcc723.github.io/development/2021/04/11/vscode-eslint-prettier/" target="_blank" rel="noreferrer noopener">連結</a></p>



<p>使用時 ESLint 時：</p>



<ul class="wp-block-list">
<li>可多利用文字編輯器的提示來除錯（除錯也是開發者必學的技能之一）</li>



<li>盡可能避免關閉 ESLint 的提示</li>
</ul>



<h3 class="wp-block-heading">申請課程 API</h3>



<h4 class="wp-block-heading">流程說明:</h4>



<ol class="wp-block-list">
<li>申請一個專屬的課程練習帳號</li>



<li>登入帳號，並申請一個 API 路徑</li>



<li>測試 API 是否可以運作，並且開始實作</li>
</ol>



<h4 class="wp-block-heading">複習 Vue Cli 建立環境</h4>



<ol class="wp-block-list">
<li>使用 Vue Cli 建立環境 vue create vue3_dashboard_record</li>



<li>Please pick a preset: Manually select features</li>



<li>Check the features needed for your project: Choose Vue version, Babel, Router, CSS Pre-processors, Linter</li>



<li>Choose a version of Vue.js that you want to start the project with 3.x (Preview)</li>



<li>Use history mode for router? (Requires proper server setup for index fallback in production) No</li>



<li>Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default): Sass/SCSS (with node-sass)</li>



<li>Pick a linter / formatter config: Airbnb</li>



<li>Pick additional lint features: Lint on save</li>



<li>Where do you prefer placing config for Babel, ESLint, etc.? In dedicated config files</li>



<li>Save this as a preset for future projects? (y/N) N</li>
</ol>



<h4 class="wp-block-heading">API 路徑加到環境變數</h4>



<ol class="wp-block-list">
<li>在根目錄新增 .env 檔案<br>API Server 路徑: VUE_APP_API<br>API 個人路徑: VUE_APP_PATH</li>



<li>開啟 Home.vue 檔案調整程式碼內容<br>使用生命週期讀出環境變數</li>



<li>重新執行 npm run serve</li>



<li>開啟 Console 查看環境變數是否有顯示</li>
</ol>



<pre class="wp-block-code"><code>// .env
VUE_APP_API=http://localhost:3000/
VUE_APP_PATH=geehsu-api
</code></pre>



<pre class="wp-block-code"><code>// views/Home.vue
&lt;template&gt;
  &lt;div class="home"&gt;
    &lt;img alt="Vue logo" src="../assets/logo.png"&gt;
    &lt;HelloWorld msg="Welcome to Your Vue.js App"/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// @ is an alias to /src
import HelloWorld from '@/components/HelloWorld.vue';

export default {
  name: 'Home',
  components: {
    HelloWorld,
  },
  created() {
    console.log(process.env.VUE_APP_API, process.env.VUE_APP_PATH);
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// 除錯 Console 警告
// vue.config.js
module.exports = {
  chainWebpack: (config) =&gt; {
    config.plugin('define').tap((definitions) =&gt; {
      Object.assign(definitions&#91;0], {
        __VUE_OPTIONS_API__: 'true',
        __VUE_PROD_DEVTOOLS__: 'false',
        __VUE_PROD_HYDRATION_MISMATCH_DETAILS__: 'false'
      })
      return definitions
    })
  }
}
</code></pre>



<h3 class="wp-block-heading">常見 API 問題解決方式</h3>



<h4 class="wp-block-heading">路徑與方法是一對的</h4>



<p>API 是由路徑 + 方法組成的，文件中皆會標示所有 API 可用的方法如 GET、POST、DELETE 等等，必須使用完全對應的方法才能運作喔。</p>



<h4 class="wp-block-heading">從錯誤訊息中尋找問題</h4>



<p>API 發送的過程中錯一個字就會無法運行，盡可能從錯誤的回饋中尋找問題，檢查：</p>



<ul class="wp-block-list">
<li>路徑是否拼對</li>



<li>GET、POST 等方法是否正確</li>



<li>程式碼運作是否如預期</li>
</ul>



<h4 class="wp-block-heading">遇到錯誤無法解決</h4>



<p>發問流程:<br><strong>可以提供完整程式碼讓老師、助教測試</strong><br>可以將原始碼上傳至 GitHub 或雲端硬碟，並將說明及連結提供在問答區<br>上傳時特別注意: 不需要夾帶 node_modules、dist 資料夾<br>這會導致信件無法開啟，且下載後依然要刪除重新安裝。</p>



<p>另外請<strong>盡可能提供完整訊息</strong>，由於許多問題並非片段就能判斷<br>所以盡可能提供越完整越好</p>



<ul class="wp-block-list">
<li>錯誤的問題描述 (哪一個 API、做了什麼事、預期有怎樣的進展、錯誤的問題點)</li>



<li>錯誤的 API 連結為何</li>



<li>完整錯誤的訊息圖片 (Chrome Console)</li>



<li>出現錯誤的程式碼</li>
</ul>



<h3 class="wp-block-heading">匯入 Bootstrap 並調整版型</h3>



<ol class="wp-block-list">
<li>安裝 Bootstrap 套件 – npm install bootstrap</li>



<li>引用 Bootstrap 到專案裡面<br>Bootstrap 文件 &gt; Customize &gt; Sass &gt; Importing<br>複製 @import “../node_modules/bootstrap/scss/bootstrap”;</li>



<li>開啟 App.vue 檔案貼上程式碼後改寫<br>@import “~bootstrap/scss/bootstrap”;</li>



<li>重新運行 npm run serve</li>



<li>在 Bootstrap 文件 &gt; 元件 &gt; 按鈕<br>複製按鈕程式碼貼到 App.vue 檔案測試是否有正確載入 Bootstrap 套件</li>



<li>客製化 Bootstrap 樣式<br>在 assets 資料夾新增 all.scss 檔案<br>在 assets 資料夾新增 helpers 資料夾<br>在 assets/helpers 新增 _variables.scss 檔案 (_在scss不會被編譯出來)</li>



<li>找到 node_modules/bootstrap/scss/_variables.scss 打開<br>複製 _variables.scss 所有程式碼直接貼到 assets/helpers/_variables.scss 檔案</li>



<li>客製化變數<br>在 Bootstrap 文件 &gt; Customize &gt; Sass &gt; Importing<br>複製文件需要的程式碼貼到 assets/all.scss 並改寫<br>匯入所有的 Bootstrap</li>



<li>在 App.vue 檔案調整成自定義 Sass 匯入路徑</li>



<li>在 assets/helpers/_variables.scss 檔案調整變數</li>
</ol>



<pre class="wp-block-code"><code>// App.vue
&lt;template&gt;
  &lt;div id="nav"&gt;
    &lt;router-link to="/"&gt;Home&lt;/router-link&gt; |
    &lt;router-link to="/about"&gt;About&lt;/router-link&gt;
  &lt;/div&gt;
  &lt;button type="button" class="btn btn-primary"&gt;Primary&lt;/button&gt;
  &lt;button type="button" class="btn btn-secondary"&gt;Secondary&lt;/button&gt;
  &lt;button type="button" class="btn btn-success"&gt;Success&lt;/button&gt;
  &lt;button type="button" class="btn btn-danger"&gt;Danger&lt;/button&gt;
  &lt;button type="button" class="btn btn-warning"&gt;Warning&lt;/button&gt;
  &lt;button type="button" class="btn btn-info"&gt;Info&lt;/button&gt;
  &lt;button type="button" class="btn btn-light"&gt;Light&lt;/button&gt;
  &lt;button type="button" class="btn btn-dark"&gt;Dark&lt;/button&gt;

  &lt;button type="button" class="btn btn-link"&gt;Link&lt;/button&gt;
  &lt;router-view/&gt;
&lt;/template&gt;

&lt;style lang="scss"&gt;
@import "./assets/all";
&lt;/style&gt;
</code></pre>



<pre class="wp-block-code"><code>// assets/helpers/_variables.scss
// scss-docs-start theme-colors-map
$theme-colors: (
  "primary":    black , // $primary,
  "secondary":  $secondary,
  "success":    $success,
  "info":       $info,
  "warning":    $warning,
  "danger":     $danger,
  "light":      $light,
  "dark":       $dark
) !default;
// scss-docs-end theme-colors-map</code></pre>



<pre class="wp-block-code"><code>// assets/all.scss
// 1. Include functions first (so you can manipulate colors, SVGs, calc, etc)
@import "~bootstrap/scss/functions";

// 2. Include any default variable overrides here

// 3. Include remainder of required Bootstrap stylesheets (including any separate color mode stylesheets)
// 客製化 variables 路徑
@import "./helpers/variables";
@import "~bootstrap/scss/variables-dark";

// 4. Include any default map overrides here

// 5. Include remainder of required parts
@import "~bootstrap/scss/maps";
@import "~bootstrap/scss/mixins";
@import "~bootstrap/scss/root";

// 匯入所有的 Bootstrap
@import "~bootstrap/scss/bootstrap";
</code></pre>



<h3 class="wp-block-heading">製作登入頁面</h3>



<p>注意事項：.env 檔中的站點需要調整才能夠對應到文件 範例如下：</p>



<pre class="wp-block-code"><code>VUE_APP_API=https://vue3-course-api.hexschool.io/
</code></pre>



<p><a rel="noreferrer noopener" href="https://github.com/hexschool/vue3-course-api-wiki/wiki/%E7%99%BB%E5%85%A5%E5%8F%8A%E9%A9%97%E8%AD%89" target="_blank">登入及驗證</a>、<a href="https://www.npmjs.com/package/vue-axios">vue-a</a><a rel="noreferrer noopener" href="https://www.npmjs.com/package/vue-axios" target="_blank">xio</a><a href="https://www.npmjs.com/package/vue-axios">s</a>、<a href="https://github.com/hexschool/vue3-course-api-wiki/wiki/%E8%AA%B2%E7%A8%8B%E9%83%A8%E5%88%86%E6%A8%A1%E6%9D%BF" target="_blank" rel="noreferrer noopener">課程部分模板</a></p>



<ol class="wp-block-list">
<li>查看登入及驗證 API 文件<br>[API]、[方法]、[參數]、[成功回應]、[失敗回應]</li>



<li>安裝 vue-axios 套件<br>npm install –save axios vue-axios</li>



<li>匯入 vue-axios 套件<br>Vue2, Vue3 載入方式有所不同<br>複製程式碼貼到 main.js 檔案</li>



<li>調整 main.js 檔案結構</li>



<li>重新運行 npm run serve</li>



<li>新增 views/Login.vue 檔案<br>製作簡單頁面確保現在頁面已經建立成功<br>建立檔案再調整路由</li>



<li>查看 login 畫面有無正確運作<br>http://localhost:8080/#/login</li>



<li>清除 App.vue 檔案多餘的程式碼片段</li>



<li>在 Login.vue 加入登入的版型<br>使用課程部分模板調整使用</li>



<li>撰寫 Login.vue &lt;script&gt; JS 的部分<br>查看登入及驗證文件登入參數的物件格式、撰寫在 data 資料<br>使用 v-model 雙向綁定表單資料</li>



<li>測試是否能正常運作<br>輸入表單資料送出、查看 Vue.js devtools</li>



<li>串接 API<br>在 Login.vue 撰寫 methods 方法<br>把事件加到 &lt;form&gt; 標籤，使用 @submit 事件<br>可加上 prevent 避免觸發 html 預設事件</li>



<li>串接 API 必須把路徑組起來<br>環境變數站點位置+登入的實際 API<br>${process.env.VUE_APP_API}/admin/signin</li>



<li>送出 api<br>使用 this.$http.post 方法</li>



<li>試著登入測試是否有回傳資料</li>
</ol>



<pre class="wp-block-code"><code>// src/main.js
import { createApp } from 'vue';
import axios from 'axios';
import VueAxios from 'vue-axios';
import App from './App.vue';
import router from './router';

const app = createApp(App);
app.use(VueAxios, axios);
app.use(router);
app.mount('#app');
</code></pre>



<pre class="wp-block-code"><code>// views/Login.vue
&lt;template&gt;
  &lt;div class="container mt-5"&gt;
    &lt;form class="row justify-content-center"
    @submit.prevent="signIn"&gt;
      &lt;div class="col-md-6"&gt;
        &lt;h1 class="h3 mb-3 font-weight-normal"&gt;請先登入&lt;/h1&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputEmail" class="sr-only"&gt;Email address&lt;/label&gt;
          &lt;input
            type="email"
            id="inputEmail"
            class="form-control"
            placeholder="Email address"
            required
            autofocus
            v-model="user.username"
          /&gt;
        &lt;/div&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputPassword" class="sr-only"&gt;Password&lt;/label&gt;
          &lt;input
            type="password"
            id="inputPassword"
            class="form-control"
            placeholder="Password"
            required
            v-model="user.password"
          /&gt;
        &lt;/div&gt;
        &lt;div class="text-end mt-4"&gt;
          &lt;button class="btn btn-lg btn-primary btn-block" type="submit"&gt;登入&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      user: {
        username: '',
        password: '',
      },
    };
  },
  methods: {
    signIn() {
      console.log('login');
      // 環境變數站點位置 + 登入的實際 API
      const api = `${process.env.VUE_APP_API}admin/signin`;
      console.log(api);
      // api 路徑, 夾帶的資料
      this.$http.post(api, this.user)
        .then((res) =&gt; {
          console.log(res);
        });
    },
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// router/index.js
import { createRouter, createWebHashHistory } from 'vue-router';
import Home from '../views/Home.vue';

const routes = &#91;
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.&#91;hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
  {
    path: '/login',
    component: () =&gt; import('../views/Login.vue'),
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
});

export default router;
</code></pre>



<pre class="wp-block-code"><code>// App.vue
&lt;template&gt;
  &lt;div id="nav"&gt;
    &lt;router-link to="/"&gt;Home&lt;/router-link&gt; |
    &lt;router-link to="/about"&gt;About&lt;/router-link&gt;
  &lt;/div&gt;
  &lt;router-view/&gt;
&lt;/template&gt;

&lt;style lang="scss"&gt;
@import "./assets/all";
&lt;/style&gt;
</code></pre>



<pre class="wp-block-code"><code>// .env
VUE_APP_API=https://vue3-course-api.hexschool.io/
VUE_APP_PATH=geehsu-api
</code></pre>



<h3 class="wp-block-heading">登入與 Cookie</h3>



<ol class="wp-block-list">
<li>查看瀏覽器 Cookie 儲存位置</li>



<li>查看 MDN 文件 –&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie#%E7%A4%BA%E4%BE%8B_3_%E5%8F%AA%E6%89%A7%E8%A1%8C%E6%9F%90%E4%BA%8B%E4%B8%80%E6%AC%A1" target="_blank" rel="noreferrer noopener">Cookie 文件連結</a>
</li>



<li>撰寫 document.cookie 程式碼</li>



<li>登入後查看瀏覽器 Cookie 是否有正確儲存</li>
</ol>



<pre class="wp-block-code"><code>// views/Login.vue
&lt;template&gt;
  &lt;div class="container mt-5"&gt;
    &lt;form class="row justify-content-center"
    @submit.prevent="signIn"&gt;
      &lt;div class="col-md-6"&gt;
        &lt;h1 class="h3 mb-3 font-weight-normal"&gt;請先登入&lt;/h1&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputEmail" class="sr-only"&gt;Email address&lt;/label&gt;
          &lt;input
            type="email"
            id="inputEmail"
            class="form-control"
            placeholder="Email address"
            required
            autofocus
            v-model="user.username"
          /&gt;
        &lt;/div&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputPassword" class="sr-only"&gt;Password&lt;/label&gt;
          &lt;input
            type="password"
            id="inputPassword"
            class="form-control"
            placeholder="Password"
            required
            v-model="user.password"
          /&gt;
        &lt;/div&gt;
        &lt;div class="text-end mt-4"&gt;
          &lt;button class="btn btn-lg btn-primary btn-block" type="submit"&gt;登入&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      user: {
        username: '',
        password: '',
      },
    };
  },
  methods: {
    signIn() {
      console.log('login');
      // 環境變數站點位置 + 登入的實際 API
      const api = `${process.env.VUE_APP_API}admin/signin`;
      console.log(api);
      // api 路徑, 夾帶的資料
      this.$http.post(api, this.user)
        .then((res) =&gt; {
          // Cookie 存取
          // 前面: 儲存 Cookie 內容; 後面: 到期日
          // 儲存 Cookie 內容: 自定義名稱 = token 值
          // 到期日轉成 token 可以儲存的編碼
          const { token, expired } = res.data;
          // console.log(token, expired);
          document.cookie = `hexToken=${token}; expires=${new Date(expired)}`;
          console.log(res);
        });
    },
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">Cookie 存取的語法</h3>



<p>MDN 文件，將 Cookie 存入、取出:&nbsp;<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie" target="_blank" rel="noreferrer noopener">連結</a></p>



<pre class="wp-block-code"><code>// MDN 文件，將 Cookie 存入、取出 - 範例程式碼
const token = response.data.token;
const expired = response.data.expired;
console.log(token, expired);
document.cookie = `hexToken=${token};expires=${new Date(expired)};`;
</code></pre>



<p>Axios 文件，設定預設 Headers:&nbsp;<a href="https://github.com/axios/axios#global-axios-defaults" target="_blank" rel="noreferrer noopener">連結</a></p>



<pre class="wp-block-code"><code>// Axios 文件，設定預設 Headers - 範例程式碼
const token = document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*(&#91;^;]*).*$)|^.*$/, '$1');
this.$http.defaults.headers.common.Authorization = `${token}`;
</code></pre>



<h3 class="wp-block-heading">確認是否維持登入狀態</h3>



<ol class="wp-block-list">
<li>查看登入及驗證文件<br>檢查用戶是否仍持續登入<br>驗證方法 – 將 Token 加入 Headers</li>



<li>Token<br>把 Token 從 Cookie 取出<br>把 Token 加到 Headers</li>



<li>查看 MDN 文件 –&nbsp;<a rel="noreferrer noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie#%E7%A4%BA%E4%BE%8B_2_%E5%BE%97%E5%88%B0%E5%90%8D%E4%B8%BA_test2_%E7%9A%84_cookie" target="_blank">Cookie 文件連結</a><br>複製 myCookie 程式碼並做改寫</li>



<li>查看 axios 文件 –&nbsp;<a href="https://github.com/axios/axios?tab=readme-ov-file#global-axios-defaults" target="_blank" rel="noreferrer noopener">Global axios defaults</a>
</li>



<li>實作把 Cookie 取出來、以及把 Token 發送出去</li>



<li>新增 views/Dashboard.vue 檔案<br>在 router/index.js 檔案把 Dashboard 加到路由表<br>http://localhost:8080/#/dashboard<br>查看是否有正確運作</li>



<li>在 Dashboard.vue 檔案撰寫程式碼<br>專注在 JS 撰寫<br>取出 token<br>把token 夾帶到 headers 裡面<br>複製 Global axios defaults 程式碼</li>



<li>試著觸發剛剛的 API<br>複製 Login.vue signIn() 裡面的程式碼<br>把多餘的程式碼清掉<br>檢查用戶是否仍然持續登入，把 API 路徑改成 api/user/check</li>



<li>查看 console 回傳的 data 是否是成功</li>



<li>清除 Cookie 查看是否仍正確登入</li>



<li>在 Login.vue 檔案補上登入判斷，登入成功後會轉址到 Dashboard 頁面</li>



<li>在 Dashboard.vue 檔案補上登入判斷，登入失敗後會轉址到 Login 頁面</li>
</ol>



<pre class="wp-block-code"><code>// views/Dashboard.vue
&lt;template&gt;
  Dashboard
&lt;/template&gt;

&lt;script&gt;
export default {
  created() {
    // 取出 token
    // test2 改寫成 hexToken
    // Airbnb 規範把錯誤的 \ 去除
    const token = document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*(&#91;^;]*).*$)|^.*$/, '$1');
    // console.log(token);
    // token 夾帶到 headers 裡面
    // &#91;"Authorization"] 改寫成 .Authorization
    this.$http.defaults.headers.common.Authorization = token;
    // 檢查用戶是否仍然持續登入
    const api = `${process.env.VUE_APP_API}api/user/check`;
    this.$http.post(api)
      .then((res) =&gt; {
        // console.log(res);
        // 登入判斷 - 登入失敗
        if (!res.data.success) {
          // 登入失敗後會轉址到 Login 頁面
          this.$router.push('/login');
        }
      });
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// router/index.js
import { createRouter, createWebHashHistory } from 'vue-router';
import Home from '../views/Home.vue';

const routes = &#91;
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.&#91;hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
  {
    path: '/login',
    component: () =&gt; import('../views/Login.vue'),
  },
  {
    path: '/dashboard',
    component: () =&gt; import('../views/Dashboard.vue'),
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
});

export default router;
</code></pre>



<pre class="wp-block-code"><code>// views/Login.vue
&lt;template&gt;
  &lt;div class="container mt-5"&gt;
    &lt;form class="row justify-content-center"
    @submit.prevent="signIn"&gt;
      &lt;div class="col-md-6"&gt;
        &lt;h1 class="h3 mb-3 font-weight-normal"&gt;請先登入&lt;/h1&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputEmail" class="sr-only"&gt;Email address&lt;/label&gt;
          &lt;input
            type="email"
            id="inputEmail"
            class="form-control"
            placeholder="Email address"
            required
            autofocus
            v-model="user.username"
          /&gt;
        &lt;/div&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputPassword" class="sr-only"&gt;Password&lt;/label&gt;
          &lt;input
            type="password"
            id="inputPassword"
            class="form-control"
            placeholder="Password"
            required
            v-model="user.password"
          /&gt;
        &lt;/div&gt;
        &lt;div class="text-end mt-4"&gt;
          &lt;button class="btn btn-lg btn-primary btn-block" type="submit"&gt;登入&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      user: {
        username: '',
        password: '',
      },
    };
  },
  methods: {
    signIn() {
      // console.log('login');
      // 環境變數站點位置 + 登入的實際 API
      const api = `${process.env.VUE_APP_API}admin/signin`;
      // console.log(api);
      // api 路徑, 夾帶的資料
      this.$http.post(api, this.user)
        .then((res) =&gt; {
          // 登入判斷 - 成功狀態
          if (res.data.success) {
            // Cookie 存取
            // 前面: 儲存 Cookie 內容; 後面: 到期日
            // 儲存 Cookie 內容: 自定義名稱 = token 值
            // 到期日轉成 token 可以儲存的編碼
            const { token, expired } = res.data;
            // console.log(token, expired);
            document.cookie = `hexToken=${token}; expires=${new Date(expired)}`;
            // console.log(res);
            // 登入成功會轉址到 Dashboard 頁面
            this.$router.push('/dashboard');
          }
        });
    },
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">調整巢狀路由並且加入 Navbar</h3>



<ol class="wp-block-list">
<li>新增 Products.vue 檔案 – 產品頁面</li>



<li>在 Dashboard.vue 檔案新增 Navbar<br>在 Bootstrap 文件搜尋 Navbar 尋找相對簡單的程式碼複製使用</li>



<li>在 App.vue 檔案把預設的連結清除<br>複製 &lt;router-view&gt; 貼到 Dashboard.vue</li>



<li>打開 router/index.js 路由表<br>在 dashboard 路由新增 products 子路由<br>http://localhost:8080/#/dashboard/products</li>



<li>在 Login.vue 檔案調整程式碼<br>登入成功後的轉址改為 /dashboard/products</li>



<li>在 Dashboard.vue 檔案把 Navbar 程式碼拆分到元件<br>在 src/components 新增 Navbar.vue 檔案<br>把 Dashboard.vue 檔案 Navbar 程式碼剪下貼到 Navbar.vue 檔案</li>



<li>在 Dashboard.vue 匯入 Navbar.vue<br>import Navbar from ‘../components/Navbar.vue’;<br>使用 components 區域註冊 Navbar<br>再把 &lt;Navbar&gt; 標籤加到畫面</li>



<li>在 Navbar.vue 新增登出的功能<br>查看登入及驗證文件<br>從 Login.vue 檔案查看 signIn 方法<br>撰寫 Navbar.vue logout 方法</li>
</ol>



<pre class="wp-block-code"><code>// views/Products.vue
&lt;template&gt;
  產品列表
&lt;/template&gt;
</code></pre>



<pre class="wp-block-code"><code>// views/Dashboard.vue
&lt;template&gt;
  &lt;Navbar&gt;&lt;/Navbar&gt;
  &lt;router-view/&gt;
&lt;/template&gt;

&lt;script&gt;
import Navbar from '../components/Navbar.vue';

export default {
  components: {
    Navbar,
  },
  created() {
    // 取出 token
    // test2 改寫成 hexToken
    // Airbnb 規範把錯誤的 \ 去除
    const token = document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*(&#91;^;]*).*$)|^.*$/, '$1');
    // console.log(token);
    // token 夾帶到 headers 裡面
    // &#91;"Authorization"] 改寫成 .Authorization
    this.$http.defaults.headers.common.Authorization = token;
    // 檢查用戶是否仍然持續登入
    const api = `${process.env.VUE_APP_API}api/user/check`;
    this.$http.post(api)
      .then((res) =&gt; {
        // console.log(res);
        // 登入判斷 - 登入失敗
        if (!res.data.success) {
          // 登入失敗後會轉址到 Login 頁面
          this.$router.push('/login');
        }
      });
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// App.vue
&lt;template&gt;
  &lt;router-view/&gt;
&lt;/template&gt;

&lt;style lang="scss"&gt;
@import "./assets/all";
&lt;/style&gt;
</code></pre>



<pre class="wp-block-code"><code>// router/index.js
import { createRouter, createWebHashHistory } from 'vue-router';
import Home from '../views/Home.vue';

const routes = &#91;
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.&#91;hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
  {
    path: '/login',
    component: () =&gt; import('../views/Login.vue'),
  },
  {
    path: '/dashboard',
    component: () =&gt; import('../views/Dashboard.vue'),
    // 巢狀路由 - 產品列表
    children: &#91;
      {
        path: 'products',
        component: () =&gt; import('../views/Products.vue'),
      },
    ],
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
});

export default router;
</code></pre>



<pre class="wp-block-code"><code>// Login.vue
&lt;template&gt;
  &lt;div class="container mt-5"&gt;
    &lt;form class="row justify-content-center"
    @submit.prevent="signIn"&gt;
      &lt;div class="col-md-6"&gt;
        &lt;h1 class="h3 mb-3 font-weight-normal"&gt;請先登入&lt;/h1&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputEmail" class="sr-only"&gt;Email address&lt;/label&gt;
          &lt;input
            type="email"
            id="inputEmail"
            class="form-control"
            placeholder="Email address"
            required
            autofocus
            v-model="user.username"
          /&gt;
        &lt;/div&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputPassword" class="sr-only"&gt;Password&lt;/label&gt;
          &lt;input
            type="password"
            id="inputPassword"
            class="form-control"
            placeholder="Password"
            required
            v-model="user.password"
          /&gt;
        &lt;/div&gt;
        &lt;div class="text-end mt-4"&gt;
          &lt;button class="btn btn-lg btn-primary btn-block" type="submit"&gt;登入&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      user: {
        username: '',
        password: '',
      },
    };
  },
  methods: {
    signIn() {
      // console.log('login');
      // 環境變數站點位置 + 登入的實際 API
      const api = `${process.env.VUE_APP_API}admin/signin`;
      // console.log(api);
      // api 路徑, 夾帶的資料
      this.$http.post(api, this.user)
        .then((res) =&gt; {
          // 登入判斷 - 成功狀態
          if (res.data.success) {
            // Cookie 存取
            // 前面: 儲存 Cookie 內容; 後面: 到期日
            // 儲存 Cookie 內容: 自定義名稱 = token 值
            // 到期日轉成 token 可以儲存的編碼
            const { token, expired } = res.data;
            // console.log(token, expired);
            document.cookie = `hexToken=${token}; expires=${new Date(expired)}`;
            // console.log(res);
            // 登入成功會轉址到 Dashboard 頁面
            // 改為 /dashboard/products
            this.$router.push('/dashboard/products');
          }
        });
    },
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/components/Navbar.vue
&lt;template&gt;
  &lt;nav class="navbar navbar-expand-lg bg-body-tertiary"&gt;
    &lt;div class="container-fluid"&gt;
      &lt;a class="navbar-brand" href="#"&gt;Navbar w/ text&lt;/a&gt;
      &lt;button class="navbar-toggler" type="button"
      data-bs-toggle="collapse" data-bs-target="#navbarText"
      aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation"&gt;
        &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;
      &lt;/button&gt;
      &lt;div class="collapse navbar-collapse" id="navbarText"&gt;
        &lt;ul class="navbar-nav me-auto mb-2 mb-lg-0"&gt;
          &lt;li class="nav-item"&gt;
            &lt;a class="nav-link active" aria-current="page" href="#"&gt;Home&lt;/a&gt;
          &lt;/li&gt;
          &lt;li class="nav-item"&gt;
            &lt;a class="nav-link" href="#"&gt;Features&lt;/a&gt;
          &lt;/li&gt;
          &lt;li class="nav-item"&gt;
            &lt;a class="nav-link" href="#" @click.prevent="logout"&gt;登出&lt;/a&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
        &lt;span class="navbar-text"&gt;
          Navbar text with an inline element
        &lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/nav&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    logout() {
      const api = `${process.env.VUE_APP_API}logout`;
      this.$http.post(api, this.user)
        .then((res) =&gt; {
          if (res.data.success) {
            // console.log(res);
            this.$router.push('/login');
          }
        });
    },
  },
};
&lt;/script&gt;
</code></pre>



<h4 class="wp-block-heading">導航守衛</h4>



<p>防止使用者觀看到後台介面。</p>



<p>參考: Day17：<a href="https://ithelp.ithome.com.tw/articles/10206041" target="_blank" rel="noreferrer noopener">如何防止使用者未登錄就要訪問頁面？</a></p>



<pre class="wp-block-code"><code>// router/index.js
import { createRouter, createWebHashHistory } from 'vue-router';
import axios from 'axios';
import Home from '../views/Home.vue';

const routes = &#91;
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.&#91;hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
  {
    path: '/login',
    name: 'Login',
    component: () =&gt; import('../views/Login.vue'),
  },
  {
    path: '/dashboard',
    name: 'Dashboard',
    component: () =&gt; import('../views/Dashboard.vue'),
    meta: { requiresAuth: true },
    children: &#91;
      {
        path: 'products',
        name: 'Products',
        component: () =&gt; import('../views/Products.vue'),
        meta: { requiresAuth: true },
      },
    ],
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
});

router.beforeEach((to, from, next) =&gt; {
  console.log('導航守衛啟動');
  if (to.meta.requiresAuth) {
    console.log('need auth');
    const token = document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*(&#91;^;]*).*$)|^.*$/, '$1');
    axios.defaults.headers.common.Authorization = token;
    const api = `${process.env.VUE_APP_API}api/user/check`;
    axios.post(api).then((res) =&gt; {
      console.log(res.data);
      console.log(res.data.success);
      if (res.data.success) {
        next();
      } else {
        next({
          path: '/login',
        });
      }
    });
  } else next();
});

export default router;
</code></pre>



<p>參考:&nbsp;<a href="https://www.youtube.com/watch?v=wdIXW-j-99Y" target="_blank" rel="noreferrer noopener">Vue Router Guard</a></p>



<pre class="wp-block-code"><code>// router/index.js
import { createRouter, createWebHashHistory } from 'vue-router';
import Home from '../views/Home.vue';

const routes = &#91;
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.&#91;hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
  {
    path: '/login',
    name: 'Login',
    component: () =&gt; import('../views/Login.vue'),
  },
  {
    path: '/dashboard',
    name: 'Dashboard',
    component: () =&gt; import('../views/Dashboard.vue'),
    meta: { requiresAuth: true },
    children: &#91;
      {
        path: 'products',
        name: 'Products',
        component: () =&gt; import('../views/Products.vue'),
        meta: { requiresAuth: true },
      },
    ],
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
});

document.isAuthenticated = false;

router.beforeEach((to, from, next) =&gt; {
  if (to.meta.requiresAuth &amp;&amp; !document.isAuthenticated) next({ name: 'Login' });
  else next();
});

export default router;
</code></pre>



<pre class="wp-block-code"><code>// views/Login.vue
&lt;template&gt;
  &lt;div class="container mt-5"&gt;
    &lt;form class="row justify-content-center"
    @submit.prevent="signIn"&gt;
      &lt;div class="col-md-6"&gt;
        &lt;h1 class="h3 mb-3 font-weight-normal"&gt;請先登入&lt;/h1&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputEmail" class="sr-only"&gt;Email address&lt;/label&gt;
          &lt;input
            type="email"
            id="inputEmail"
            class="form-control"
            placeholder="Email address"
            required
            autofocus
            v-model="user.username"
          /&gt;
        &lt;/div&gt;
        &lt;div class="mb-2"&gt;
          &lt;label for="inputPassword" class="sr-only"&gt;Password&lt;/label&gt;
          &lt;input
            type="password"
            id="inputPassword"
            class="form-control"
            placeholder="Password"
            required
            v-model="user.password"
          /&gt;
        &lt;/div&gt;
        &lt;div class="text-end mt-4"&gt;
          &lt;button class="btn btn-lg btn-primary btn-block" type="submit"&gt;登入&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      user: {
        username: '',
        password: '',
      },
    };
  },
  methods: {
    signIn() {
      // console.log('login');
      // 環境變數站點位置 + 登入的實際 API
      const api = `${process.env.VUE_APP_API}admin/signin`;
      // console.log(api);
      // api 路徑, 夾帶的資料
      this.$http.post(api, this.user)
        .then((res) =&gt; {
          // 登入判斷 - 成功狀態
          if (res.data.success) {
            // Cookie 存取
            // 前面: 儲存 Cookie 內容; 後面: 到期日
            // 儲存 Cookie 內容: 自定義名稱 = token 值
            // 到期日轉成 token 可以儲存的編碼
            const { token, expired } = res.data;
            // console.log(token, expired);
            document.cookie = `hexToken=${token}; expires=${new Date(expired)}`;
            // console.log(res);
            // 登入成功會轉址到 Dashboard 頁面
            document.isAuthenticated = true;
            this.$router.push('/dashboard/products');
          }
        });
    },
  },
};
&lt;/script&gt;
</code></pre>



<p>建立 NotFound 頁面，然後轉址到首頁。</p>



<pre class="wp-block-code"><code>// views/NotFound.vue
&lt;template&gt;
  Not Found
&lt;/template&gt;

&lt;script&gt;
export default {
  created() {
    setTimeout(() =&gt; this.$router.push({
      path: '/',
    }), 5000);
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// router/index.js
import { createRouter, createWebHashHistory } from 'vue-router';
import Home from '../views/Home.vue';

const routes = &#91;
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.&#91;hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
  {
    path: '/login',
    name: 'Login',
    component: () =&gt; import('../views/Login.vue'),
  },
  {
    path: '/dashboard',
    name: 'Dashboard',
    component: () =&gt; import('../views/Dashboard.vue'),
    meta: { requiresAuth: true },
    children: &#91;
      {
        path: 'products',
        name: 'Products',
        component: () =&gt; import('../views/Products.vue'),
        meta: { requiresAuth: true },
      },
    ],
  },
  // 404 頁面
  {
    path: '/:pathMatch(.*)*',
    name: 'NotFound',
    component: () =&gt; import('../views/NotFound.vue'),
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
});

document.isAuthenticated = false;

router.beforeEach((to, from, next) =&gt; {
  if (to.meta.requiresAuth &amp;&amp; !document.isAuthenticated) next({ name: 'Login' });
  else next();
});

export default router;
</code></pre>



<h3 class="wp-block-heading">加入產品列表</h3>



<ol class="wp-block-list">
<li>主要撰寫 Products.vue 檔案<br>稍微調整 Dashboard.vue 檔案</li>



<li>調整 Dashboard.vue 檔案程式碼<br>&lt;router-view&gt; 標籤外層加上 .container-fluid</li>



<li>在 Products.vue 檔案<br>用列表的形式完成，複製課程部分模板程式碼貼上</li>



<li>在 Products.vue 撰寫 JS 部分<br>定義 data() 回傳資料，products 資料是陣列、分頁資訊是物件</li>



<li>在 Products.vue 撰寫取得遠端資料的方法<br>定義 methods 物件，getProducts() 方法<br>getProducts() 取得產品列表是多數的產品資訊</li>



<li>查看 API 文件 – 管理控制台 [需驗證]<br>找到取得商品列表，透過 API 路徑取得遠端資料<br>參考 Login.vue 檔案 signIn() 方法調整成取得商品列表的 API 結構<br>[API]: /api/:api_path/admin/products?page=:page<br>尚未製作分頁可以先把分頁後面的 API 移除<br>把 API 和 PATH 改寫成環境變數的路徑<br>${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products<br>API 方法是使用 get</li>



<li>使用生命週期 created() 觸發 getProducts() 方法<br>查看 Console 是否有正確取得遠端資料<br>可以儲存產品資訊和分頁資訊，調整 getProducts() 方法程式碼</li>



<li>使用 Vue 開發者工具檢視</li>



<li>把產品資訊渲染到畫面上</li>
</ol>



<pre class="wp-block-code"><code>// views/Products.vue
&lt;template&gt;
  &lt;table class="table mt-4"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="120"&gt;分類&lt;/th&gt;
        &lt;th&gt;產品名稱&lt;/th&gt;
        &lt;th width="120"&gt;原價&lt;/th&gt;
        &lt;th width="120"&gt;售價&lt;/th&gt;
        &lt;th width="100"&gt;是否啟用&lt;/th&gt;
        &lt;th width="200"&gt;編輯&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr v-for="item in products" :key="item.id"&gt;
        &lt;td&gt;{{ item.category }}&lt;/td&gt;
        &lt;td&gt;{{ item.title }}&lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.origin_price }}
        &lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.price }}
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="text-success" v-if="item.is_enabled"&gt;啟用&lt;/span&gt;
          &lt;span class="text-muted" v-else&gt;未啟用&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;div class="btn-group"&gt;
            &lt;button class="btn btn-outline-primary btn-sm"&gt;編輯&lt;/button&gt;
            &lt;button class="btn btn-outline-danger btn-sm"&gt;刪除&lt;/button&gt;
          &lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      // 產品資訊
      products: &#91;],
      // 分頁資訊
      pagination: {},
    };
  },
  methods: {
    // 取得產品列表是多數的產品資訊
    getProducts() {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products`;
      this.$http.get(api)
        .then((res) =&gt; {
          if (res.data.success) {
            console.log(res.data);
            this.products = res.data.products;
            this.pagination = res.data.pagination;
          }
        });
    },
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// views/Dashboard.vue
&lt;template&gt;
  &lt;Navbar&gt;&lt;/Navbar&gt;
  &lt;div class="container-fluid"&gt;
    &lt;router-view/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Navbar from '../components/Navbar.vue';

export default {
  components: {
    Navbar,
  },
  created() {
    // 取出 token
    // test2 改寫成 hexToken
    // Airbnb 規範把錯誤的 \ 去除
    const token = document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*(&#91;^;]*).*$)|^.*$/, '$1');
    // console.log(token);
    // token 夾帶到 headers 裡面
    // &#91;"Authorization"] 改寫成 .Authorization
    this.$http.defaults.headers.common.Authorization = token;
    // 檢查用戶是否仍然持續登入
    const api = `${process.env.VUE_APP_API}api/user/check`;
    this.$http.post(api)
      .then((res) =&gt; {
        // console.log(res);
        // 登入判斷 - 登入失敗
        if (!res.data.success) {
          // 登入失敗後會轉址到 Login 頁面
          this.$router.push('/login');
        }
      });
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">增加 Bootstrap Modal</h3>



<ol class="wp-block-list">
<li>製作新增產品的彈跳視窗<br>使用事件的方式呼叫元件</li>



<li>查看 Bootstrap 文件<br>元件 &gt; 互動視窗 Modal &gt; 完整範例 Live Demo，是透過 HTML 方式呼叫 Modal<br>因為使用 Vue.js，所以盡可能使用 JS 方式呼叫 Modal<br>元件 &gt; 互動視窗 Modal &gt; 用法 &gt; 傳遞選項<br>使用 new bootstrap modal 方法把 modal 實體化</li>



<li>在 components 資料夾新增 ProductModal.vue 檔案</li>



<li>在 Bootstrap 複製完整範例 Live Demo Modal 部分的程式碼貼到 ProductModeal.vue 檔案</li>



<li>在 ProductModal.vue 檔案加入 JS<br>著重在 JS 的部分<br>在元件新增方法讓外部元件呼叫</li>



<li>調整 ProductModal.vue 檔案 HTML 的部分<br>加上 ref 屬性，透過 ref 方式直接存取 DOM 元素</li>



<li>撰寫 ProductModal.vue 檔案 JS 的部分</li>



<li>參考 Bootstrap 文件 元件 &gt; 互動視窗 Modal &gt; 用法 &gt; 透過 JavaScript<br>複製程式碼貼到 mounted 裡面</li>



<li>在調用之前必須把 Bootstrap 的 Modal 方法載出來<br>在 node_modules/bootstrap/js/dist/modal.js 檔案，把 modal.js 檔案載進來<br>會使用 import 方法載入 Modal<br>調整 mounted 裡面程式碼，改成 new Modal</li>



<li>透過 refs方式把 DOM 元素指向外層的 ref modal<br>繼續調整 mounted 裡面程式碼<br>this.$refs.modal</li>



<li>前面的變數再指回 data 裡面定義的變數<br>改成 this.modal</li>



<li>在 mounted 加上 this.modal.show();</li>



<li>在 Products.vue 檔案<br>直接到 JS 部分直接使用 import 方式把 ProductModal 方法載進來<br>定義 components 進行 ProductModal 區域註冊<br>把 Productmodal 加到畫面上面</li>



<li>把剩餘的一些方法補上<br>showModal 方法、hideModal 方法</li>



<li>在 Products.vue 檔案<br>找到 &lt;ProductModal&gt; 標籤定義名稱 ref=”productModal”<br>使用 ref 方式直接呼叫 Modal 方法</li>



<li>在 Products.vue 檔案<br>在上方加入一些程式碼<br>使用 @click=”$refs.productModal 方式指向所定義的元件，直接呼叫裡面的 showModal 方法</li>
</ol>



<pre class="wp-block-code"><code>// components/ProductModal.vue
&lt;template&gt;
  &lt;!-- Modal --&gt;
  &lt;div class="modal fade" id="exampleModal" tabindex="-1"
  aria-labelledby="exampleModalLabel" aria-hidden="true"
  ref="modal"&gt;
    &lt;div class="modal-dialog"&gt;
      &lt;div class="modal-content"&gt;
        &lt;div class="modal-header"&gt;
          &lt;h1 class="modal-title fs-5" id="exampleModalLabel"&gt;Modal title&lt;/h1&gt;
          &lt;button type="button" class="btn-close" data-bs-dismiss="modal"
          aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-body"&gt;
          ...
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;button type="button" class="btn btn-secondary" data-bs-dismiss="modal"&gt;Close&lt;/button&gt;
          &lt;button type="button" class="btn btn-primary"&gt;Save changes&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 Modal
import Modal from 'bootstrap/js/dist/modal';

export default {
  data() {
    return {
      // 實體內容回傳出來
      // modal 變數定義為物件
      modal: {},
    };
  },
  // 方法
  methods: {
    showModal() {
      this.modal.show();
    },
    hideModal() {
      this.modal.hide();
    },
  },
  // 實體必須在元件載入之後才能正確運作
  // mounted 生命週期
  mounted() {
    this.modal = new Modal(this.$refs.modal);
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// views/Products.vue
&lt;template&gt;
  &lt;div class="text-end"&gt;
    &lt;button class="btn btn-primary" type="button"
    @click="$refs.productModal.showModal()"&gt;
      增加一個產品
    &lt;/button&gt;
  &lt;/div&gt;
  &lt;table class="table mt-4"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="120"&gt;分類&lt;/th&gt;
        &lt;th&gt;產品名稱&lt;/th&gt;
        &lt;th width="120"&gt;原價&lt;/th&gt;
        &lt;th width="120"&gt;售價&lt;/th&gt;
        &lt;th width="100"&gt;是否啟用&lt;/th&gt;
        &lt;th width="200"&gt;編輯&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr v-for="item in products" :key="item.id"&gt;
        &lt;td&gt;{{ item.category }}&lt;/td&gt;
        &lt;td&gt;{{ item.title }}&lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.origin_price }}
        &lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.price }}
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="text-success" v-if="item.is_enabled"&gt;啟用&lt;/span&gt;
          &lt;span class="text-muted" v-else&gt;未啟用&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;div class="btn-group"&gt;
            &lt;button class="btn btn-outline-primary btn-sm"&gt;編輯&lt;/button&gt;
            &lt;button class="btn btn-outline-danger btn-sm"&gt;刪除&lt;/button&gt;
          &lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;ProductModal ref="productModal"&gt;&lt;/ProductModal&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 ProductModal
import ProductModal from '../components/ProductModal.vue';

export default {
  data() {
    return {
      // 產品資訊
      products: &#91;],
      // 分頁資訊
      pagination: {},
    };
  },
  // 定義 components 進行區域註冊
  components: {
    ProductModal,
  },
  methods: {
    // 取得產品列表是多數的產品資訊
    getProducts() {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products`;
      this.$http.get(api)
        .then((res) =&gt; {
          if (res.data.success) {
            console.log(res.data);
            this.products = res.data.products;
            this.pagination = res.data.pagination;
          }
        });
    },
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">透過彈出視窗新增品項</h3>



<ol class="wp-block-list">
<li>新增產品在互動邏輯是相對複雜很多</li>



<li>查看管理控制台 [需驗證] API 文件 – 商品建立</li>



<li>新增產品是如何運作<br>預期點擊右上方新增產品會跳出一個彈出視窗，輸入內容後按下確認把資料新增</li>



<li>這個章節最複雜的是有一個列表的元件，彈出視窗會有另外一個元件，這兩個元件之間的溝通是這個章節最複雜的地方</li>



<li>透過繪圖的形式了解元件之間是怎麼溝通</li>



<li>在 ProductModal.vue、Products.vue 檔案<br>在 ProductModal.vue 檔案建構表單所需要的 HTML 以及 v-model 雙向綁定</li>



<li>提醒: 上傳圖片的行為</li>



<li>在 ProductModal.vue 檔案 data() 裡面新增 tempProduct 物件進行外層的資料傳送的接收</li>



<li>在外層 Products.vue 檔案調整程式碼<br>新增 updateProduct() 方法的事件<br>調整獨立 openModal() 事件</li>



<li>openModal() 方法加到增加一個產品按鈕</li>



<li>tempProduct 資料傳送到內層<br>在內層 ProductModal.vue 建立 props 使用物件格式建立，名稱為 product<br>在外層 Products.vue data() 新增 tempProduct</li>



<li>內層所接收的 props<br>傳進來時使用 product 進行接收，product 是一個物件，預期傳進來的型別是物件 object，預設的情況下如果外層沒有正確的傳遞給予一個預設值 default() 直接回傳一個空的物件</li>



<li>props 原則是前內後外<br>在 Products.vue 檔案 &lt;ProductModal&gt; 標籤撰寫程式碼<br>:product=”tempProduct”</li>



<li>運作流程，外層的 tempProduct 透過 props 傳送進來，內層會使用 product 進行接收</li>



<li>監聽 product 內容有沒有更動，使用 watch 監聽，watch 是一個物件，監聽外層傳進來的 props<br>watch 的目的把傳進來的資料寫到 tempProduct 裡面<br>因為單向數據流不可以直接修改外層的資料<br>this.tempProduct = this.product;</li>



<li>打開開發人員工具 &gt; Vue 開發者工具<br>可以找到 &lt;ProductModal&gt;<br>按下增加一個產品，輸入表單內容就可以看到 tempProduct 有增加一些內容</li>



<li>使用 emit 事件把 tempProduct 資料傳送到遠端<br>在內層 ProductModal.vue 檔案 &lt;button&gt; 藉由按鈕觸發 emit 事件 @click=”$emit(‘update-product’)”<br>觸發 emit 事件的同時把 tempProduct 向外傳遞</li>



<li>在外層 Products.vue 預期會使用 updateProduct 進行接收，&lt;ProductModal&gt; 標籤使用 @update-product=”updateProduct”<br>使用前內後外的概念，前面是內層的元件、後面是外層所接收的函式</li>



<li>運作流程會使用 $emit 觸發外層的事件，觸發事件的名稱 updateProduct，接下來觸發 updateProduct() 函式，觸發的同時會把 tempProduct 資料內容透過參數的方式傳到 item 裡面</li>



<li>測試 tempProduct 參數有沒有正確傳過來<br>測試新增品項功能是否能正常運作</li>



<li>必須把開啟的 modal 關閉、再重新取得列表的資料</li>
</ol>



<pre class="wp-block-code"><code>// components/ProductModal.vue
&lt;template&gt;
  &lt;!-- Modal --&gt;
  &lt;div class="modal fade" id="exampleModal" tabindex="-1"
  aria-labelledby="exampleModalLabel" aria-hidden="true"
  ref="modal"&gt;
    &lt;!-- 請同學自行新增 v-model --&gt;
    &lt;div class="modal-dialog modal-xl" role="document"&gt;
      &lt;div class="modal-content border-0"&gt;
        &lt;div class="modal-header bg-dark text-white"&gt;
          &lt;h5 class="modal-title" id="exampleModalLabel"&gt;
            &lt;span&gt;新增產品&lt;/span&gt;
          &lt;/h5&gt;
          &lt;button type="button" class="btn-close"
                  data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-body"&gt;
          &lt;div class="row"&gt;
            &lt;div class="col-sm-4"&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="image" class="form-label"&gt;輸入圖片網址&lt;/label&gt;
                &lt;input type="text" class="form-control" id="image"
                        placeholder="請輸入圖片連結"
                        v-model="tempProduct.imageUrl"&gt;
              &lt;/div&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="customFile" class="form-label"&gt;或 上傳圖片
                  &lt;i class="fas fa-spinner fa-spin"&gt;&lt;/i&gt;
                &lt;/label&gt;
                &lt;input type="file" id="customFile" class="form-control"
                ref="fileInput"
                @change="uploadFile"&gt;
              &lt;/div&gt;
              &lt;img class="img-fluid" :src="tempProduct.imageUrl" alt=""&gt;
              &lt;!-- 延伸技巧，多圖 --&gt;
              &lt;div class="mt-5" v-if="tempProduct.images"&gt;
                &lt;div class="mb-3 input-group" v-for="(image, key) in tempProduct.images" :key="key"&gt;
                  &lt;input type="url" class="form-control form-control"
                          placeholder="請輸入連結"
                          v-model="tempProduct.images&#91;key]"&gt;
                  &lt;button type="button" class="btn btn-outline-danger"
                  @click="tempProduct.images.splice(key, 1)"&gt;
                    移除
                  &lt;/button&gt;
                &lt;/div&gt;
                &lt;div v-if="tempProduct.images&#91;tempProduct.images.length - 1]
                || !tempProduct.images.length"&gt;
                  &lt;button class="btn btn-outline-primary btn-sm d-block w-100"
                  @click="tempProduct.images.push('')"&gt;
                    新增圖片
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="col-sm-8"&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="title" class="form-label"&gt;標題&lt;/label&gt;
                &lt;input type="text" class="form-control" id="title"
                        placeholder="請輸入標題"
                        v-model="tempProduct.title"&gt;
              &lt;/div&gt;

              &lt;div class="row gx-2"&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="category" class="form-label"&gt;分類&lt;/label&gt;
                  &lt;input type="text" class="form-control" id="category"
                          placeholder="請輸入分類"
                          v-model="tempProduct.category"&gt;
                &lt;/div&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="price" class="form-label"&gt;單位&lt;/label&gt;
                  &lt;input type="text" class="form-control" id="unit"
                          placeholder="請輸入單位"
                          v-model="tempProduct.unit"&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div class="row gx-2"&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="origin_price" class="form-label"&gt;原價&lt;/label&gt;
                  &lt;input type="number" class="form-control" id="origin_price"
                          placeholder="請輸入原價"
                          v-model.number="tempProduct.origin_price"&gt;
                &lt;/div&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="price" class="form-label"&gt;售價&lt;/label&gt;
                  &lt;input type="number" class="form-control" id="price"
                          placeholder="請輸入售價"
                          v-model.number="tempProduct.price"&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;hr&gt;

              &lt;div class="mb-3"&gt;
                &lt;label for="description" class="form-label"&gt;產品描述&lt;/label&gt;
                &lt;textarea type="text" class="form-control" id="description"
                          placeholder="請輸入產品描述"
                          v-model="tempProduct.description"&gt;&lt;/textarea&gt;
              &lt;/div&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="content" class="form-label"&gt;說明內容&lt;/label&gt;
                &lt;textarea type="text" class="form-control" id="content"
                          placeholder="請輸入產品說明內容"
                          v-model="tempProduct.content"&gt;&lt;/textarea&gt;
              &lt;/div&gt;
              &lt;div class="mb-3"&gt;
                &lt;div class="form-check"&gt;
                  &lt;input class="form-check-input" type="checkbox"
                          :true-value="1"
                          :false-value="0"
                          id="is_enabled"
                          v-model="tempProduct.is_enabled"&gt;
                  &lt;label class="form-check-label" for="is_enabled"&gt;
                    是否啟用
                  &lt;/label&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;button type="button" class="btn btn-outline-secondary"
                  data-bs-dismiss="modal"&gt;取消
          &lt;/button&gt;
          &lt;button type="button" class="btn btn-primary"
          @click="$emit('update-product', tempProduct)"&gt;確認&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 Modal
import Modal from 'bootstrap/js/dist/modal';

export default {
  // Props 向內層元件傳遞資料狀態
  props: {
    product: {
      type: Object,
      default() { return {}; },
    },
  },
  // 監聽
  watch: {
    product() {
      this.tempProduct = this.product;
    },
  },
  data() {
    return {
      // 實體內容回傳出來
      // modal 變數定義為物件
      modal: {},
      tempProduct: {},
    };
  },
  // 方法
  methods: {
    showModal() {
      this.modal.show();
    },
    hideModal() {
      this.modal.hide();
    },
  },
  // 實體必須在元件載入之後才能正確運作
  // mounted 生命週期
  mounted() {
    this.modal = new Modal(this.$refs.modal);
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// views/Products.vue
&lt;template&gt;
  &lt;div class="text-end"&gt;
    &lt;button class="btn btn-primary" type="button"
    @click="openModal"&gt;
      增加一個產品
    &lt;/button&gt;
  &lt;/div&gt;
  &lt;table class="table mt-4"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="120"&gt;分類&lt;/th&gt;
        &lt;th&gt;產品名稱&lt;/th&gt;
        &lt;th width="120"&gt;原價&lt;/th&gt;
        &lt;th width="120"&gt;售價&lt;/th&gt;
        &lt;th width="100"&gt;是否啟用&lt;/th&gt;
        &lt;th width="200"&gt;編輯&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr v-for="item in products" :key="item.id"&gt;
        &lt;td&gt;{{ item.category }}&lt;/td&gt;
        &lt;td&gt;{{ item.title }}&lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.origin_price }}
        &lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.price }}
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="text-success" v-if="item.is_enabled"&gt;啟用&lt;/span&gt;
          &lt;span class="text-muted" v-else&gt;未啟用&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;div class="btn-group"&gt;
            &lt;button class="btn btn-outline-primary btn-sm"&gt;編輯&lt;/button&gt;
            &lt;button class="btn btn-outline-danger btn-sm"&gt;刪除&lt;/button&gt;
          &lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;ProductModal ref="productModal"
  :product="tempProduct"
  @update-product="updateProduct"&gt;&lt;/ProductModal&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 ProductModal
import ProductModal from '../components/ProductModal.vue';

export default {
  data() {
    return {
      // 產品資訊
      products: &#91;],
      // 分頁資訊
      pagination: {},
      tempProduct: {},
    };
  },
  // 定義 components 進行區域註冊
  components: {
    ProductModal,
  },
  methods: {
    // 取得產品列表是多數的產品資訊
    getProducts() {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products`;
      this.$http.get(api)
        .then((res) =&gt; {
          if (res.data.success) {
            console.log(res.data);
            this.products = res.data.products;
            this.pagination = res.data.pagination;
          }
        });
    },
    openModal() {
      this.tempProduct = {};
      const productComponent = this.$refs.productModal;
      productComponent.showModal();
    },
    updateProduct(item) {
      // 測試 tempProduct 參數有沒有正確傳過來
      // console.log(item);
      this.tempProduct = item;
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`;
      const productComponent = this.$refs.productModal;
      this.$http.post(api, { data: this.tempProduct })
        .then((response) =&gt; {
          console.log(response);
          // modal 關閉
          productComponent.hideModal();
          // 重新取得列表資料
          this.getProducts();
        });
    },
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">產品資料更新</h3>



<ol class="wp-block-list">
<li>在 Products.vue 檔案的 tempProduct不是只為了新增，還為了編輯做使用</li>



<li>在範例點擊其中一個品項的編輯，會把這一個產品的品項新增到 tempProduct，送出的不是空物件，而是所點擊的這個產品的品項，因此這個 tempProduct 主要的用途是為了編輯做使用</li>



<li>查看管理控制台 [需驗證] API 文件 &gt; 修改產品<br>查看 [API]、[方法] 與商品建立的差異<br>調整程式碼撰寫修改產品的功能</li>



<li>主要調整產品列表的部分<br>在 Products.vue 檔案<br>會透過屬性來判斷目前是否是新增的狀態，在 data() 新增一個 isNew 的狀態，目前是 false</li>



<li>在 openModal 新增兩個參數，一個是不是新的、另一個是編輯的話，把編輯的品項加進來<br>使用 console 查看<br>在 HTML 的 openModal 加入參數 true<br>@click=”openModal(true)<br>在品項的編輯按鈕加上 @click=”openModal(false, item)，false、以及當前的品項<br>當前的品項是把 v-for 裡面的 item 帶到編輯裡面</li>



<li>在 openModal(isNew, item) 加上流程判斷、調整程式碼<br>測試編輯功能是否能正確運作</li>



<li>調整更新的部分<br>查看管理控制台 [需驗證] API 文件 – 修改產品<br>[API]、[方法]<br>使用 this.isNew 流程判斷目前是新增還是修改<br>調整 updateProduct(item) 方法程式碼<br>測試編輯更新功能是否能正確運作</li>
</ol>



<pre class="wp-block-code"><code>// views/Products.vue
&lt;template&gt;
  &lt;div class="text-end"&gt;
    &lt;button class="btn btn-primary" type="button"
    @click="openModal(true)"&gt;
      增加一個產品
    &lt;/button&gt;
  &lt;/div&gt;
  &lt;table class="table mt-4"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="120"&gt;分類&lt;/th&gt;
        &lt;th&gt;產品名稱&lt;/th&gt;
        &lt;th width="120"&gt;原價&lt;/th&gt;
        &lt;th width="120"&gt;售價&lt;/th&gt;
        &lt;th width="100"&gt;是否啟用&lt;/th&gt;
        &lt;th width="200"&gt;編輯&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr v-for="item in products" :key="item.id"&gt;
        &lt;td&gt;{{ item.category }}&lt;/td&gt;
        &lt;td&gt;{{ item.title }}&lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.origin_price }}
        &lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.price }}
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="text-success" v-if="item.is_enabled"&gt;啟用&lt;/span&gt;
          &lt;span class="text-muted" v-else&gt;未啟用&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;div class="btn-group"&gt;
            &lt;button class="btn btn-outline-primary btn-sm"
            @click="openModal(false, item)"&gt;編輯&lt;/button&gt;
            &lt;button class="btn btn-outline-danger btn-sm"&gt;刪除&lt;/button&gt;
          &lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;ProductModal ref="productModal"
  :product="tempProduct"
  @update-product="updateProduct"&gt;&lt;/ProductModal&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 ProductModal
import ProductModal from '../components/ProductModal.vue';

export default {
  data() {
    return {
      // 產品資訊
      products: &#91;],
      // 分頁資訊
      pagination: {},
      tempProduct: {},
      // 目前狀態
      isNew: false,
    };
  },
  // 定義 components 進行區域註冊
  components: {
    ProductModal,
  },
  methods: {
    // 取得產品列表是多數的產品資訊
    getProducts() {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products`;
      this.$http.get(api)
        .then((res) =&gt; {
          if (res.data.success) {
            console.log(res.data);
            this.products = res.data.products;
            this.pagination = res.data.pagination;
          }
        });
    },
    openModal(isNew, item) {
      // console.log(isNew, item);
      // 流程判斷
      if (isNew) {
        this.tempProduct = {};
      } else {
        // 使用展開的形式取出資料
        this.tempProduct = { ...item };
      }
      this.isNew = isNew;
      const productComponent = this.$refs.productModal;
      productComponent.showModal();
    },
    updateProduct(item) {
      // 測試 tempProduct 參數有沒有正確傳過來
      // console.log(item);
      this.tempProduct = item;
      // 新增
      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`;
      let httpMethod = 'post';
      // 編輯
      if (!this.isNes) {
        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;
        httpMethod = 'put';
      }
      const productComponent = this.$refs.productModal;
      this.$http&#91;httpMethod](api, { data: this.tempProduct })
        .then((response) =&gt; {
          console.log(response);
          // modal 關閉
          productComponent.hideModal();
          // 重新取得列表資料
          this.getProducts();
        });
    },
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">透過 API 上傳圖片</h3>



<ol class="wp-block-list">
<li>介紹上傳圖片的功能</li>



<li>查看管理控制台 [需驗證] API 文件 &gt; 上傳圖片<br>上傳表單是使用傳統的 &lt;form&gt; 標籤上傳的時候會用到<br>action 是 API 路徑、enctype 是使用 form-data 格式、method 使用的方法是 post<br>input 欄位有 name 屬性是 file-to-upload，是 API 上傳檔案需要對應的欄位<br>表單傳送 action</li>



<li>在 ProductModal.vue 檔案<br>觀看上傳圖片部分的程式碼，提及&lt;input&gt; @chagne=”uploadFile”、uploadFile() 方法</li>



<li>著重在如何把檔案取出，並轉成 form-data 格式<br>首要條件是取得 input 的檔案內容，在這 &lt;input&gt; 先定義 ref=”fileInput”，便於取得這個 DOM 元素，並且把檔案取出來使用</li>



<li>在 ProductModal.vue 檔案 JS 部分著重在 uploadFile 函式<br>把 input 裡面的內容取出<br>使用 console.dir(uploadFile) 查看，上傳任意圖片測試，查找 files 屬性，是一個陣列，要取得的是第0個檔案，再次上傳任意圖片測試</li>



<li>取出的檔案轉成 form-data 格式<br>宣告 formData 變數使用 new FormData() JS 方法<br>formData.append，append 是要增加一個欄位到表單裡面，欄位的名稱是 API 文件 name=”file-to-upload”，欄位內容是取出來的檔案</li>



<li>透過 API 形式發送到遠端<br>測試 console.log(response.data);</li>
</ol>



<pre class="wp-block-code"><code>// components/ProductModal.vue
&lt;template&gt;
  &lt;!-- Modal --&gt;
  &lt;div class="modal fade" id="exampleModal" tabindex="-1"
  aria-labelledby="exampleModalLabel" aria-hidden="true"
  ref="modal"&gt;
    &lt;!-- 請同學自行新增 v-model --&gt;
    &lt;div class="modal-dialog modal-xl" role="document"&gt;
      &lt;div class="modal-content border-0"&gt;
        &lt;div class="modal-header bg-dark text-white"&gt;
          &lt;h5 class="modal-title" id="exampleModalLabel"&gt;
            &lt;span&gt;新增產品&lt;/span&gt;
          &lt;/h5&gt;
          &lt;button type="button" class="btn-close"
                  data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-body"&gt;
          &lt;div class="row"&gt;
            &lt;div class="col-sm-4"&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="image" class="form-label"&gt;輸入圖片網址&lt;/label&gt;
                &lt;input type="text" class="form-control" id="image"
                        placeholder="請輸入圖片連結"
                        v-model="tempProduct.imageUrl"&gt;
              &lt;/div&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="customFile" class="form-label"&gt;或 上傳圖片
                  &lt;i class="fas fa-spinner fa-spin"&gt;&lt;/i&gt;
                &lt;/label&gt;
                &lt;input type="file" id="customFile" class="form-control"
                ref="fileInput"
                @change="uploadFile"&gt;
              &lt;/div&gt;
              &lt;img class="img-fluid" :src="tempProduct.imageUrl" alt=""&gt;
              &lt;!-- 延伸技巧，多圖 --&gt;
              &lt;div class="mt-5" v-if="tempProduct.images"&gt;
                &lt;div class="mb-3 input-group" v-for="(image, key) in tempProduct.images" :key="key"&gt;
                  &lt;input type="url" class="form-control form-control"
                          placeholder="請輸入連結"
                          v-model="tempProduct.images&#91;key]"&gt;
                  &lt;button type="button" class="btn btn-outline-danger"
                  @click="tempProduct.images.splice(key, 1)"&gt;
                    移除
                  &lt;/button&gt;
                &lt;/div&gt;
                &lt;div v-if="tempProduct.images&#91;tempProduct.images.length - 1]
                || !tempProduct.images.length"&gt;
                  &lt;button class="btn btn-outline-primary btn-sm d-block w-100"
                  @click="tempProduct.images.push('')"&gt;
                    新增圖片
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="col-sm-8"&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="title" class="form-label"&gt;標題&lt;/label&gt;
                &lt;input type="text" class="form-control" id="title"
                        placeholder="請輸入標題"
                        v-model="tempProduct.title"&gt;
              &lt;/div&gt;

              &lt;div class="row gx-2"&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="category" class="form-label"&gt;分類&lt;/label&gt;
                  &lt;input type="text" class="form-control" id="category"
                          placeholder="請輸入分類"
                          v-model="tempProduct.category"&gt;
                &lt;/div&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="price" class="form-label"&gt;單位&lt;/label&gt;
                  &lt;input type="text" class="form-control" id="unit"
                          placeholder="請輸入單位"
                          v-model="tempProduct.unit"&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div class="row gx-2"&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="origin_price" class="form-label"&gt;原價&lt;/label&gt;
                  &lt;input type="number" class="form-control" id="origin_price"
                          placeholder="請輸入原價"
                          v-model.number="tempProduct.origin_price"&gt;
                &lt;/div&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="price" class="form-label"&gt;售價&lt;/label&gt;
                  &lt;input type="number" class="form-control" id="price"
                          placeholder="請輸入售價"
                          v-model.number="tempProduct.price"&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;hr&gt;

              &lt;div class="mb-3"&gt;
                &lt;label for="description" class="form-label"&gt;產品描述&lt;/label&gt;
                &lt;textarea type="text" class="form-control" id="description"
                          placeholder="請輸入產品描述"
                          v-model="tempProduct.description"&gt;&lt;/textarea&gt;
              &lt;/div&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="content" class="form-label"&gt;說明內容&lt;/label&gt;
                &lt;textarea type="text" class="form-control" id="content"
                          placeholder="請輸入產品說明內容"
                          v-model="tempProduct.content"&gt;&lt;/textarea&gt;
              &lt;/div&gt;
              &lt;div class="mb-3"&gt;
                &lt;div class="form-check"&gt;
                  &lt;input class="form-check-input" type="checkbox"
                          :true-value="1"
                          :false-value="0"
                          id="is_enabled"
                          v-model="tempProduct.is_enabled"&gt;
                  &lt;label class="form-check-label" for="is_enabled"&gt;
                    是否啟用
                  &lt;/label&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;button type="button" class="btn btn-outline-secondary"
                  data-bs-dismiss="modal"&gt;取消
          &lt;/button&gt;
          &lt;button type="button" class="btn btn-primary"
          @click="$emit('update-product', tempProduct)"&gt;確認&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 Modal
import Modal from 'bootstrap/js/dist/modal';

export default {
  // Props 向內層元件傳遞資料狀態
  props: {
    product: {
      type: Object,
      default() { return {}; },
    },
  },
  // 監聽
  watch: {
    product() {
      this.tempProduct = this.product;
      // 多圖範例
      if (!this.tempProduct.images) {
        this.tempProduct.images = &#91;];
      }
    },
  },
  data() {
    return {
      // 實體內容回傳出來
      // modal 變數定義為物件
      modal: {},
      tempProduct: {},
    };
  },
  // 方法
  methods: {
    showModal() {
      this.modal.show();
    },
    hideModal() {
      this.modal.hide();
    },
    uploadFile() {
      // 取出上傳的檔案
      const uploadFile = this.$refs.fileInput.files&#91;0];
      // console.dir(uploadFile);
      // 轉成 form-data 格式
      const formData = new FormData();
      formData.append('file-to-upload', uploadFile);
      // 透過 API 形式發送到遠端
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;
      this.$http.post(url, formData).then((response) =&gt; {
        // console.log(response.data);
        if (response.data.success) {
          this.tempProduct.imageUrl = response.data.imageUrl;
        }
      });
    },
  },
  // 實體必須在元件載入之後才能正確運作
  // mounted 生命週期
  mounted() {
    this.modal = new Modal(this.$refs.modal);
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">使用 mixin 整合相同程式碼</h3>



<ol class="wp-block-list">
<li>元件裡面有相同的程式碼要怎麼樣進行合併</li>



<li>試著完成 delModal 功能</li>



<li>DelModal.vue 和 ProductModal.vue 相同片段的程式碼<br>使用 vue 的特性 mixin 把相同的程式碼抽離出來</li>



<li>在 src 新增資料夾 mixins<br>在 mixins 新增檔案 modalMixin.js</li>



<li>抽離 DelModal.vue 檔案相同程式碼的部分到 modalMixin.js 檔案</li>



<li>在 DelModal.vue 檔案匯入 modalMixin.js 檔案<br>在元件加入 mixins 屬性，是一個陣列<br>mixins: [modalMixin]</li>



<li>使用相同的方式把 ProductModal.vue 檔案相同的程式碼也抽離出來</li>
</ol>



<pre class="wp-block-code"><code>// components/DelModal.vue - 2. 試著完成 delModal 功能
&lt;template&gt;
  &lt;div class="modal fade" id="delModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true" ref="modal"&gt;
    &lt;div class="modal-dialog" role="document"&gt;
      &lt;div class="modal-content border-0"&gt;
        &lt;div class="modal-header bg-danger text-white"&gt;
          &lt;h5 class="modal-title"&gt;
            &lt;span&gt;刪除 {{ item.title }}&lt;/span&gt;
          &lt;/h5&gt;
          &lt;button type="button" class="btn-close"
          data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-body"&gt;
          是否刪除 &lt;strong class="text-danger"&gt;{{ item.title }}&lt;/strong&gt; (刪除後將無法恢復)。
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;button type="button" class="btn btn-outline-secondary"
          data-bs-dismiss="modal"&gt;取消
          &lt;/button&gt;
          &lt;button type="button" class="btn btn-danger"
          @click="$emit('del-item')"&gt;確認刪除
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Modal from 'bootstrap/js/dist/modal';

export default {
  props: {
    item: {},
  },
  data() {
    return {
      modal: '',
    };
  },
  methods: {
    showModal() {
      this.modal.show();
    },
    hideModal() {
      this.modal.hide();
    },
  },
  mounted() {
    this.modal = new Modal(this.$refs.modal);
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// mixins/modalMixin.js
import Modal from 'bootstrap/js/dist/modal';

export default {
  methods: {
    showModal() {
      this.modal.show();
    },
    hideModal() {
      this.modal.hide();
    },
  },
  mounted() {
    this.modal = new Modal(this.$refs.modal);
  },
};
</code></pre>



<pre class="wp-block-code"><code>// components/DelModal.vue
&lt;template&gt;
  &lt;div class="modal fade" id="delModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true" ref="modal"&gt;
    &lt;div class="modal-dialog" role="document"&gt;
      &lt;div class="modal-content border-0"&gt;
        &lt;div class="modal-header bg-danger text-white"&gt;
          &lt;h5 class="modal-title"&gt;
            &lt;span&gt;刪除 {{ item.title }}&lt;/span&gt;
          &lt;/h5&gt;
          &lt;button type="button" class="btn-close"
          data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-body"&gt;
          是否刪除 &lt;strong class="text-danger"&gt;{{ item.title }}&lt;/strong&gt; (刪除後將無法恢復)。
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;button type="button" class="btn btn-outline-secondary"
          data-bs-dismiss="modal"&gt;取消
          &lt;/button&gt;
          &lt;button type="button" class="btn btn-danger"
          @click="$emit('del-item')"&gt;確認刪除
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import modalMixin from '@/mixins/modalMixin';

export default {
  props: {
    item: {},
  },
  data() {
    return {
      modal: '',
    };
  },
  // 使用 mixins 整合相同程式碼
  mixins: &#91;modalMixin],
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// components/ProductModal.vue
&lt;template&gt;
  &lt;!-- Modal --&gt;
  &lt;div class="modal fade" id="exampleModal" tabindex="-1"
  aria-labelledby="exampleModalLabel" aria-hidden="true"
  ref="modal"&gt;
    &lt;!-- 請同學自行新增 v-model --&gt;
    &lt;div class="modal-dialog modal-xl" role="document"&gt;
      &lt;div class="modal-content border-0"&gt;
        &lt;div class="modal-header bg-dark text-white"&gt;
          &lt;h5 class="modal-title" id="exampleModalLabel"&gt;
            &lt;span&gt;新增產品&lt;/span&gt;
          &lt;/h5&gt;
          &lt;button type="button" class="btn-close"
                  data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-body"&gt;
          &lt;div class="row"&gt;
            &lt;div class="col-sm-4"&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="image" class="form-label"&gt;輸入圖片網址&lt;/label&gt;
                &lt;input type="text" class="form-control" id="image"
                        placeholder="請輸入圖片連結"
                        v-model="tempProduct.imageUrl"&gt;
              &lt;/div&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="customFile" class="form-label"&gt;或 上傳圖片
                  &lt;i class="fas fa-spinner fa-spin"&gt;&lt;/i&gt;
                &lt;/label&gt;
                &lt;input type="file" id="customFile" class="form-control"
                ref="fileInput"
                @change="uploadFile"&gt;
              &lt;/div&gt;
              &lt;img class="img-fluid" :src="tempProduct.imageUrl" alt=""&gt;
              &lt;!-- 延伸技巧，多圖 --&gt;
              &lt;div class="mt-5" v-if="tempProduct.images"&gt;
                &lt;div class="mb-3 input-group" v-for="(image, key) in tempProduct.images" :key="key"&gt;
                  &lt;input type="url" class="form-control form-control"
                          placeholder="請輸入連結"
                          v-model="tempProduct.images&#91;key]"&gt;
                  &lt;button type="button" class="btn btn-outline-danger"
                  @click="tempProduct.images.splice(key, 1)"&gt;
                    移除
                  &lt;/button&gt;
                &lt;/div&gt;
                &lt;div v-if="tempProduct.images&#91;tempProduct.images.length - 1]
                || !tempProduct.images.length"&gt;
                  &lt;button class="btn btn-outline-primary btn-sm d-block w-100"
                  @click="tempProduct.images.push('')"&gt;
                    新增圖片
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="col-sm-8"&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="title" class="form-label"&gt;標題&lt;/label&gt;
                &lt;input type="text" class="form-control" id="title"
                        placeholder="請輸入標題"
                        v-model="tempProduct.title"&gt;
              &lt;/div&gt;

              &lt;div class="row gx-2"&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="category" class="form-label"&gt;分類&lt;/label&gt;
                  &lt;input type="text" class="form-control" id="category"
                          placeholder="請輸入分類"
                          v-model="tempProduct.category"&gt;
                &lt;/div&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="price" class="form-label"&gt;單位&lt;/label&gt;
                  &lt;input type="text" class="form-control" id="unit"
                          placeholder="請輸入單位"
                          v-model="tempProduct.unit"&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;div class="row gx-2"&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="origin_price" class="form-label"&gt;原價&lt;/label&gt;
                  &lt;input type="number" class="form-control" id="origin_price"
                          placeholder="請輸入原價"
                          v-model.number="tempProduct.origin_price"&gt;
                &lt;/div&gt;
                &lt;div class="mb-3 col-md-6"&gt;
                  &lt;label for="price" class="form-label"&gt;售價&lt;/label&gt;
                  &lt;input type="number" class="form-control" id="price"
                          placeholder="請輸入售價"
                          v-model.number="tempProduct.price"&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;hr&gt;

              &lt;div class="mb-3"&gt;
                &lt;label for="description" class="form-label"&gt;產品描述&lt;/label&gt;
                &lt;textarea type="text" class="form-control" id="description"
                          placeholder="請輸入產品描述"
                          v-model="tempProduct.description"&gt;&lt;/textarea&gt;
              &lt;/div&gt;
              &lt;div class="mb-3"&gt;
                &lt;label for="content" class="form-label"&gt;說明內容&lt;/label&gt;
                &lt;textarea type="text" class="form-control" id="content"
                          placeholder="請輸入產品說明內容"
                          v-model="tempProduct.content"&gt;&lt;/textarea&gt;
              &lt;/div&gt;
              &lt;div class="mb-3"&gt;
                &lt;div class="form-check"&gt;
                  &lt;input class="form-check-input" type="checkbox"
                          :true-value="1"
                          :false-value="0"
                          id="is_enabled"
                          v-model="tempProduct.is_enabled"&gt;
                  &lt;label class="form-check-label" for="is_enabled"&gt;
                    是否啟用
                  &lt;/label&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;button type="button" class="btn btn-outline-secondary"
                  data-bs-dismiss="modal"&gt;取消
          &lt;/button&gt;
          &lt;button type="button" class="btn btn-primary"
          @click="$emit('update-product', tempProduct)"&gt;確認&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import modalMixin from '@/mixins/modalMixin';

export default {
  // Props 向內層元件傳遞資料狀態
  props: {
    product: {
      type: Object,
      default() { return {}; },
    },
  },
  // 監聽
  watch: {
    product() {
      this.tempProduct = this.product;
      // 多圖範例
      if (!this.tempProduct.images) {
        this.tempProduct.images = &#91;];
      }
    },
  },
  data() {
    return {
      // 實體內容回傳出來
      // modal 變數定義為物件
      modal: {},
      tempProduct: {},
    };
  },

  // 使用 mixinx 整合相同程式碼
  mixins: &#91;modalMixin],
  // 方法
  methods: {
    uploadFile() {
      // 取出上傳的檔案
      const uploadFile = this.$refs.fileInput.files&#91;0];
      // console.dir(uploadFile);
      // 轉成 form-data 格式
      const formData = new FormData();
      formData.append('file-to-upload', uploadFile);
      // 透過 API 形式發送到遠端
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;
      this.$http.post(url, formData).then((response) =&gt; {
        // console.log(response.data);
        if (response.data.success) {
          this.tempProduct.imageUrl = response.data.imageUrl;
        }
      });
    },
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">加入讀取的視覺效果</h3>



<ol class="wp-block-list">
<li>使用 vue3-loading-overlay 套件</li>



<li>安裝 vue3-loading-overlay 套件<br>npm install vue3-loading-overlay</li>



<li>查看文件是如何使用讀取效果</li>



<li>載入元件 – Import component<br>複製 vue3-loading-over Usage 的程式碼<br>打開 main.js 檔案，然後貼上程式碼<br>修改程式碼路徑<br>註冊元件，使用全域註冊方式啟用元件</li>



<li>在 Products.vue 檔案把 Loading 元件加到最上方<br>加上 active 狀態，這是一個 props，實際上會把自定義的狀態給傳進去，自定義狀態名稱<br>把狀態加到 data() 裡面</li>



<li>預期在取得產品列表的時候將讀取的效果顯示<br>在 getProducts() 將讀取的效果加上</li>



<li>可以為所有的 AJAX 行為都加上讀取效果，包含登入、註冊、新增產品、編輯、刪除</li>
</ol>



<pre class="wp-block-code"><code>// src/main.js
import { createApp } from 'vue';
import axios from 'axios';
import VueAxios from 'vue-axios';
import Loading from 'vue3-loading-overlay';
import 'vue3-loading-overlay/dist/vue3-loading-overlay.css';
import App from './App.vue';
import router from './router';

const app = createApp(App);
app.use(VueAxios, axios);
app.use(router);
app.component('Loading', Loading);
app.mount('#app');
</code></pre>



<pre class="wp-block-code"><code>// views/Products.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="text-end mt-3"&gt;
    &lt;button class="btn btn-primary" type="button"
    @click="openModal(true)"&gt;
      增加一個產品
    &lt;/button&gt;
  &lt;/div&gt;
  &lt;table class="table mt-4"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="120"&gt;分類&lt;/th&gt;
        &lt;th&gt;產品名稱&lt;/th&gt;
        &lt;th width="120"&gt;原價&lt;/th&gt;
        &lt;th width="120"&gt;售價&lt;/th&gt;
        &lt;th width="100"&gt;是否啟用&lt;/th&gt;
        &lt;th width="200"&gt;編輯&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr v-for="item in products" :key="item.id"&gt;
        &lt;td&gt;{{ item.category }}&lt;/td&gt;
        &lt;td&gt;{{ item.title }}&lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.origin_price }}
        &lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.price }}
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="text-success" v-if="item.is_enabled"&gt;啟用&lt;/span&gt;
          &lt;span class="text-muted" v-else&gt;未啟用&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;div class="btn-group"&gt;
            &lt;button class="btn btn-outline-primary btn-sm"
            @click="openModal(false, item)"&gt;編輯&lt;/button&gt;
            &lt;button class="btn btn-outline-danger btn-sm"
            @click="openDelProductModal(item)"&gt;刪除&lt;/button&gt;
          &lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;ProductModal ref="productModal"
  :product="tempProduct"
  @update-product="updateProduct"&gt;&lt;/ProductModal&gt;
  &lt;DelModal ref="delModal"
  :item="tempProduct"
  @del-item="delProduct"&gt;&lt;/DelModal&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 ProductModal
import ProductModal from '@/components/ProductModal.vue';
import DelModal from '@/components/DelModal.vue';

export default {
  data() {
    return {
      // 產品資訊
      products: &#91;],
      // 分頁資訊
      pagination: {},
      tempProduct: {},
      // 目前狀態
      isNew: false,
      // 讀取狀態
      isLoading: false,
    };
  },
  // 定義 components 進行區域註冊
  components: {
    ProductModal,
    DelModal,
  },
  methods: {
    // 取得產品列表是多數的產品資訊
    getProducts() {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products`;
      // 讀取效果
      this.isLoading = true;
      this.$http.get(api)
        .then((res) =&gt; {
          this.isLoading = false;
          if (res.data.success) {
            console.log(res.data);
            this.products = res.data.products;
            this.pagination = res.data.pagination;
          }
        });
    },
    openModal(isNew, item) {
      // console.log(isNew, item);
      // 流程判斷
      if (isNew) {
        this.tempProduct = {};
      } else {
        // 使用展開的形式取出資料
        this.tempProduct = { ...item };
      }
      this.isNew = isNew;
      const productComponent = this.$refs.productModal;
      productComponent.showModal();
    },
    updateProduct(item) {
      // 測試 tempProduct 參數有沒有正確傳過來
      // console.log(item);
      this.tempProduct = item;
      // 新增
      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`;
      let httpMethod = 'post';
      // 編輯
      if (!this.isNew) {
        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;
        httpMethod = 'put';
      }
      const productComponent = this.$refs.productModal;
      this.$http&#91;httpMethod](api, { data: this.tempProduct })
        .then((response) =&gt; {
          console.log(response);
          // modal 關閉
          productComponent.hideModal();
          // 重新取得列表資料
          this.getProducts();
        });
    },
    // 開啟刪除 Modal
    openDelProductModal(item) {
      this.tempProduct = { ...item };
      const delComponent = this.$refs.delModal;
      delComponent.showModal();
    },
    delProduct() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;
      this.$http.delete(url).then((response) =&gt; {
        console.log(response.data);
        const delComponent = this.$refs.delModal;
        delComponent.hideModal();
        this.getProducts();
      });
    },
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">加入錯誤的訊息回饋</h3>



<ol class="wp-block-list">
<li>錯誤通知算是相對複雜的章節<br>主要原因會牽動到非常多的檔案的互相溝通</li>



<li>使用 Bootstrap 吐司 (Toasts) 元件<br>元件 &gt; 吐司 &gt; 方法</li>



<li>透過講解的形式了解吐司元件是怎麼運作<br>吐司元件跟 Vue 元件如何互動<br>目的是讓所有的元件都可以使用這個通知的功能<br>通知功能不會只掛載在特定的元件下，會獨立放在任何可以呼叫到的地方，是獨立元件<br>可以堆疊產生多個通知<br>分離可以產生堆疊，每個吐司有自己獨立的生命週期，啟用的時候可以使用參數<br>產品列表與吐司元件可以使用到 mitt 套件，進行跨元件的溝通</li>



<li>原始碼是如何運作<br>安裝 mitt 套件，功能為跨元件溝通使用<br>新增 emitter.js 檔案、撰寫程式碼<br>在元件利用的時候可以只加在最外層，在 Dashboard 檔案匯入 emitter，使用 provide 讓內層的元件都可以使用外層功能<br>在 Products.vue 檔案使用 inject<br>在 ToastMessages.vue 檔案使用 inject</li>



<li>新增 ToastMessages.vue 檔案以及程式碼內容<br>作為定位使用、列表呈現<br>在 mounted() 生命週期加上 emitter 事件</li>



<li>新增 Toast.vue 檔案以及程式碼內容<br>吐司元件<br>從 Bootstrap 文件複製程式碼<br>最重要的地方每次吐司元件生成的時候，觸發屬於自己生命周期的時候，吐司元件會開啟 6 秒鐘後消失</li>



<li>Products 如何把訊息傳給吐司元件<br>如何透過 mitt 送到吐司列表裡面<br>在 Products.vue 檔案撰寫程式碼，根據判斷狀態推送不同的訊息內容</li>



<li>可以參考課程範例逐步拆解流程該怎麼樣運作</li>
</ol>



<pre class="wp-block-code"><code>// src/methods/emitter.js
import mitt from 'mitt';

const emitter = mitt();

export default emitter;
</code></pre>



<pre class="wp-block-code"><code>// views/Dashboard.vue
&lt;template&gt;
  &lt;Navbar&gt;&lt;/Navbar&gt;
  &lt;div class="container-fluid mt-3 position-relative"&gt;
    &lt;ToastMessages&gt;&lt;/ToastMessages&gt;
    &lt;router-view/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import emitter from '@/methods/emitter';
import ToastMessages from '@/components/ToastMessages.vue';
import Navbar from '../components/Navbar.vue';

export default {
  components: {
    Navbar,
    ToastMessages,
  },
  // provide
  provide() {
    return {
      emitter,
    };
  },
  created() {
    // 取出 token
    // test2 改寫成 hexToken
    // Airbnb 規範把錯誤的 \ 去除
    const token = document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*(&#91;^;]*).*$)|^.*$/, '$1');
    // console.log(token);
    // token 夾帶到 headers 裡面
    // &#91;"Authorization"] 改寫成 .Authorization
    this.$http.defaults.headers.common.Authorization = token;
    // 檢查用戶是否仍然持續登入
    const api = `${process.env.VUE_APP_API}api/user/check`;
    this.$http.post(api)
      .then((res) =&gt; {
        // console.log(res);
        // 登入判斷 - 登入失敗
        if (!res.data.success) {
          // 登入失敗後會轉址到 Login 頁面
          this.$router.push('/login');
        }
      });
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// views/Products.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="text-end mt-3"&gt;
    &lt;button class="btn btn-primary" type="button"
    @click="openModal(true)"&gt;
      增加一個產品
    &lt;/button&gt;
  &lt;/div&gt;
  &lt;table class="table mt-4"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="120"&gt;分類&lt;/th&gt;
        &lt;th&gt;產品名稱&lt;/th&gt;
        &lt;th width="120"&gt;原價&lt;/th&gt;
        &lt;th width="120"&gt;售價&lt;/th&gt;
        &lt;th width="100"&gt;是否啟用&lt;/th&gt;
        &lt;th width="200"&gt;編輯&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr v-for="item in products" :key="item.id"&gt;
        &lt;td&gt;{{ item.category }}&lt;/td&gt;
        &lt;td&gt;{{ item.title }}&lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.origin_price }}
        &lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.price }}
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="text-success" v-if="item.is_enabled"&gt;啟用&lt;/span&gt;
          &lt;span class="text-muted" v-else&gt;未啟用&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;div class="btn-group"&gt;
            &lt;button class="btn btn-outline-primary btn-sm"
            @click="openModal(false, item)"&gt;編輯&lt;/button&gt;
            &lt;button class="btn btn-outline-danger btn-sm"
            @click="openDelProductModal(item)"&gt;刪除&lt;/button&gt;
          &lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;ProductModal ref="productModal"
  :product="tempProduct"
  @update-product="updateProduct"&gt;&lt;/ProductModal&gt;
  &lt;DelModal ref="delModal"
  :item="tempProduct"
  @del-item="delProduct"&gt;&lt;/DelModal&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 ProductModal
import ProductModal from '@/components/ProductModal.vue';
import DelModal from '@/components/DelModal.vue';

export default {
  data() {
    return {
      // 產品資訊
      products: &#91;],
      // 分頁資訊
      pagination: {},
      tempProduct: {},
      // 目前狀態
      isNew: false,
      // 讀取狀態
      isLoading: false,
    };
  },
  // inject
  inject: &#91;'emitter'],
  // 定義 components 進行區域註冊
  components: {
    ProductModal,
    DelModal,
  },
  methods: {
    // 取得產品列表是多數的產品資訊
    getProducts() {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products`;
      // 讀取效果
      this.isLoading = true;
      this.$http.get(api)
        .then((res) =&gt; {
          this.isLoading = false;
          if (res.data.success) {
            console.log(res.data);
            this.products = res.data.products;
            this.pagination = res.data.pagination;
          }
        });
    },
    openModal(isNew, item) {
      // console.log(isNew, item);
      // 流程判斷
      if (isNew) {
        this.tempProduct = {};
      } else {
        // 使用展開的形式取出資料
        this.tempProduct = { ...item };
      }
      this.isNew = isNew;
      const productComponent = this.$refs.productModal;
      productComponent.showModal();
    },
    updateProduct(item) {
      // 測試 tempProduct 參數有沒有正確傳過來
      // console.log(item);
      this.tempProduct = item;
      // 新增
      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`;
      let httpMethod = 'post';
      // 編輯
      if (!this.isNew) {
        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;
        httpMethod = 'put';
      }
      const productComponent = this.$refs.productModal;
      this.$http&#91;httpMethod](api, { data: this.tempProduct })
        .then((response) =&gt; {
          console.log(response);
          // modal 關閉
          productComponent.hideModal();
          // 判斷狀態推送不同的訊息內容
          if (response.data.success) {
            this.getProducts();
            this.emitter.emit('push-message', {
              style: 'success',
              title: '更新成功',
            });
          } else {
            this.emitter.emit('push-message', {
              style: 'danger',
              title: '更新失敗',
              content: response.data.message.join('、'),
            });
          }
        });
    },
    // 開啟刪除 Modal
    openDelProductModal(item) {
      this.tempProduct = { ...item };
      const delComponent = this.$refs.delModal;
      delComponent.showModal();
    },
    delProduct() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;
      this.$http.delete(url).then((response) =&gt; {
        console.log(response.data);
        const delComponent = this.$refs.delModal;
        delComponent.hideModal();
        this.getProducts();
      });
    },
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/components/ToastMessages.vue - 彈出訊息列表元件
&lt;template&gt;
  &lt;div class="toast-container position-absolute pe-3 top-0 end-0"&gt;
    &lt;Toast v-for="(msg, key) in messages" :key="key"
      :msg="msg"
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Toast from '@/components/Toast.vue';

export default {
  components: { Toast },
  data() {
    return {
      messages: &#91;],
    };
  },
  inject: &#91;'emitter'],
  mounted() {
    // 請自行補上 emitter 事件
    this.emitter.on('push-message', (message) =&gt; {
      const { style = 'success', title, content } = message;
      this.messages.push({ style, title, content });
    });
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/components/Toast.vue - 吐司元件
&lt;template&gt;
  &lt;div class="toast" role="alert" aria-live="assertive" aria-atomic="true" ref="toast"&gt;
    &lt;div class="toast-header"&gt;
      &lt;span :class="`bg-${msg.style}`" class="p-2 rounded me-2 d-inline-block"&gt;&lt;/span&gt;
      &lt;strong class="me-auto"&gt;{{ msg.title }}&lt;/strong&gt;
      &lt;button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"&gt;&lt;/button&gt;
    &lt;/div&gt;
    &lt;div class="toast-body" v-if="msg.content"&gt;
      {{ msg.content }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import Toast from 'bootstrap/js/dist/toast';

export default {
  name: 'Toast',
  props: &#91;
    'msg',
  ],
  mounted() {
    const toastEl = this.$refs.toast;
    const toast = new Toast(toastEl, {
      delay: 6000,
    });
    toast.show();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">加入分頁切換</h3>



<ol class="wp-block-list">
<li>分頁會使用元件的方式製作<br>在之後的訂單、優惠券也可使用分頁的功能</li>



<li>關於分頁是怎麼運作<br>透過 API 形式進行頁面的切換<br>查看管理控制台 [需驗證] 文件 &gt; 取得商品列表</li>



<li>示範直接透過分頁的參數切換頁面<br>在 Products.vue 檔案 getProduct() 直接加入參數切換</li>



<li>在 getProduct() 加上參數預設值的形式 page = 1<br>api 路徑就可以把變數載進來<br>查看 Console 顯示的訊息 pagination、products<br>將後端傳來製作分頁所需要的重要資訊製作成元件</li>



<li>新增 Pagination.vue 檔案和撰寫分頁元件程式碼<br>關於指令、JS 自己練習撰寫</li>



<li>在 Products.vue 檔案加入 &lt;Pagination> 標籤<br>在外層定義 Products 元件，在內層定義 Pagination 元件，把分頁所需要的資訊傳進去，使用 props 的形式把分頁的資訊傳進去 props:pagination，就是從 AJAX 取回來的相關資訊。在點擊分頁的時候會觸發 emit，執行頁面切換使用，會回傳 emits 觸發 getProduct 事件、同時把頁碼帶進來，透過這種方式進行頁面的切換</li>



<li>在 Pagination.vue 檔案預期外面會傳入一個 pages，這個就是 pagination，刻意用不同的名稱來代表，在這裡會傳入一個 pagination，是從 AJAX 所取回來的資料</li>



<li>在 Products.vue 檔案<br>在產品頁面的 getProducts 之後是有把 pagination 的資訊存起來，存起來的內容可以在 &lt;Pagination&gt; 標籤帶進來，重點: 前內後外的概念，前面放入內層所需要接收的資訊，外層帶入 pagination</li>



<li>在 Pagination 檔案把頁碼加到這個區塊<br>在 AJAX 所取回來的資料 pagination 裡面有 total_pages 變數，就可以把變數帶進來，使用 v-for 的形式、page in pages 從外層帶進來的 props 名稱 pages 然後找到 total_pages，使用 v-for 要再加上 key，帶入的是 page 名稱，在 &lt;a&gt; 連結把 page 帶進來</li>



<li>預期點下按鈕時會切換頁面<br>使用 @click.prevent 加上一個自定義事件的名稱 updatePage 並且把頁碼帶進去<br>調整一下函式的內容，會直接對外發送切換頁面的事件<br>this.$emit(’emit-pages’, page)</li>



<li>在 Products.vue 檔案做主要的切換，預期會透過 emit 事件把事件往外送，在 &lt;Pagination&gt; 標籤加上由前內後外，內層事件名稱，預期切換 Products、觸發 getProducts 的事件，外層 getProducts 事件</li>



<li>在 Pagination.vue 檔案加上 active 樣式判斷</li>



<li>上一頁、下一頁自行製作</li>
</ol>



<pre class="wp-block-code"><code>// src/components/Pagination.vue
&lt;template&gt;
  &lt;nav aria-label="Page navigation example"&gt;
    &lt;ul class="pagination justify-content-center"&gt;
      &lt;li class="page-item" :class="{ 'disabled': !pages.has_pre }"&gt;
        &lt;a class="page-link" href="#" aria-label="Previous"
        @click.prevent="updatePage(pages.current_page - 1)"&gt;
          &lt;span aria-hidden="true"&gt;&amp;laquo;&lt;/span&gt;
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li class="page-item"
      v-for="page in pages.total_pages"
      :key="page"
      :class="{ 'active': page === pages.current_page }"&gt;
        &lt;a class="page-link" href="#"
        @click.prevent="updatePage(page)"&gt;
          {{ page }}
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li class="page-item" :class="{ 'disabled': !pages.has_next }"&gt;
        &lt;a class="page-link" href="#" aria-label="Next"
        @click.prevent="updatePage(pages.current_page + 1)"&gt;
          &lt;span aria-hidden="true"&gt;&amp;raquo;&lt;/span&gt;
        &lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/nav&gt;
&lt;/template&gt;

&lt;script&gt;
// :pages="{ 頁碼資訊 }"
// @emitPages="更新頁面事件"
export default {
  props: &#91;'pages'],
  methods: {
    updatePage(page) {
      this.$emit('emit-pages', page);
    },
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// views/Products.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="text-end mt-3"&gt;
    &lt;button class="btn btn-primary" type="button"
    @click="openModal(true)"&gt;
      增加一個產品
    &lt;/button&gt;
  &lt;/div&gt;
  &lt;table class="table mt-4"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="120"&gt;分類&lt;/th&gt;
        &lt;th&gt;產品名稱&lt;/th&gt;
        &lt;th width="120"&gt;原價&lt;/th&gt;
        &lt;th width="120"&gt;售價&lt;/th&gt;
        &lt;th width="100"&gt;是否啟用&lt;/th&gt;
        &lt;th width="200"&gt;編輯&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr v-for="item in products" :key="item.id"&gt;
        &lt;td&gt;{{ item.category }}&lt;/td&gt;
        &lt;td&gt;{{ item.title }}&lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.origin_price }}
        &lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ item.price }}
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="text-success" v-if="item.is_enabled"&gt;啟用&lt;/span&gt;
          &lt;span class="text-muted" v-else&gt;未啟用&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;div class="btn-group"&gt;
            &lt;button class="btn btn-outline-primary btn-sm"
            @click="openModal(false, item)"&gt;編輯&lt;/button&gt;
            &lt;button class="btn btn-outline-danger btn-sm"
            @click="openDelProductModal(item)"&gt;刪除&lt;/button&gt;
          &lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;Pagination :pages="pagination"
  @emit-pages="getProducts"&gt;&lt;/Pagination&gt;
  &lt;ProductModal ref="productModal"
  :product="tempProduct"
  @update-product="updateProduct"&gt;&lt;/ProductModal&gt;
  &lt;DelModal ref="delModal"
  :item="tempProduct"
  @del-item="delProduct"&gt;&lt;/DelModal&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 ProductModal
import ProductModal from '@/components/ProductModal.vue';
import DelModal from '@/components/DelModal.vue';
import Pagination from '@/components/Pagination.vue';

export default {
  data() {
    return {
      // 產品資訊
      products: &#91;],
      // 分頁資訊
      pagination: {},
      tempProduct: {},
      // 目前狀態
      isNew: false,
      // 讀取狀態
      isLoading: false,
    };
  },
  // inject
  inject: &#91;'emitter'],
  // 定義 components 進行區域註冊
  components: {
    ProductModal,
    DelModal,
    Pagination,
  },
  methods: {
    // 取得產品列表是多數的產品資訊
    getProducts(page = 1) {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products?page=${page}`;
      // 讀取效果
      this.isLoading = true;
      this.$http.get(api)
        .then((res) =&gt; {
          this.isLoading = false;
          if (res.data.success) {
            console.log(res.data);
            this.products = res.data.products;
            this.pagination = res.data.pagination;
          }
        });
    },
    openModal(isNew, item) {
      // console.log(isNew, item);
      // 流程判斷
      if (isNew) {
        this.tempProduct = {};
      } else {
        // 使用展開的形式取出資料
        this.tempProduct = { ...item };
      }
      this.isNew = isNew;
      const productComponent = this.$refs.productModal;
      productComponent.showModal();
    },
    updateProduct(item) {
      // 測試 tempProduct 參數有沒有正確傳過來
      // console.log(item);
      this.tempProduct = item;
      // 新增
      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`;
      let httpMethod = 'post';
      // 編輯
      if (!this.isNew) {
        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;
        httpMethod = 'put';
      }
      const productComponent = this.$refs.productModal;
      this.$http&#91;httpMethod](api, { data: this.tempProduct })
        .then((response) =&gt; {
          console.log(response);
          // modal 關閉
          productComponent.hideModal();
          // 判斷狀態推送不同的訊息內容
          if (response.data.success) {
            this.getProducts();
            this.emitter.emit('push-message', {
              style: 'success',
              title: '更新成功',
            });
          } else {
            this.emitter.emit('push-message', {
              style: 'danger',
              title: '更新失敗',
              content: response.data.message.join('、'),
            });
          }
        });
    },
    // 開啟刪除 Modal
    openDelProductModal(item) {
      this.tempProduct = { ...item };
      const delComponent = this.$refs.delModal;
      delComponent.showModal();
    },
    delProduct() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;
      this.$http.delete(url).then((response) =&gt; {
        console.log(response.data);
        const delComponent = this.$refs.delModal;
        delComponent.hideModal();
        this.getProducts();
      });
    },
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">套用全域的千分號</h3>



<ol class="wp-block-list">
<li>數值超過一千以上建議加上千分號，在閱讀上面會比較好，在產品頁面、訂單、優惠券…等都有可能會加入千分號，會建議把千分號功能獨立起來，在每一個頁面、元件都可以使用</li>



<li>新增 filters.js 檔案<br>加入千分號方法、轉換時間格式方法</li>



<li>在 Products.vue 檔案有 origin_price、price<br>把函式加入轉換成千分號的形式<br>匯入 filters.js 檔案，在 Products.vue 檔案只需要匯入 currency 方法<br>將 currency 加到 methods 方法裡面就可以直接使用<br>currency 加在金額的前方，因為 currency 本身是函式必須使用括號</li>



<li>額外的技巧，在 Vue3 官方文件有應用配置 &gt; globalProperties，是全域的屬性<br>可以使用 app.config.globalProperties 定義一個全域的屬性的方法，自定義任何想加入的屬性<br>在每個子元件下都可以直接去使用 this 方式呼叫這個變數，如果是加入一般的純值效益其實不大，加入方法的話，就像千分號方法使用度就會高很多</li>



<li>實作額外的技巧<br>在 main.js 檔案就可以把 filters.js 方法匯入<br>參考官方文件 app.config 設定<br>app.config.globalProperties 然後加上一個自定義的屬性名稱，使用 $filters 這個名稱作為一個集合，建議在屬性名稱最前方加上$，這樣比較不會跟區域元件裡面的變數產生衝突，等於一個物件，就可以把 currency 方法帶進來</li>



<li>filters.js 其實有很多方法，可以陸續加入許多方法，都可以透過這種方式加到 filters 物件裡面</li>



<li>在 Products.vue 檔案，原本是直接呼叫 currency 方法，現在會在前面加上 $filters，可自定義屬性名稱</li>



<li>使用 $filters 這種方式加到全域的屬性，就必須把原本在區域的方式把移除</li>
</ol>



<pre class="wp-block-code"><code>// methods/filters.js
export function currency(num) {
  const n = parseInt(num, 10);
  return `${n.toFixed(0).replace(/./g, (c, i, a) =&gt; (i &amp;&amp; c !== '.' &amp;&amp; ((a.length - i) % 3 === 0) ? `, ${c}`.replace(/\s/g, '') : c))}`;
}

export function date(time) {
  const localDate = new Date(time * 1000);
  return localDate.toLocaleDateString();
}
</code></pre>



<pre class="wp-block-code"><code>// views/Products.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="text-end mt-3"&gt;
    &lt;button class="btn btn-primary" type="button"
    @click="openModal(true)"&gt;
      增加一個產品
    &lt;/button&gt;
  &lt;/div&gt;
  &lt;table class="table mt-4"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="120"&gt;分類&lt;/th&gt;
        &lt;th&gt;產品名稱&lt;/th&gt;
        &lt;th width="120"&gt;原價&lt;/th&gt;
        &lt;th width="120"&gt;售價&lt;/th&gt;
        &lt;th width="100"&gt;是否啟用&lt;/th&gt;
        &lt;th width="200"&gt;編輯&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr v-for="item in products" :key="item.id"&gt;
        &lt;td&gt;{{ item.category }}&lt;/td&gt;
        &lt;td&gt;{{ item.title }}&lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ $filters.currency(item.origin_price) }}
        &lt;/td&gt;
        &lt;td class="text-right"&gt;
          {{ $filters.currency(item.price) }}
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="text-success" v-if="item.is_enabled"&gt;啟用&lt;/span&gt;
          &lt;span class="text-muted" v-else&gt;未啟用&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;div class="btn-group"&gt;
            &lt;button class="btn btn-outline-primary btn-sm"
            @click="openModal(false, item)"&gt;編輯&lt;/button&gt;
            &lt;button class="btn btn-outline-danger btn-sm"
            @click="openDelProductModal(item)"&gt;刪除&lt;/button&gt;
          &lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;Pagination :pages="pagination"
  @emit-pages="getProducts"&gt;&lt;/Pagination&gt;
  &lt;ProductModal ref="productModal"
  :product="tempProduct"
  @update-product="updateProduct"&gt;&lt;/ProductModal&gt;
  &lt;DelModal ref="delModal"
  :item="tempProduct"
  @del-item="delProduct"&gt;&lt;/DelModal&gt;
&lt;/template&gt;

&lt;script&gt;
// 載入 ProductModal
import ProductModal from '@/components/ProductModal.vue';
import DelModal from '@/components/DelModal.vue';
import Pagination from '@/components/Pagination.vue';
// import { currency } from '@/methods/filters';

export default {
  data() {
    return {
      // 產品資訊
      products: &#91;],
      // 分頁資訊
      pagination: {},
      tempProduct: {},
      // 目前狀態
      isNew: false,
      // 讀取狀態
      isLoading: false,
    };
  },
  // inject
  inject: &#91;'emitter'],
  // 定義 components 進行區域註冊
  components: {
    ProductModal,
    DelModal,
    Pagination,
  },
  methods: {
    // 取得產品列表是多數的產品資訊
    getProducts(page = 1) {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products?page=${page}`;
      // 讀取效果
      this.isLoading = true;
      this.$http.get(api)
        .then((res) =&gt; {
          this.isLoading = false;
          if (res.data.success) {
            console.log(res.data);
            this.products = res.data.products;
            this.pagination = res.data.pagination;
          }
        });
    },
    openModal(isNew, item) {
      // console.log(isNew, item);
      // 流程判斷
      if (isNew) {
        this.tempProduct = {};
      } else {
        // 使用展開的形式取出資料
        this.tempProduct = { ...item };
      }
      this.isNew = isNew;
      const productComponent = this.$refs.productModal;
      productComponent.showModal();
    },
    updateProduct(item) {
      // 測試 tempProduct 參數有沒有正確傳過來
      // console.log(item);
      this.tempProduct = item;
      // 新增
      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`;
      let httpMethod = 'post';
      // 編輯
      if (!this.isNew) {
        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;
        httpMethod = 'put';
      }
      const productComponent = this.$refs.productModal;
      this.$http&#91;httpMethod](api, { data: this.tempProduct })
        .then((response) =&gt; {
          console.log(response);
          // modal 關閉
          productComponent.hideModal();
          // 判斷狀態推送不同的訊息內容
          if (response.data.success) {
            this.getProducts();
            this.emitter.emit('push-message', {
              style: 'success',
              title: '更新成功',
            });
          } else {
            this.emitter.emit('push-message', {
              style: 'danger',
              title: '更新失敗',
              content: response.data.message.join('、'),
            });
          }
        });
    },
    // 開啟刪除 Modal
    openDelProductModal(item) {
      this.tempProduct = { ...item };
      const delComponent = this.$refs.delModal;
      delComponent.showModal();
    },
    delProduct() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;
      this.$http.delete(url).then((response) =&gt; {
        console.log(response.data);
        const delComponent = this.$refs.delModal;
        delComponent.hideModal();
        this.getProducts();
      });
    },
    // currency,
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/main.js
import { createApp } from 'vue';
import axios from 'axios';
import VueAxios from 'vue-axios';
import Loading from 'vue3-loading-overlay';
import 'vue3-loading-overlay/dist/vue3-loading-overlay.css';
import App from './App.vue';
import router from './router';
import { currency } from './methods/filters';

const app = createApp(App);
app.config.globalProperties.$filters = {
  currency,
};
app.use(VueAxios, axios);
app.use(router);
app.component('Loading', Loading);
app.mount('#app');
</code></pre>



<h3 class="wp-block-heading">中場加速</h3>



<ol class="wp-block-list">
<li>完成訂單、優惠券的頁面</li>



<li>訂單 – 訂單列表、編輯訂單、刪除訂單、分頁功能</li>



<li>在 Products.vue 檔案<br>在每次發送 http 行為的時候，都會針對事件成功與否觸發 emitter，emitter 就會把成功與否透過吐司的方式呈現，封裝方法就放在 pushMessageState.js</li>



<li>在 main.js 檔案加入全域的屬性<br>app.config.globalProperties.$httpMessageState = $httpMessageState;<br>加入後就可以在每個程式碼都可以直接呼叫這個方法<br>注意: 這個方法是整合 AJAX 的一些錯誤事件，統一整理發送給 Toast 使用，正常來說不太建議把太多的方法掛在全域下面，會不知道這個方法來自於哪裡<br>可以使用 provide 來處理</li>



<li>如何透過 API 完成一個作品<br>下一個章節介紹客戶購物的部分<br>如何完成查看特定產品、以及加到購物車的內容裡面<br>選擇產品的圖片、撰寫產品的文案，並且把內容加到自行設計的介面<br>如何製作購物車、包含購物車列表以及表單填寫的部分</li>
</ol>



<pre class="wp-block-code"><code>// src/components/CouponModal.vue
&lt;template&gt;
  &lt;div class="modal fade" id="couponModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true" ref="modal"&gt;
    &lt;div class="modal-dialog" role="document"&gt;
      &lt;div class="modal-content"&gt;
        &lt;div class="modal-header"&gt;
          &lt;h5 class="modal-title" id="exampleModalLabel"&gt;Modal title&lt;/h5&gt;
          &lt;button type="button" class="btn-close"
          data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-body"&gt;
          &lt;div class="mb-3"&gt;
            &lt;label for="title"&gt;標題&lt;/label&gt;
            &lt;input type="text" class="form-control" id="title" v-model="tempCoupon.title"
            placeholder="請輸入標題"&gt;
          &lt;/div&gt;
          &lt;div class="mb-3"&gt;
            &lt;label for="coupon_code"&gt;優惠碼&lt;/label&gt;
            &lt;input type="text" class="form-control" id="coupon_code" v-model="tempCoupon.code"
            placeholder="請輸入優惠碼"&gt;
          &lt;/div&gt;
          &lt;div class="mb-3"&gt;
            &lt;label for="due_date"&gt;到期日&lt;/label&gt;
            &lt;input type="date" class="form-control" id="due_date"
            v-model="due_date"&gt;
          &lt;/div&gt;
          &lt;div class="mb-3"&gt;
            &lt;label for="price"&gt;折扣百分比&lt;/label&gt;
            &lt;input type="number" class="form-control" id="price"
            v-model.number="tempCoupon.percent" placeholder="請輸入折扣百分比"&gt;
          &lt;/div&gt;
          &lt;div class="mb-3"&gt;
            &lt;div class="form-check"&gt;
              &lt;input class="form-check-input" type="checkbox"
              :true-value="1"
              :false-value="0"
              v-model="tempCoupon.is_enabled" id="is_enabled"&gt;
              &lt;label class="form-check-label" for="is_enabled"&gt;
                是否啟用
              &lt;/label&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;button type="button" class="btn btn-secondary" data-bs-dismiss="modal"&gt;Close&lt;/button&gt;
          &lt;button type="button" class="btn btn-primary"
                  @click="$emit('update-coupon', tempCoupon)"&gt;更新優惠券
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import modalMixin from '@/mixins/modalMixin';

export default {
  name: 'couponModal',
  props: {
    coupon: {},
  },
  data() {
    return {
      tempCoupon: {},
      due_date: '',
    };
  },
  emits: &#91;'update-coupon'],
  watch: {
    coupon() {
      this.tempCoupon = this.coupon;
      // 將時間格式改為 YYYY-MM-DD
      console.log(this.tempCoupon.due_date);
      const dateAndTime = new Date(this.tempCoupon.due_date * 1000)
        .toISOString().split('T');
      &#91;this.due_date] = dateAndTime;
    },
    due_date() {
      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000);
    },
  },
  mixins: &#91;modalMixin],
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/components/Navbar.vue
&lt;template&gt;
  &lt;nav class="navbar navbar-expand-lg bg-body-tertiary"&gt;
    &lt;div class="container-fluid"&gt;
      &lt;a class="navbar-brand" href="#"&gt;購物趣&lt;/a&gt;
      &lt;button class="navbar-toggler" type="button"
      data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
      aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"&gt;
        &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;
      &lt;/button&gt;
      &lt;div class="collapse navbar-collapse" id="navbarNavAltMarkup"&gt;
        &lt;ul class="navbar-nav me-auto mb-2 mb-lg-0"&gt;
          &lt;li class="nav-item"&gt;
            &lt;router-link to="/dashboard/products" class="nav-link"&gt;產品&lt;/router-link&gt;
          &lt;/li&gt;
          &lt;li class="nav-item"&gt;
            &lt;router-link to="/dashboard/orders" class="nav-link"&gt;訂單&lt;/router-link&gt;
          &lt;/li&gt;
          &lt;li class="nav-item"&gt;
            &lt;router-link to="/dashboard/coupons" class="nav-link"&gt;優惠券&lt;/router-link&gt;
          &lt;/li&gt;
          &lt;li class="nav-item"&gt;
            &lt;a class="nav-link" href="#" @click.prevent="logout"&gt;登出&lt;/a&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
        &lt;span class="navbar-text"&gt;
          後台管理
        &lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/nav&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    logout() {
      const api = `${process.env.VUE_APP_API}logout`;
      this.$http.post(api, this.user)
        .then((res) =&gt; {
          if (res.data.success) {
            // console.log(res);
            this.$router.push('/login');
          }
        });
    },
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/components/OrderModal.vue
&lt;template&gt;
  &lt;div class="modal fade" id="productModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true" ref="modal"&gt;
    &lt;div class="modal-dialog modal-xl" role="document"&gt;
      &lt;div class="modal-content border-0"&gt;
        &lt;div class="modal-header bg-dark text-white"&gt;
          &lt;h5 class="modal-title" id="exampleModalLabel"&gt;
            &lt;span&gt;訂單細節&lt;/span&gt;
          &lt;/h5&gt;
          &lt;button type="button" class="btn-close bg-light"
                  data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="modal-body"&gt;
          &lt;div class="row"&gt;
            &lt;div class="col-md-4"&gt;
              &lt;h3&gt;用戶資料&lt;/h3&gt;
              &lt;table class="table"&gt;
                &lt;tbody v-if="tempOrder.user"&gt;
                  &lt;tr&gt;
                    &lt;th style="width: 100px;"&gt;姓名&lt;/th&gt;
                    &lt;td&gt;{{ tempOrder.user.name }}&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;th&gt;Email&lt;/th&gt;
                    &lt;td&gt;{{ tempOrder.user.email }}&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;th&gt;電話&lt;/th&gt;
                    &lt;td&gt;{{ tempOrder.user.tel }}&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;th&gt;地址&lt;/th&gt;
                    &lt;td&gt;{{ tempOrder.user.address }}&lt;/td&gt;
                  &lt;/tr&gt;
                &lt;/tbody&gt;
              &lt;/table&gt;
            &lt;/div&gt;
            &lt;div class="col-md-8"&gt;
              &lt;h3&gt;訂單細節&lt;/h3&gt;
              &lt;table class="table"&gt;
                &lt;tbody&gt;
                  &lt;tr&gt;
                    &lt;th style="width: 100px"&gt;訂單編號&lt;/th&gt;
                    &lt;td&gt;{{ tempOrder.id }}&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;th&gt;下單時間&lt;/th&gt;
                    &lt;td&gt;{{ $filters.date(tempOrder.create_at)}}&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;th&gt;付款時間&lt;/th&gt;
                    &lt;td&gt;
                      &lt;span v-if="tempOrder.paid_date"&gt;
                        {{ $filters.date(tempOrder.paid_date) }}
                      &lt;/span&gt;
                      &lt;span v-else&gt;時間不正確&lt;/span&gt;
                    &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;th&gt;付款狀態&lt;/th&gt;
                    &lt;td&gt;
                      &lt;strong v-if="tempOrder.is_paid" class="text-success"&gt;已付款&lt;/strong&gt;
                      &lt;span v-else class="text-muted"&gt;尚未付款&lt;/span&gt;
                    &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;th&gt;總金額&lt;/th&gt;
                    &lt;td&gt;
                      {{ $filters.currency(tempOrder.total) }}
                    &lt;/td&gt;
                  &lt;/tr&gt;
                &lt;/tbody&gt;
              &lt;/table&gt;
              &lt;h3&gt;選購商品&lt;/h3&gt;
              &lt;table class="table"&gt;
                &lt;thead&gt;
                  &lt;tr&gt;
                  &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                  &lt;tr v-for="item in tempOrder.products" :key="item.id"&gt;
                    &lt;th&gt;
                      {{ item.product.title }}
                    &lt;/th&gt;
                    &lt;td&gt;
                      {{ item.qty }} / {{ item.product.unit }}
                    &lt;/td&gt;
                    &lt;td class="text-end"&gt;
                      {{ $filters.currency(item.final_total) }}
                    &lt;/td&gt;
                  &lt;/tr&gt;
                &lt;/tbody&gt;
              &lt;/table&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="modal-footer"&gt;
          &lt;button type="button" class="btn btn-outline-secondary"
                  data-bs-dismiss="modal"&gt;取消
          &lt;/button&gt;
          &lt;button type="button" class="btn btn-primary"
                  @click="$emit('update-order', tempOrder)"&gt;確認&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import modalMixin from '@/mixins/modalMixin';

export default {
  name: 'orderModal',
  props: {
    order: {
      type: Object,
      default() { return {}; },
    },
  },
  data() {
    return {
      status: {},
      modal: '',
      tempOrder: {},
      isPaid: false,
    };
  },
  emits: &#91;'update-product'],
  mixins: &#91;modalMixin],
  inject: &#91;'emitter'],
  watch: {
    order() {
      this.tempOrder = this.order;
      this.isPaid = this.tempOrder.is_paid;
    },
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/main.js
import { createApp } from 'vue';
import axios from 'axios';
import VueAxios from 'vue-axios';
import Loading from 'vue3-loading-overlay';
import 'vue3-loading-overlay/dist/vue3-loading-overlay.css';
import App from './App.vue';
import router from './router';
import { currency, date } from './methods/filters';
import $httpMessageState from './methods/pushMessageState';

const app = createApp(App);
app.config.globalProperties.$filters = {
  currency,
  date,
};
// 此函式的用途是整合 AJAX 的錯誤事件，統一整理發送給予 Toast 處理
app.config.globalProperties.$httpMessageState = $httpMessageState;

app.use(VueAxios, axios);
app.use(router);
app.component('Loading', Loading);
app.mount('#app');
</code></pre>



<pre class="wp-block-code"><code>// src/methods/pushMessageState.js
import emitter from '@/methods/emitter';

export default function (response, title = '更新') {
  if (response.data.success) {
    emitter.emit('push-message', {
      style: 'success',
      title: `${title}成功`,
    });
  } else {
    // 有些訊息是字串，有些則是陣列，在此統一格式
    const message = typeof response.data.message === 'string'
      ? &#91;response.data.message] : response.data.message;
    emitter.emit('push-message', {
      style: 'danger',
      title: `${title}失敗`,
      content: message.join('、'),
    });
  }
}
</code></pre>



<pre class="wp-block-code"><code>// src/router/index.js
import { createRouter, createWebHashHistory } from 'vue-router';
import Home from '../views/Home.vue';

const routes = &#91;
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.&#91;hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
  {
    path: '/login',
    component: () =&gt; import('../views/Login.vue'),
  },
  {
    path: '/dashboard',
    component: () =&gt; import('../views/Dashboard.vue'),
    // 巢狀路由 - 產品列表
    children: &#91;
      {
        path: 'products',
        component: () =&gt; import('../views/Products.vue'),
      },
      {
        path: 'orders',
        component: () =&gt; import('../views/Orders.vue'),
      },
      {
        path: 'coupons',
        component: () =&gt; import('../views/Coupons.vue'),
      },
    ],
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
  linkActiveClass: 'active',
});

export default router;
</code></pre>



<pre class="wp-block-code"><code>// src/views/Coupons.vue
&lt;template&gt;
  &lt;div&gt;
    &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
    &lt;div class="text-end mt-4"&gt;
      &lt;button class="btn btn-primary" @click="openCouponModal(true)"&gt;
        建立新的優惠券
      &lt;/button&gt;
    &lt;/div&gt;
    &lt;table class="table mt-4"&gt;
      &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt;名稱&lt;/th&gt;
        &lt;th&gt;折扣百分比&lt;/th&gt;
        &lt;th&gt;到期日&lt;/th&gt;
        &lt;th&gt;是否啟用&lt;/th&gt;
        &lt;th&gt;編輯&lt;/th&gt;
      &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
      &lt;tr v-for="(item, key) in coupons" :key="key"&gt;
        &lt;td&gt;{{ item.title }}&lt;/td&gt;
        &lt;td&gt;{{ item.percent }}%&lt;/td&gt;
        &lt;td&gt;{{ $filters.date(item.due_date) }}&lt;/td&gt;
        &lt;td&gt;
          &lt;span v-if="item.is_enabled === 1" class="text-success"&gt;啟用&lt;/span&gt;
          &lt;span v-else class="text-muted"&gt;未起用&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;div class="btn-group"&gt;
            &lt;button class="btn btn-outline-primary btn-sm"
                    @click="openCouponModal(false, item)"
            &gt;編輯&lt;/button&gt;
            &lt;button class="btn btn-outline-danger btn-sm"
                    @click="openDelCouponModal(item)"
            &gt;刪除&lt;/button&gt;
          &lt;/div&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;CouponModal :coupon="tempCoupon" ref="couponModal"
    @update-coupon="updateCoupon"&gt;&lt;/CouponModal&gt;
    &lt;DelModal :item="tempCoupon" ref="delModal" @del-item="delCoupon"/&gt;
    &lt;Pagination :pages="pagination" @emit-pages="getCoupons"&gt;&lt;/Pagination&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import CouponModal from '@/components/CouponModal.vue';
import DelModal from '@/components/DelModal.vue';
import Pagination from '@/components/Pagination.vue';

export default {
  components: {
    CouponModal,
    DelModal,
    Pagination,
  },
  props: {
    config: Object,
  },
  data() {
    return {
      coupons: {},
      tempCoupon: {
        title: '',
        is_enabled: 0,
        percent: 100,
        code: '',
      },
      isLoading: false,
      isNew: false,
      pagination: {},
      currentPage: 1,
    };
  },
  methods: {
    openCouponModal(isNew, item) {
      this.isNew = isNew;
      if (this.isNew) {
        this.tempCoupon = {
          due_date: new Date().getTime() / 1000,
        };
      } else {
        this.tempCoupon = { ...item };
      }
      this.$refs.couponModal.showModal();
    },
    openDelCouponModal(item) {
      this.tempCoupon = { ...item };
      const delComponent = this.$refs.delModal;
      delComponent.showModal();
    },
    getCoupons(currentPage = 1) {
      this.currentPage = currentPage;
      this.isLoading = true;
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons?page=${currentPage}`;
      this.$http.get(url, this.tempProduct).then((response) =&gt; {
        this.coupons = response.data.coupons;
        this.pagination = response.data.pagination;
        this.isLoading = false;
        console.log(response);
      });
    },
    updateCoupon(tempCoupon) {
      if (this.isNew) {
        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;
        this.$http.post(url, { data: tempCoupon }).then((response) =&gt; {
          console.log(response, tempCoupon);
          this.$httpMessageState(response, '新增優惠券');
          this.getCoupons();
          this.$refs.couponModal.hideModal();
        });
      } else {
        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;
        this.$http.put(url, { data: this.tempCoupon }).then((response) =&gt; {
          console.log(response);
          this.$httpMessageState(response, '新增優惠券');
          this.getCoupons();
          this.$refs.couponModal.hideModal();
        });
      }
    },
    delCoupon() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;
      this.isLoading = true;
      this.$http.delete(url).then((response) =&gt; {
        console.log(response, this.tempCoupon);
        this.$httpMessageState(response, '刪除優惠券');
        const delComponent = this.$refs.delModal;
        delComponent.hideModal();
        this.getCoupons();
      });
    },
  },
  created() {
    this.getCoupons();
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/views/Orders.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;table class="table mt-4"&gt;
    &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;購買時間&lt;/th&gt;
      &lt;th&gt;Email&lt;/th&gt;
      &lt;th&gt;購買款項&lt;/th&gt;
      &lt;th&gt;應付金額&lt;/th&gt;
      &lt;th&gt;是否付款&lt;/th&gt;
      &lt;th&gt;編輯&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;template v-for="(item, key) in orders" :key="key"&gt;
        &lt;tr v-if="orders.length"
            :class="{'text-secondary': !item.is_paid}"&gt;
          &lt;td&gt;{{ $filters.date(item.create_at) }}&lt;/td&gt;
          &lt;td&gt;&lt;span v-text="item.user.email" v-if="item.user"&gt;&lt;/span&gt;&lt;/td&gt;
          &lt;td&gt;
            &lt;ul class="list-unstyled"&gt;
              &lt;li v-for="(product, i) in item.products" :key="i"&gt;
                {{ product.product.title }} 數量：{{ product.qty }}
                {{ product.product.unit }}
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/td&gt;
          &lt;td class="text-right"&gt;{{ $filters.currency(item.total) }}&lt;/td&gt;
          &lt;td&gt;
            &lt;div class="form-check form-switch"&gt;
              &lt;input class="form-check-input" type="checkbox" :id="`paidSwitch${item.id}`"
              v-model="item.is_paid"
              @change="updatePaid(item)"&gt;
              &lt;label class="form-check-label" :for="`paidSwitch${item.id}`"&gt;
                &lt;span v-if="item.is_paid"&gt;已付款&lt;/span&gt;
                &lt;span v-else&gt;未付款&lt;/span&gt;
              &lt;/label&gt;
            &lt;/div&gt;
          &lt;/td&gt;
          &lt;td&gt;
            &lt;div class="btn-group"&gt;
              &lt;button class="btn btn-outline-primary btn-sm"
                      @click="openModal(false, item)"&gt;檢視&lt;/button&gt;
              &lt;button class="btn btn-outline-danger btn-sm"
                      @click="openDelOrderModal(item)"
              &gt;刪除&lt;/button&gt;
            &lt;/div&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/template&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;OrderModal :order="tempOrder"
              ref="orderModal" @update-paid="updatePaid"&gt;&lt;/OrderModal&gt;
  &lt;DelModal :item="tempOrder" ref="delModal" @del-item="delOrder"&gt;&lt;/DelModal&gt;
  &lt;Pagination :pages="pagination" @emit-pages="getOrders"&gt;&lt;/Pagination&gt;
&lt;/template&gt;

&lt;script&gt;
import DelModal from '@/components/DelModal.vue';
import OrderModal from '@/components/OrderModal.vue';
import Pagination from '@/components/Pagination.vue';

export default {
  data() {
    return {
      orders: {},
      isNew: false,
      pagination: {},
      isLoading: false,
      tempOrder: {},
      currentPage: 1,
    };
  },
  components: {
    Pagination,
    DelModal,
    OrderModal,
  },
  methods: {
    getOrders(currentPage = 1) {
      this.currentPage = currentPage;
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=${currentPage}`;
      this.isLoading = true;
      this.$http.get(url, this.tempProduct).then((response) =&gt; {
        this.orders = response.data.orders;
        this.pagination = response.data.pagination;
        this.isLoading = false;
        console.log(response);
      });
    },
    openModal(isNew, item) {
      this.tempOrder = { ...item };
      this.isNew = false;
      const orderComponent = this.$refs.orderModal;
      orderComponent.showModal();
    },
    openDelOrderModal(item) {
      this.tempOrder = { ...item };
      const delComponent = this.$refs.delModal;
      delComponent.showModal();
    },
    updatePaid(item) {
      this.isLoading = true;
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${item.id}`;
      const paid = {
        is_paid: item.is_paid,
      };
      this.$http.put(api, { data: paid }).then((response) =&gt; {
        this.isLoading = false;
        this.getOrders(this.currentPage);
        this.$httpMessageState(response, '更新付款狀態');
      });
    },
    delOrder() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`;
      this.isLoading = true;
      this.$http.delete(url).then((response) =&gt; {
        console.log(response);
        const delComponent = this.$refs.delModal;
        delComponent.hideModal();
        this.getOrders(this.currentPage);
      });
    },
  },
  created() {
    this.getOrders();
    console.log(process.env.VUE_APP_API);
  },
};
&lt;/script&gt;
</code></pre>



<h4 class="wp-block-heading">練習</h4>



<ul class="wp-block-list">
<li>使用測試 Web API 應用程式 Postman、 Hoppscotch 建立優惠券和訂單</li>



<li>Vue3_API
<ul class="wp-block-list">
<li>POST 登入功能</li>



<li>POST 新增優惠券</li>



<li>GET 取得商品列表</li>



<li>POST 加入購物車</li>



<li>PUT 更新購物車</li>



<li>POST 結帳頁面</li>



<li>GET 取得訂單列表</li>
</ul>
</li>
</ul>



<h3 class="wp-block-heading">用戶端產品列表</h3>



<ol class="wp-block-list">
<li>製作客戶購物的部分<br>查看 API 文件 – 客戶購物 [免驗證]<br>購物流程: 取得商品列表、單一商品細節、加入購物車、刪除某一筆購物車資料、套用優惠券、結帳頁面、結帳付款…等</li>



<li>提醒: 點選任何一個產品的時候，請用單一頁面呈現</li>



<li>在 index.js 路由表加上用戶端路由<br>新增 user 路徑，不需要驗證流程會放在 user 路徑下</li>



<li>建立 Userboard.vue 檔案並加入程式碼<br>相較於 Dashboard 較簡單</li>



<li>建立 UserCart.vue 檔案並加入程式碼<br>在 user 路徑新增子路由 cart 路徑，對應的是購物車<br>建立 UserProduct.vue 檔案並加入程式碼<br>在 user 路徑新增子路由 product/:productId 路徑，對應的是單一產品頁面</li>



<li>講解 UserCart.vue 檔案<br>methods 方法的函式，getProducts() 取得商品列表、getProduct(id) 進入單一商品的頁面</li>



<li>試著把用戶端商品列表呈現</li>
</ol>



<pre class="wp-block-code"><code>// router/index.js
import { createRouter, createWebHashHistory } from 'vue-router';
import Home from '../views/Home.vue';

const routes = &#91;
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.&#91;hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
  {
    path: '/login',
    component: () =&gt; import('../views/Login.vue'),
  },
  {
    path: '/dashboard',
    component: () =&gt; import('../views/Dashboard.vue'),
    // 巢狀路由 - 產品列表
    children: &#91;
      {
        path: 'products',
        component: () =&gt; import('../views/Products.vue'),
      },
      {
        path: 'orders',
        component: () =&gt; import('../views/Orders.vue'),
      },
      {
        path: 'coupons',
        component: () =&gt; import('../views/Coupons.vue'),
      },
    ],
  },
  {
    path: '/user',
    component: () =&gt; import('../views/Userboard.vue'),
    children: &#91;
      {
        path: 'cart',
        component: () =&gt; import('../views/UserCart.vue'),
      },
      {
        path: 'product/:productId',
        component: () =&gt; import('@/views/UserProduct.vue'),
      },
    ],
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
  linkActiveClass: 'active',
});

export default router;
</code></pre>



<pre class="wp-block-code"><code>// views/Userboard.vue
&lt;template&gt;
  &lt;nav class="navbar navbar-expand-lg navbar-dark bg-dark"&gt;
    &lt;div class="container-fluid"&gt;
      &lt;router-link class="navbar-brand" to="/user/cart"&gt;購物趣&lt;/router-link&gt;
    &lt;/div&gt;
  &lt;/nav&gt;
  &lt;div class="container-fluid mt-3 position-relative"&gt;
    &lt;ToastMessages&gt;&lt;/ToastMessages&gt;
    &lt;router-view/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import emitter from '@/methods/emitter';
import ToastMessages from '@/components/ToastMessages.vue';

export default {
  components: {
    ToastMessages,
  },
  provide() {
    return {
      emitter,
    };
  },
  created() {
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// views/UserCart.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="container"&gt;
    &lt;div class="row mt-4"&gt;
      &lt;div class="col-md-7"&gt;
        &lt;table class="table align-middle"&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;圖片&lt;/th&gt;
              &lt;th&gt;商品名稱&lt;/th&gt;
              &lt;th&gt;價格&lt;/th&gt;
              &lt;th&gt;&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;tr v-for="item in products" :key="item.id"&gt;
              &lt;td style="width: 200px"&gt;
                &lt;div style="height: 100px; background-size: cover; background-position: center"
                :style="{backgroundImage: `url(${item.imageUrl})`}"&gt;&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;&lt;a href="#" class="text-dark"&gt;{{ item.title }}&lt;/a&gt;&lt;/td&gt;
              &lt;td&gt;
                &lt;div class="h5" v-if="!item.price"&gt;{{ item.origin_price }} 元&lt;/div&gt;
                &lt;del class="h6" v-if="item.price"&gt;原價 {{ item.origin_price }} 元&lt;/del&gt;
                &lt;div class="h5" v-if="item.price"&gt;現在只要 {{ item.price }} 元&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;
                &lt;div class="btn-group btn-group-sm"&gt;
                  &lt;button type="button" class="btn btn-outline-secondary"
                  @click="getProduct(item.id)"&gt;
                    查看更多
                  &lt;/button&gt;
                  &lt;button type="button" class="btn btn-outline-danger"&gt;
                    加到購物車
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
      &lt;!-- 購物車列表 --&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      products: &#91;],
      product: {},
      status: {
        loadingItem: '',
      },
    };
  },
  methods: {
    // 取得商品列表
    getProducts() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        this.products = response.data.products;
        console.log('products:', response);
        this.isLoading = false;
      });
    },
    // 進入單一商品頁面
    getProduct(id) {
      this.$router.push(`/user/product/${id}`);
    },
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// views/UserProduct.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="container"&gt;
    &lt;nav aria-label="breadcrumb"&gt;
      &lt;ol class="breadcrumb"&gt;
        &lt;li class="breadcrumb-item"&gt;&lt;router-link to="/user/cart"&gt;購物車&lt;/router-link&gt;&lt;/li&gt;
        &lt;li class="breadcrumb-item active" aria-current="page"&gt;{{ product.title }}&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/nav&gt;
    &lt;div class="row justify-content-center"&gt;
      &lt;article class="col-8"&gt;
        &lt;h2&gt;{{ product.title }}&lt;/h2&gt;
        &lt;div&gt;{{ product.content }}&lt;/div&gt;
        &lt;div&gt;{{ product.description }}&lt;/div&gt;
        &lt;img :src="product.imageUrl" alt="" class="img-fluid mb-3"&gt;
      &lt;/article&gt;
      &lt;div class="col-4"&gt;
        &lt;div class="h5" v-if="!product.price"&gt;{{ product.origin_price }} 元&lt;/div&gt;
        &lt;del class="h6" v-if="product.price"&gt;原價 {{ product.origin_price }} 元&lt;/del&gt;
        &lt;div class="h5" v-if="product.price"&gt;現在只要 {{ product.price }} 元&lt;/div&gt;
        &lt;hr&gt;
        &lt;button type="button" class="btn btn-outline-danger"
                @click="addToCart(product.id)"&gt;
          加到購物車
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      product: {},
      id: '',
    };
  },
  methods: {
    getProduct() {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;
      this.isLoading = true;
      this.$http.get(api).then((response) =&gt; {
        console.log(response.data);
        this.isLoading = false;
        if (response.data.success) {
          this.product = response.data.product;
        }
      });
    },
    addToCart(id, qty = 1) {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      const cart = {
        product_id: id,
        qty,
      };
      this.isLoading = true;
      this.$http.post(url, { data: cart }).then((response) =&gt; {
        this.isLoading = false;
        this.$httpMessageState(response, '加入購物車');
        this.$router.push('/user/cart');
      });
    },
  },
  created() {
    this.id = this.$route.params.productId;
    this.getProduct();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">用戶端加入購物車</h3>



<ol class="wp-block-list">
<li>撰寫加入購物車的行為 api</li>



<li>查看客戶購物 [免驗證] 文件 &gt; 加入購物車</li>



<li>在 UserCart.vue 檔案撰寫程式碼<br>使用 @click 方式觸發加入購物車事件、addCart 方法，把產品的 id 帶進來<br>在 JS methods 方法新增 addCart 方法，測試 id 有沒有正確的取出<br>載入 api、建立資料 product_id, qty、發送 api<br>資料參數格式有加入 data 屬性名稱</li>



<li>避免用戶重複點擊加入購物車，加入單一按鈕的讀取效果，當 loadingItem 為一個特定品項的時候按鈕會轉為 disabled 並加上讀取的狀態</li>



<li>調整 HTML 的部分加上<br>:disabled=”this.status.loadingItem === item.id”<br>這個屬性會因為 loadingItem 的品項跟當前 item.id 的品項相同的時候，就會把加入到購物車按鈕轉為 disabled 的狀態</li>



<li>針對點擊購物車後加上額外的讀取效果<br>在 Bootstrap 文件 &gt; Components &gt; Spinners，選擇放射狀的樣式加到程式碼，尺寸需要調整一下選擇最小的、調整色彩<br>當前品項加入判斷式，v-if=”this.status.loadingItem === item.id”<br>白色對比度不佳，轉換成紅色</li>



<li>用戶無法重複點擊，了解目前是讀取狀態<br>如何加入購物車、如何把特定的按鈕加上讀取的效果</li>



<li>試著加入購物車、特定頁面的加入購物車功能完成</li>
</ol>



<pre class="wp-block-code"><code>// views/UserCart.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="container"&gt;
    &lt;div class="row mt-4"&gt;
      &lt;div class="col-md-7"&gt;
        &lt;table class="table align-middle"&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;圖片&lt;/th&gt;
              &lt;th&gt;商品名稱&lt;/th&gt;
              &lt;th&gt;價格&lt;/th&gt;
              &lt;th&gt;&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;tr v-for="item in products" :key="item.id"&gt;
              &lt;td style="width: 200px"&gt;
                &lt;div style="height: 100px; background-size: cover; background-position: center"
                :style="{backgroundImage: `url(${item.imageUrl})`}"&gt;&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;&lt;a href="#" class="text-dark"&gt;{{ item.title }}&lt;/a&gt;&lt;/td&gt;
              &lt;td&gt;
                &lt;div class="h5" v-if="!item.price"&gt;{{ item.origin_price }} 元&lt;/div&gt;
                &lt;del class="h6" v-if="item.price"&gt;原價 {{ item.origin_price }} 元&lt;/del&gt;
                &lt;div class="h5" v-if="item.price"&gt;現在只要 {{ item.price }} 元&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;
                &lt;div class="btn-group btn-group-sm"&gt;
                  &lt;button type="button" class="btn btn-outline-secondary"
                  @click="getProduct(item.id)"&gt;
                    查看更多
                  &lt;/button&gt;
                  &lt;button type="button" class="btn btn-outline-danger"
                  @click="addCart(item.id)"
                  :disabled="this.status.loadingItem === item.id"&gt;
                    &lt;div v-if="this.status.loadingItem === item.id"
                    class="spinner-grow text-danger spinner-grow-sm" role="status"&gt;
                      &lt;span class="visually-hidden"&gt;Loading...&lt;/span&gt;
                    &lt;/div&gt;
                    加到購物車
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
      &lt;!-- 購物車列表 --&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      products: &#91;],
      product: {},
      // 讀取狀態
      status: {
        loadingItem: '', // 對應品項 id
      },
    };
  },
  methods: {
    // 取得商品列表
    getProducts() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        this.products = response.data.products;
        console.log('products:', response);
        this.isLoading = false;
      });
    },
    // 進入單一商品頁面
    getProduct(id) {
      this.$router.push(`/user/product/${id}`);
    },
    // 加入購物車
    addCart(id) {
      // 測試 id 有沒有正確取出
      // console.log(id);
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      this.status.loadingItem = id;
      const cart = {
        product_id: id,
        qty: 1,
      };
      this.$http.post(url, { data: cart })
        .then((res) =&gt; {
          this.status.loadingItem = '';
          console.log(res);
        });
    },
  },
  created() {
    this.getProducts();
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// views/UserProduct.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="container"&gt;
    &lt;nav aria-label="breadcrumb"&gt;
      &lt;ol class="breadcrumb"&gt;
        &lt;li class="breadcrumb-item"&gt;&lt;router-link to="/user/cart"&gt;購物車&lt;/router-link&gt;&lt;/li&gt;
        &lt;li class="breadcrumb-item active" aria-current="page"&gt;{{ product.title }}&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/nav&gt;
    &lt;div class="row justify-content-center"&gt;
      &lt;article class="col-8"&gt;
        &lt;h2&gt;{{ product.title }}&lt;/h2&gt;
        &lt;div&gt;{{ product.content }}&lt;/div&gt;
        &lt;div&gt;{{ product.description }}&lt;/div&gt;
        &lt;img :src="product.imageUrl" alt="" class="img-fluid mb-3"&gt;
      &lt;/article&gt;
      &lt;div class="col-4"&gt;
        &lt;div class="h5" v-if="!product.price"&gt;{{ product.origin_price }} 元&lt;/div&gt;
        &lt;del class="h6" v-if="product.price"&gt;原價 {{ product.origin_price }} 元&lt;/del&gt;
        &lt;div class="h5" v-if="product.price"&gt;現在只要 {{ product.price }} 元&lt;/div&gt;
        &lt;hr&gt;
        &lt;button type="button" class="btn btn-outline-danger"
                @click="addToCart(product.id)"&gt;
          加到購物車
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      product: {},
      id: '',
    };
  },
  methods: {
    getProduct() {
      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;
      this.isLoading = true;
      this.$http.get(api).then((response) =&gt; {
        console.log(response.data);
        this.isLoading = false;
        if (response.data.success) {
          this.product = response.data.product;
        }
      });
    },
    // 特定頁面加入購物車
    addToCart(id, qty = 1) {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      const cart = {
        product_id: id,
        qty,
      };
      this.isLoading = true;
      this.$http.post(url, { data: cart }).then((response) =&gt; {
        this.isLoading = false;
        this.$httpMessageState(response, '加入購物車');
        this.$router.push('/user/cart');
      });
    },
  },
  created() {
    this.id = this.$route.params.productId;
    this.getProduct();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">用戶端加入 Bootstrap Icon</h3>



<ol class="wp-block-list">
<li>製作購物車列表</li>



<li>提醒: api 細節，把購物車 api 打，會發現這邊的結構和先前的不太一樣，這裡是 data 裡面還有 data，主要是因為這個 data 裡面有兩個結構，一個是購物車的品項，加入非常多的項目都會存在這個 carts 裡面</li>



<li>在畫面的部分可以看到非常多的項目<br>在 Console 查詢顯示的資料， carts、final_total、total<br>carts、final_total, total 這兩個項目需要存下來，可以存在一個物件裡面，或者拆成兩個來另外做儲存，都是必要出現在畫面上的項目</li>



<li>在 UserCart.vue 檔案撰寫 getCart() 方法<br>this.cart = response.data.data 所有的項目都存起來，這個 cart 就包含陣列的列表以及總金額<br>在購物車列表就使用 v-if 判斷陣列有沒有存在，如果存在的情況下就使用 v-for 把陣列的內容完整的呈現</li>



<li>數量調整的功能尚未製作</li>



<li>使用 icon 的形式替換刪除中文字<br>在 Bootstrap 文件找到 Icons<br>安裝 Bootstrap Icons 套件<br>把 Bootstrap Icons 載入到 main.js 檔案<br>import ‘bootstrap-icons/font/bootstrap-icons.css’;<br>把 icons 圖示加入</li>
</ol>



<pre class="wp-block-code"><code>// views/UserCart.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="container"&gt;
    &lt;div class="row mt-4"&gt;
      &lt;div class="col-md-7"&gt;
        &lt;table class="table align-middle"&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;圖片&lt;/th&gt;
              &lt;th&gt;商品名稱&lt;/th&gt;
              &lt;th&gt;價格&lt;/th&gt;
              &lt;th&gt;&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;tr v-for="item in products" :key="item.id"&gt;
              &lt;td style="width: 200px"&gt;
                &lt;div style="height: 100px; background-size: cover; background-position: center"
                :style="{backgroundImage: `url(${item.imageUrl})`}"&gt;&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;&lt;a href="#" class="text-dark"&gt;{{ item.title }}&lt;/a&gt;&lt;/td&gt;
              &lt;td&gt;
                &lt;div class="h5" v-if="!item.price"&gt;{{ item.origin_price }} 元&lt;/div&gt;
                &lt;del class="h6" v-if="item.price"&gt;原價 {{ item.origin_price }} 元&lt;/del&gt;
                &lt;div class="h5" v-if="item.price"&gt;現在只要 {{ item.price }} 元&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;
                &lt;div class="btn-group btn-group-sm"&gt;
                  &lt;button type="button" class="btn btn-outline-secondary"
                  @click="getProduct(item.id)"&gt;
                    查看更多
                  &lt;/button&gt;
                  &lt;button type="button" class="btn btn-outline-danger"
                  @click="addCart(item.id)"
                  :disabled="this.status.loadingItem === item.id"&gt;
                    &lt;div v-if="this.status.loadingItem === item.id"
                    class="spinner-grow text-danger spinner-grow-sm" role="status"&gt;
                      &lt;span class="visually-hidden"&gt;Loading...&lt;/span&gt;
                    &lt;/div&gt;
                    加到購物車
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
      &lt;!-- 購物車列表 --&gt;
      &lt;div class="col-md-5"&gt;
        &lt;div class="sticky-top"&gt;
          &lt;table class="table align-middle"&gt;
            &lt;thead&gt;
              &lt;tr&gt;
                &lt;th&gt;&lt;/th&gt;
                &lt;th&gt;品名&lt;/th&gt;
                &lt;th style="width: 110px"&gt;數量&lt;/th&gt;
                &lt;th&gt;單價&lt;/th&gt;
              &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
            &lt;template v-if="cart.carts"&gt;
              &lt;tr v-for="item in cart.carts" :key="item.id"&gt;
                &lt;td&gt;
                  &lt;button type="button" class="btn btn-outline-danger btn-sm"
                  :disabled="status.loadingItem === item.id"
                  @click="removeCartItem(item.id)"&gt;
                    &lt;i class="bi bi-x"&gt;&lt;/i&gt;
                  &lt;/button&gt;
                &lt;/td&gt;
                &lt;td&gt;
                  {{ item.product.title }}
                  &lt;div class="text-success" v-if="item.coupon"&gt;
                    已套用優惠券
                  &lt;/div&gt;
                &lt;/td&gt;
                &lt;td&gt;
                  &lt;div class="input-group input-group-sm"&gt;
                    &lt;input type="number" class="form-control"
                          v-model.number="item.qty"&gt;
                    &lt;div class="input-group-text"&gt;/ {{ item.product.unit }}&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/td&gt;
                &lt;td class="text-end"&gt;
                  &lt;small v-if="cart.final_total !== cart.total" class="text-success"&gt;折扣價：&lt;/small&gt;
                  {{ $filters.currency(item.final_total) }}
                &lt;/td&gt;
              &lt;/tr&gt;
            &lt;/template&gt;
            &lt;/tbody&gt;
            &lt;tfoot&gt;
            &lt;tr&gt;
              &lt;td colspan="3" class="text-end"&gt;總計&lt;/td&gt;
              &lt;td class="text-end"&gt;{{ $filters.currency(cart.total) }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr v-if="cart.final_total !== cart.total"&gt;
              &lt;td colspan="3" class="text-end text-success"&gt;折扣價&lt;/td&gt;
              &lt;td class="text-end text-success"&gt;{{ $filters.currency(cart.final_total) }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;/tfoot&gt;
          &lt;/table&gt;
          &lt;div class="input-group mb-3 input-group-sm"&gt;
            &lt;input type="text" class="form-control" v-model="coupon_code" placeholder="請輸入優惠碼"&gt;
            &lt;div class="input-group-append"&gt;
              &lt;button class="btn btn-outline-secondary" type="button" @click="addCouponCode"&gt;
                套用優惠碼
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      products: &#91;],
      product: {},
      // 讀取狀態
      status: {
        loadingItem: '', // 對應品項 id
      },
      cart: {},
      coupon_code: '',
    };
  },
  methods: {
    // 取得商品列表
    getProducts() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        this.products = response.data.products;
        console.log('products:', response);
        this.isLoading = false;
      });
    },
    // 進入單一商品頁面
    getProduct(id) {
      this.$router.push(`/user/product/${id}`);
    },
    // 加入購物車
    addCart(id) {
      // 測試 id 有沒有正確取出
      // console.log(id);
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      this.status.loadingItem = id;
      const cart = {
        product_id: id,
        qty: 1,
      };
      this.$http.post(url, { data: cart })
        .then((res) =&gt; {
          this.status.loadingItem = '';
          console.log(res);
        });
    },
    // 取得購物車列表
    getCart() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        console.log(response);
        this.cart = response.data.data;
        this.isLoading = false;
      });
    },
  },
  created() {
    this.getProducts();
    this.getCart();
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/main.js
import { createApp } from 'vue';
import axios from 'axios';
import VueAxios from 'vue-axios';
import Loading from 'vue3-loading-overlay';
import 'vue3-loading-overlay/dist/vue3-loading-overlay.css';
import 'bootstrap-icons/font/bootstrap-icons.css';

import App from './App.vue';
import router from './router';
import { currency, date } from './methods/filters';
import $httpMessageState from './methods/pushMessageState';

const app = createApp(App);
app.config.globalProperties.$filters = {
  currency,
  date,
};
// 此函式的用途是整合 AJAX 的錯誤事件，統一整理發送給予 Toast 處理
app.config.globalProperties.$httpMessageState = $httpMessageState;

app.use(VueAxios, axios);
app.use(router);
app.component('Loading', Loading);
app.mount('#app');
</code></pre>



<h3 class="wp-block-heading">用戶端更新購物車數量品項</h3>



<ol class="wp-block-list">
<li>看資料的部分<br>使用 Vue.js devtools 查看元件裡面的資料，購物車品項<br>&lt;RouterView&gt; &gt; &lt;UserCart&gt;</li>



<li>在 UserCart.vue 檔案<br>可以看到 v-model.number=”item.qty”，item 指的是 product 品項，目前品項可以透過 input 來調整數量多寡，Vue.js devtools 的 qty 也會跟著做調整，目前 input 已經跟資料綁上</li>



<li>現在有個問題是調整數量的時候，是可以變為 0 或者負值的，要避免變成負值，送出才不會產生問題，在 input 必須加上最小值 min = 1，避免用戶將值調成低於 0 的狀態</li>



<li>看購物車的數量，當調整數量的時候，qty 數值是會跟著做改變，但是價格是不會跟著做改變，主要是因為價格是由後端所計算出，因此必須調整後端的購物車品項的數量，才會回傳新的價格</li>



<li>查看 API 文件更新購物車的部分，更新購物車 api 跟加入購物車很像，在更新購物車會加入購物車的 id，單一品項的 id，所傳遞的參數內容和加入購物車是一樣的</li>



<li>在 Vue.js devtools 購物車裡面有 id、產品的 id，這個 id 就是在購物車裡面單一品項的 id，另一個是產品的 id，因此必須把這兩個資訊傳到後端，才能計算新的金額</li>



<li>在程式碼數量的地方加上事件，使用 change 方法觸發更新購物車 @change=”updateCart()”，因為要傳送相關的資訊，購物車的品項 id 以及產品 id，在這個地方把 item 帶進來</li>



<li>在 JS 部分撰寫 updateCart() 方法<br>加上 api 路徑、api 方法，會使用 put 方法<br>組裝要傳遞的資訊，透過物件方式來進行傳遞<br>使用 console 測試內容有沒有確實更新，在更新購物車項目之後，可以再重新取得完整購物車的內容</li>



<li>避免用戶重複點擊，加上讀取的效果<br>this.status.loadingItem = item.id; 然後更新後清空<br>在 HTML 部分加上 :disabled=”item.id === status.loadingItem”</li>
</ol>



<pre class="wp-block-code"><code>// views/UserCart.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="container"&gt;
    &lt;div class="row mt-4"&gt;
      &lt;div class="col-md-7"&gt;
        &lt;table class="table align-middle"&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;圖片&lt;/th&gt;
              &lt;th&gt;商品名稱&lt;/th&gt;
              &lt;th&gt;價格&lt;/th&gt;
              &lt;th&gt;&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;tr v-for="item in products" :key="item.id"&gt;
              &lt;td style="width: 200px"&gt;
                &lt;div style="height: 100px; background-size: cover; background-position: center"
                :style="{backgroundImage: `url(${item.imageUrl})`}"&gt;&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;&lt;a href="#" class="text-dark"&gt;{{ item.title }}&lt;/a&gt;&lt;/td&gt;
              &lt;td&gt;
                &lt;div class="h5" v-if="!item.price"&gt;{{ item.origin_price }} 元&lt;/div&gt;
                &lt;del class="h6" v-if="item.price"&gt;原價 {{ item.origin_price }} 元&lt;/del&gt;
                &lt;div class="h5" v-if="item.price"&gt;現在只要 {{ item.price }} 元&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;
                &lt;div class="btn-group btn-group-sm"&gt;
                  &lt;button type="button" class="btn btn-outline-secondary"
                  @click="getProduct(item.id)"&gt;
                    查看更多
                  &lt;/button&gt;
                  &lt;button type="button" class="btn btn-outline-danger"
                  @click="addCart(item.id)"
                  :disabled="this.status.loadingItem === item.id"&gt;
                    &lt;div v-if="this.status.loadingItem === item.id"
                    class="spinner-grow text-danger spinner-grow-sm" role="status"&gt;
                      &lt;span class="visually-hidden"&gt;Loading...&lt;/span&gt;
                    &lt;/div&gt;
                    加到購物車
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
      &lt;!-- 購物車列表 --&gt;
      &lt;div class="col-md-5"&gt;
        &lt;div class="sticky-top"&gt;
          &lt;table class="table align-middle"&gt;
            &lt;thead&gt;
              &lt;tr&gt;
                &lt;th&gt;&lt;/th&gt;
                &lt;th&gt;品名&lt;/th&gt;
                &lt;th style="width: 110px"&gt;數量&lt;/th&gt;
                &lt;th&gt;單價&lt;/th&gt;
              &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
            &lt;template v-if="cart.carts"&gt;
              &lt;tr v-for="item in cart.carts" :key="item.id"&gt;
                &lt;td&gt;
                  &lt;button type="button" class="btn btn-outline-danger btn-sm"
                  :disabled="status.loadingItem === item.id"
                  @click="removeCartItem(item.id)"&gt;
                    &lt;i class="bi bi-x"&gt;&lt;/i&gt;
                  &lt;/button&gt;
                &lt;/td&gt;
                &lt;td&gt;
                  {{ item.product.title }}
                  &lt;div class="text-success" v-if="item.coupon"&gt;
                    已套用優惠券
                  &lt;/div&gt;
                &lt;/td&gt;
                &lt;td&gt;
                  &lt;div class="input-group input-group-sm"&gt;
                    &lt;input type="number" class="form-control"
                    min="1"
                    :disabled="item.id === status.loadingItem"
                    @change="updateCart(item)"
                    v-model.number="item.qty"&gt;
                    &lt;div class="input-group-text"&gt;/ {{ item.product.unit }}&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/td&gt;
                &lt;td class="text-end"&gt;
                  &lt;small v-if="cart.final_total !== cart.total" class="text-success"&gt;折扣價：&lt;/small&gt;
                  {{ $filters.currency(item.final_total) }}
                &lt;/td&gt;
              &lt;/tr&gt;
            &lt;/template&gt;
            &lt;/tbody&gt;
            &lt;tfoot&gt;
            &lt;tr&gt;
              &lt;td colspan="3" class="text-end"&gt;總計&lt;/td&gt;
              &lt;td class="text-end"&gt;{{ $filters.currency(cart.total) }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr v-if="cart.final_total !== cart.total"&gt;
              &lt;td colspan="3" class="text-end text-success"&gt;折扣價&lt;/td&gt;
              &lt;td class="text-end text-success"&gt;{{ $filters.currency(cart.final_total) }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;/tfoot&gt;
          &lt;/table&gt;
          &lt;div class="input-group mb-3 input-group-sm"&gt;
            &lt;input type="text" class="form-control" v-model="coupon_code" placeholder="請輸入優惠碼"&gt;
            &lt;div class="input-group-append"&gt;
              &lt;button class="btn btn-outline-secondary" type="button" @click="addCouponCode"&gt;
                套用優惠碼
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      products: &#91;],
      product: {},
      // 讀取狀態
      status: {
        loadingItem: '', // 對應品項 id
      },
      cart: {},
      coupon_code: '',
    };
  },
  methods: {
    // 取得商品列表
    getProducts() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        this.products = response.data.products;
        console.log('products:', response);
        this.isLoading = false;
      });
    },
    // 進入單一商品頁面
    getProduct(id) {
      this.$router.push(`/user/product/${id}`);
    },
    // 加入購物車
    addCart(id) {
      // 測試 id 有沒有正確取出
      // console.log(id);
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      this.status.loadingItem = id;
      const cart = {
        product_id: id,
        qty: 1,
      };
      this.$http.post(url, { data: cart })
        .then((res) =&gt; {
          this.status.loadingItem = '';
          console.log(res);
        });
    },
    // 取得購物車列表
    getCart() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        console.log(response);
        this.cart = response.data.data;
        this.isLoading = false;
      });
    },
    // 更新購物車
    updateCart(item) {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;
      this.isLoading = true;
      // 讀取效果
      this.status.loadingItem = item.id;
      // 傳遞的資訊
      const cart = {
        product_id: item.product_id,
        qty: item.qty,
      };
      this.$http.put(url, { data: cart }).then((res) =&gt; {
        console.log(res);
        this.status.loadingItem = '';
        this.getCart();
      });
    },
  },
  created() {
    this.getProducts();
    this.getCart();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">用戶端套用優惠券</h3>



<ol class="wp-block-list">
<li>要使用優惠券的功能務必先把優惠券的後台完成，才可以套用優惠券的功能<br>至少先新增一個優惠券<br>優惠券名稱、到期日、是否啟用、折扣百分比會直接套用在購物車內的所有的品項</li>



<li>在購物車列表 console 看一下關於購物車的內容<br>購物車品項有兩個價格 total、final_total，實際上套用優惠券會把 final_total 金額重新計算，再加總到最終的總金額，品項最終會套用到 final_total 裡面重新運算</li>



<li>以範例講解套用優惠券試試，看一下重新取得的列表內容，cart 所更新的購物車內容 final_total 的金額成功打折，另外把優惠券相關內容加入進來，品項最終會用打折後的價格方式進行計算</li>



<li>試著完成優惠券功能<br>套用優惠券按鈕加上 addCouponCode 方法，在程式碼把 addCouponCode() 方法加入<br>查看 API 文件套用優惠券 api，會發送 data 內容，data 裡面有一個 code 的屬性就是優惠券的名稱，優惠券名稱放在這個地方送出就可以了<br>api 路徑、建立資料結構、this.$http.post 方法把 url 以及 coupon 內容帶進來，包在 data 的屬性下並且把上面的 coupon 帶進來，加上 then 回傳結果，然後重新取得購物車內容，把金額更新</li>



<li>加入購物車，重新整理後購物車列表就會新增一個品項<br>套用優惠券，查看 console、折扣相關訊息呈現在畫面</li>



<li>製作 Coupon 也可以把讀取的效果還有相關的回應加上</li>



<li>試著製作刪除的功能</li>
</ol>



<pre class="wp-block-code"><code>// views/UserCart.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="container"&gt;
    &lt;div class="row mt-4"&gt;
      &lt;div class="col-md-7"&gt;
        &lt;table class="table align-middle"&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;圖片&lt;/th&gt;
              &lt;th&gt;商品名稱&lt;/th&gt;
              &lt;th&gt;價格&lt;/th&gt;
              &lt;th&gt;&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;tr v-for="item in products" :key="item.id"&gt;
              &lt;td style="width: 200px"&gt;
                &lt;div style="height: 100px; background-size: cover; background-position: center"
                :style="{backgroundImage: `url(${item.imageUrl})`}"&gt;&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;&lt;a href="#" class="text-dark"&gt;{{ item.title }}&lt;/a&gt;&lt;/td&gt;
              &lt;td&gt;
                &lt;div class="h5" v-if="!item.price"&gt;{{ item.origin_price }} 元&lt;/div&gt;
                &lt;del class="h6" v-if="item.price"&gt;原價 {{ item.origin_price }} 元&lt;/del&gt;
                &lt;div class="h5" v-if="item.price"&gt;現在只要 {{ item.price }} 元&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;
                &lt;div class="btn-group btn-group-sm"&gt;
                  &lt;button type="button" class="btn btn-outline-secondary"
                  @click="getProduct(item.id)"&gt;
                    查看更多
                  &lt;/button&gt;
                  &lt;button type="button" class="btn btn-outline-danger"
                  @click="addCart(item.id)"
                  :disabled="this.status.loadingItem === item.id"&gt;
                    &lt;div v-if="this.status.loadingItem === item.id"
                    class="spinner-grow text-danger spinner-grow-sm" role="status"&gt;
                      &lt;span class="visually-hidden"&gt;Loading...&lt;/span&gt;
                    &lt;/div&gt;
                    加到購物車
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
      &lt;!-- 購物車列表 --&gt;
      &lt;div class="col-md-5"&gt;
        &lt;div class="sticky-top"&gt;
          &lt;table class="table align-middle"&gt;
            &lt;thead&gt;
              &lt;tr&gt;
                &lt;th&gt;&lt;/th&gt;
                &lt;th&gt;品名&lt;/th&gt;
                &lt;th style="width: 110px"&gt;數量&lt;/th&gt;
                &lt;th&gt;單價&lt;/th&gt;
              &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
            &lt;template v-if="cart.carts"&gt;
              &lt;tr v-for="item in cart.carts" :key="item.id"&gt;
                &lt;td&gt;
                  &lt;button type="button" class="btn btn-outline-danger btn-sm"
                  :disabled="status.loadingItem === item.id"
                  @click="removeCartItem(item.id)"&gt;
                    &lt;i class="bi bi-x"&gt;&lt;/i&gt;
                  &lt;/button&gt;
                &lt;/td&gt;
                &lt;td&gt;
                  {{ item.product.title }}
                  &lt;div class="text-success" v-if="item.coupon"&gt;
                    已套用優惠券
                  &lt;/div&gt;
                &lt;/td&gt;
                &lt;td&gt;
                  &lt;div class="input-group input-group-sm"&gt;
                    &lt;input type="number" class="form-control"
                    min="1"
                    :disabled="item.id === status.loadingItem"
                    @change="updateCart(item)"
                    v-model.number="item.qty"&gt;
                    &lt;div class="input-group-text"&gt;/ {{ item.product.unit }}&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/td&gt;
                &lt;td class="text-end"&gt;
                  &lt;small v-if="cart.final_total !== cart.total" class="text-success"&gt;折扣價：&lt;/small&gt;
                  {{ $filters.currency(item.final_total) }}
                &lt;/td&gt;
              &lt;/tr&gt;
            &lt;/template&gt;
            &lt;/tbody&gt;
            &lt;tfoot&gt;
            &lt;tr&gt;
              &lt;td colspan="3" class="text-end"&gt;總計&lt;/td&gt;
              &lt;td class="text-end"&gt;{{ $filters.currency(cart.total) }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr v-if="cart.final_total !== cart.total"&gt;
              &lt;td colspan="3" class="text-end text-success"&gt;折扣價&lt;/td&gt;
              &lt;td class="text-end text-success"&gt;{{ $filters.currency(cart.final_total) }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;/tfoot&gt;
          &lt;/table&gt;
          &lt;div class="input-group mb-3 input-group-sm"&gt;
            &lt;input type="text" class="form-control" v-model="coupon_code" placeholder="請輸入優惠碼"&gt;
            &lt;div class="input-group-append"&gt;
              &lt;button class="btn btn-outline-secondary" type="button" @click="addCouponCode"&gt;
                套用優惠碼
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      products: &#91;],
      product: {},
      // 讀取狀態
      status: {
        loadingItem: '', // 對應品項 id
      },
      cart: {},
      coupon_code: '',
    };
  },
  methods: {
    // 取得商品列表
    getProducts() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        this.products = response.data.products;
        console.log('products:', response);
        this.isLoading = false;
      });
    },
    // 進入單一商品頁面
    getProduct(id) {
      this.$router.push(`/user/product/${id}`);
    },
    // 加入購物車
    addCart(id) {
      // 測試 id 有沒有正確取出
      // console.log(id);
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      this.status.loadingItem = id;
      const cart = {
        product_id: id,
        qty: 1,
      };
      this.$http.post(url, { data: cart })
        .then((res) =&gt; {
          this.status.loadingItem = '';
          console.log(res);
          // 重新取得購物車列表
          this.getCart();
        });
    },
    // 取得購物車列表
    getCart() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        console.log(response);
        this.cart = response.data.data;
        this.isLoading = false;
      });
    },
    // 刪除購物車品項
    removeCartItem(id) {
      this.status.loadingItem = id;
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;
      this.isLoading = true;
      this.$http.delete(url).then((response) =&gt; {
        this.$httpMessageState(response, '移除購物車品項');
        this.status.loadingItem = '';
        this.getCart();
        this.isLoading = false;
      });
    },
    // 更新購物車
    updateCart(item) {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;
      this.isLoading = true;
      // 讀取效果
      this.status.loadingItem = item.id;
      // 傳遞的資訊
      const cart = {
        product_id: item.product_id,
        qty: item.qty,
      };
      this.$http.put(url, { data: cart }).then((res) =&gt; {
        console.log(res);
        this.status.loadingItem = '';
        this.getCart();
      });
    },
    // 套用優惠碼
    addCouponCode() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;
      // 建立資料結構
      const coupon = {
        code: this.coupon_code,
      };
      // 讀取效果
      this.isLoading = true;
      this.$http.post(url, { data: coupon })
        .then((res) =&gt; {
          console.log(res);
          this.getCart();
          this.isLoading = false;
        });
    },
  },
  created() {
    this.getProducts();
    this.getCart();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">用戶端建立訂單</h3>



<ol class="wp-block-list">
<li>購物車已經有部分的品項</li>



<li>製作結帳的部分</li>



<li>建立結帳表單結構</li>



<li>安裝、套用 VeeValidate<br>npm i vee-validate @vee-validate/rules @vee-validate/i18n –save<br>注意: import * as AllRules from ‘@vee-validate/rules’;</li>



<li>查看購物車 api 的部分，使用結帳頁面的 api<br>結帳頁面 [參數] – data、message，建立表單的時候結構要注意</li>



<li>在 UserCart.vue 檔案建立結構是使用 form 物件包著 user 以及 message 區塊</li>



<li>建立訂單在 &lt;Form&gt; 標籤加上 @submit 行為觸發強制驗證，使用 createOrder 方法<br>在程式碼 methods 方法加上 createOrder 方法，把 createOrder 加到 message 裡面，把 @submit 加在 &lt;Form&gt; 標籤上的好處是當送出表單的時候會強制先進行驗證，除非內容都符合資格，否則表但不會送出<br>在 createOrder 可以先把 api 的網址建立起來<br>建立表單的結構<br>使用 this.$http.post 方法，帶上 url 路徑、使用物件把 data 屬性帶上 order 的方式把表單內容送出<br>使用 console 查看回應有沒有正確</li>



<li>送出訂單要先確定購物車裡面是有品項，再把下面的內容填寫，送出表單查看回應的結果</li>
</ol>



<pre class="wp-block-code"><code>// src/main.js
import { createApp } from 'vue';
import axios from 'axios';
import VueAxios from 'vue-axios';
import Loading from 'vue3-loading-overlay';
import 'vue3-loading-overlay/dist/vue3-loading-overlay.css';
import 'bootstrap-icons/font/bootstrap-icons.css';
import {
  Form, Field, ErrorMessage, defineRule, configure,
} from 'vee-validate';
// import AllRules from '@vee-validate/rules'; // 會產生錯誤
import * as AllRules from '@vee-validate/rules';
import { localize, setLocale } from '@vee-validate/i18n';
import zhTW from '@vee-validate/i18n/dist/locale/zh_TW.json';

import App from './App.vue';
import router from './router';
import { currency, date } from './methods/filters';
import $httpMessageState from './methods/pushMessageState';

const app = createApp(App);
app.config.globalProperties.$filters = {
  currency,
  date,
};

Object.keys(AllRules).forEach((rule) =&gt; {
  defineRule(rule, AllRules&#91;rule]);
});

configure({
  generateMessage: localize({ zh_TW: zhTW }), // 載入繁體中文語系
  validateOnInput: true, // 當輸入任何內容直接進行驗證
});
// 設定預設語系
setLocale('zh_TW');

// 此函式的用途是整合 AJAX 的錯誤事件，統一整理發送給予 Toast 處理
app.config.globalProperties.$httpMessageState = $httpMessageState;

app.use(VueAxios, axios);
app.use(router);
app.component('Loading', Loading);
app.component('Form', Form);
app.component('Field', Field);
app.component('ErrorMessage', ErrorMessage);
app.mount('#app');
</code></pre>



<pre class="wp-block-code"><code>// views/UserCart.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="container"&gt;
    &lt;div class="row mt-4"&gt;
      &lt;div class="col-md-7"&gt;
        &lt;table class="table align-middle"&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;圖片&lt;/th&gt;
              &lt;th&gt;商品名稱&lt;/th&gt;
              &lt;th&gt;價格&lt;/th&gt;
              &lt;th&gt;&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;tr v-for="item in products" :key="item.id"&gt;
              &lt;td style="width: 200px"&gt;
                &lt;div style="height: 100px; background-size: cover; background-position: center"
                :style="{backgroundImage: `url(${item.imageUrl})`}"&gt;&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;&lt;a href="#" class="text-dark"&gt;{{ item.title }}&lt;/a&gt;&lt;/td&gt;
              &lt;td&gt;
                &lt;div class="h5" v-if="!item.price"&gt;{{ item.origin_price }} 元&lt;/div&gt;
                &lt;del class="h6" v-if="item.price"&gt;原價 {{ item.origin_price }} 元&lt;/del&gt;
                &lt;div class="h5" v-if="item.price"&gt;現在只要 {{ item.price }} 元&lt;/div&gt;
              &lt;/td&gt;
              &lt;td&gt;
                &lt;div class="btn-group btn-group-sm"&gt;
                  &lt;button type="button" class="btn btn-outline-secondary"
                  @click="getProduct(item.id)"&gt;
                    查看更多
                  &lt;/button&gt;
                  &lt;button type="button" class="btn btn-outline-danger"
                  @click="addCart(item.id)"
                  :disabled="this.status.loadingItem === item.id"&gt;
                    &lt;div v-if="this.status.loadingItem === item.id"
                    class="spinner-grow text-danger spinner-grow-sm" role="status"&gt;
                      &lt;span class="visually-hidden"&gt;Loading...&lt;/span&gt;
                    &lt;/div&gt;
                    加到購物車
                  &lt;/button&gt;
                &lt;/div&gt;
              &lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/div&gt;
      &lt;!-- 購物車列表 --&gt;
      &lt;div class="col-md-5"&gt;
        &lt;div class="sticky-top"&gt;
          &lt;table class="table align-middle"&gt;
            &lt;thead&gt;
              &lt;tr&gt;
                &lt;th&gt;&lt;/th&gt;
                &lt;th&gt;品名&lt;/th&gt;
                &lt;th style="width: 110px"&gt;數量&lt;/th&gt;
                &lt;th&gt;單價&lt;/th&gt;
              &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
            &lt;template v-if="cart.carts"&gt;
              &lt;tr v-for="item in cart.carts" :key="item.id"&gt;
                &lt;td&gt;
                  &lt;button type="button" class="btn btn-outline-danger btn-sm"
                  :disabled="status.loadingItem === item.id"
                  @click="removeCartItem(item.id)"&gt;
                    &lt;i class="bi bi-x"&gt;&lt;/i&gt;
                  &lt;/button&gt;
                &lt;/td&gt;
                &lt;td&gt;
                  {{ item.product.title }}
                  &lt;div class="text-success" v-if="item.coupon"&gt;
                    已套用優惠券
                  &lt;/div&gt;
                &lt;/td&gt;
                &lt;td&gt;
                  &lt;div class="input-group input-group-sm"&gt;
                    &lt;input type="number" class="form-control"
                    min="1"
                    :disabled="item.id === status.loadingItem"
                    @change="updateCart(item)"
                    v-model.number="item.qty"&gt;
                    &lt;div class="input-group-text"&gt;/ {{ item.product.unit }}&lt;/div&gt;
                  &lt;/div&gt;
                &lt;/td&gt;
                &lt;td class="text-end"&gt;
                  &lt;small v-if="cart.final_total !== cart.total" class="text-success"&gt;折扣價：&lt;/small&gt;
                  {{ $filters.currency(item.final_total) }}
                &lt;/td&gt;
              &lt;/tr&gt;
            &lt;/template&gt;
            &lt;/tbody&gt;
            &lt;tfoot&gt;
            &lt;tr&gt;
              &lt;td colspan="3" class="text-end"&gt;總計&lt;/td&gt;
              &lt;td class="text-end"&gt;{{ $filters.currency(cart.total) }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr v-if="cart.final_total !== cart.total"&gt;
              &lt;td colspan="3" class="text-end text-success"&gt;折扣價&lt;/td&gt;
              &lt;td class="text-end text-success"&gt;{{ $filters.currency(cart.final_total) }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;/tfoot&gt;
          &lt;/table&gt;
          &lt;div class="input-group mb-3 input-group-sm"&gt;
            &lt;input type="text" class="form-control" v-model="coupon_code" placeholder="請輸入優惠碼"&gt;
            &lt;div class="input-group-append"&gt;
              &lt;button class="btn btn-outline-secondary" type="button" @click="addCouponCode"&gt;
                套用優惠碼
              &lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- 用戶端訂單 --&gt;
    &lt;div class="my-5 row justify-content-center"&gt;
      &lt;Form class="col-md-6" v-slot="{ errors }"
            @submit="createOrder"&gt;
        &lt;div class="mb-3"&gt;
          &lt;label for="email" class="form-label"&gt;Email&lt;/label&gt;
          &lt;Field id="email" name="email" type="email" class="form-control"
          :class="{ 'is-invalid': errors&#91;'email'] }"
          placeholder="請輸入 Email" rules="email|required"
          v-model="form.user.email"&gt;&lt;/Field&gt;
          &lt;ErrorMessage name="email" class="invalid-feedback"&gt;&lt;/ErrorMessage&gt;
        &lt;/div&gt;

        &lt;div class="mb-3"&gt;
          &lt;label for="name" class="form-label"&gt;收件人姓名&lt;/label&gt;
          &lt;Field id="name" name="姓名" type="text" class="form-control"
          :class="{ 'is-invalid': errors&#91;'姓名'] }"
          placeholder="請輸入姓名" rules="required"
          v-model="form.user.name"&gt;&lt;/Field&gt;
          &lt;ErrorMessage name="姓名" class="invalid-feedback"&gt;&lt;/ErrorMessage&gt;
        &lt;/div&gt;

        &lt;div class="mb-3"&gt;
          &lt;label for="tel" class="form-label"&gt;收件人電話&lt;/label&gt;
          &lt;Field id="tel" name="電話" type="tel" class="form-control"
          :class="{ 'is-invalid': errors&#91;'電話'] }"
          placeholder="請輸入電話" rules="required"
          v-model="form.user.tel"&gt;&lt;/Field&gt;
          &lt;ErrorMessage name="電話" class="invalid-feedback"&gt;&lt;/ErrorMessage&gt;
        &lt;/div&gt;

        &lt;div class="mb-3"&gt;
          &lt;label for="address" class="form-label"&gt;收件人地址&lt;/label&gt;
          &lt;Field id="address" name="地址" type="text" class="form-control"
          :class="{ 'is-invalid': errors&#91;'地址'] }"
          placeholder="請輸入地址" rules="required"
          v-model="form.user.address"&gt;&lt;/Field&gt;
          &lt;ErrorMessage name="地址" class="invalid-feedback"&gt;&lt;/ErrorMessage&gt;
        &lt;/div&gt;

        &lt;div class="mb-3"&gt;
          &lt;label for="message" class="form-label"&gt;留言&lt;/label&gt;
          &lt;textarea name="" id="message" class="form-control" cols="30" rows="10"
                    v-model="form.message"&gt;&lt;/textarea&gt;
        &lt;/div&gt;
        &lt;div class="text-end"&gt;
          &lt;button class="btn btn-danger"&gt;送出訂單&lt;/button&gt;
        &lt;/div&gt;
      &lt;/Form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      products: &#91;],
      product: {},
      // 讀取狀態
      status: {
        loadingItem: '', // 對應品項 id
      },
      cart: {},
      coupon_code: '',
      // 用戶端訂單
      form: {
        user: {
          name: '',
          email: '',
          tel: '',
          address: '',
        },
        message: '',
      },
    };
  },
  methods: {
    // 取得商品列表
    getProducts() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        this.products = response.data.products;
        console.log('products:', response);
        this.isLoading = false;
      });
    },
    // 進入單一商品頁面
    getProduct(id) {
      this.$router.push(`/user/product/${id}`);
    },
    // 加入購物車
    addCart(id) {
      // 測試 id 有沒有正確取出
      // console.log(id);
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      this.status.loadingItem = id;
      const cart = {
        product_id: id,
        qty: 1,
      };
      this.$http.post(url, { data: cart })
        .then((res) =&gt; {
          this.status.loadingItem = '';
          console.log(res);
          // 重新取得購物車列表
          this.getCart();
        });
    },
    // 取得購物車列表
    getCart() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;
      this.isLoading = true;
      this.$http.get(url).then((response) =&gt; {
        console.log(response);
        this.cart = response.data.data;
        this.isLoading = false;
      });
    },
    // 刪除購物車品項
    removeCartItem(id) {
      this.status.loadingItem = id;
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;
      this.isLoading = true;
      this.$http.delete(url).then((response) =&gt; {
        this.$httpMessageState(response, '移除購物車品項');
        this.status.loadingItem = '';
        this.getCart();
        this.isLoading = false;
      });
    },
    // 更新購物車
    updateCart(item) {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;
      this.isLoading = true;
      // 讀取效果
      this.status.loadingItem = item.id;
      // 傳遞的資訊
      const cart = {
        product_id: item.product_id,
        qty: item.qty,
      };
      this.$http.put(url, { data: cart }).then((res) =&gt; {
        console.log(res);
        this.status.loadingItem = '';
        this.getCart();
      });
    },
    // 套用優惠碼
    addCouponCode() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;
      // 建立資料結構
      const coupon = {
        code: this.coupon_code,
      };
      // 讀取效果
      this.isLoading = true;
      this.$http.post(url, { data: coupon })
        .then((res) =&gt; {
          console.log(res);
          this.getCart();
          this.isLoading = false;
        });
    },
    // 建立訂單
    createOrder() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;
      const order = this.form;
      this.$http.post(url, { data: order })
        .then((res) =&gt; {
          console.log(res);
        });
    },
  },
  created() {
    this.getProducts();
    this.getCart();
  },
};
&lt;/script&gt;
</code></pre>



<h3 class="wp-block-heading">用戶端結帳流程</h3>



<ol class="wp-block-list">
<li>建立新的一筆訂單，並填好用戶表端資料，預期在送出訂單之後會產一個 orderId，複製 orderId 的值等下使用，送出訂單之後預期會轉只到另外一個頁面，checkout 路由下的頁面，讓用戶確認產品還有表單內容是否正確，再進行結帳的流程，現在的流程是必須先把 checkout 加上再讓用戶進行結帳</li>



<li>新增 UserCheckout.vue 檔案撰寫程式碼<br>完成 checkout 頁面，上方是產品的內容，在購物車裡面的品項，下方是用戶自己所填的細節，會透過 orderId 把資訊取回來</li>



<li>著重在 JS 的部分</li>



<li>在 index.js 檔案加上子路由 checkout/:orderId，orderId 作用是取回原本同一筆訂單使用的</li>



<li>直接使用網址路徑進入用戶端結帳頁面<br>查看 API 文件取得某一筆訂單，透過 orderId 取得相同一筆訂單內容<br>必須先把路由上面的 id 取出來，在 data() 資料定義 orderId，在 created() 生命週期撰寫 this.orderId = this.$route.params.orderId 把 orderId 取出<br>使用 console 查看，orderId 是從網址列所取得<br>加上 this.getOrder() 方法，會觸發 methods 裡面的 getOrder()，會透過 getOrder 取得需要的相關內容</li>



<li>在 getOrder() 方法撰寫取得某一筆訂單<br>api 路徑取得特定訂單的內容、使用 this.$http.get 方法取得這筆訂單內容<br>使用 console 是否有正確取得<br>將相關的內容呈現在畫面上</li>



<li>製作確認付款去的行為<br>先看 order 包含什麼資訊，新增品項的時間、id、總金額、is_paid 屬性，is_paid 是用戶是否已經付款，is_paid只能由後端進行調整<br>用戶觸發結帳付款 api，觸發之後就會把 is_paid 的 false 改為 true<br>結帳付款 api 主要的重點在 orderId，會透過 orderId 搭配前一個 pay api 將這筆訂單的 is_paid 改為 true</li>



<li>針對這筆訂單進行付款<br>在 &lt;form&gt; 表單加上 payOrder 方法，當用戶按下按鈕或是送出表單的時候，就會觸發 payOrder 行為<br>撰寫 payOrder() 方法<br>url 路徑、使用 this.$http.post 方法將這筆訂單進行付款，發出請求後會使用 then 接收回傳<br>將這筆訂單完成之後就不能再次使用，重整再重新取得訂單的項目，再重新觸發一次 getOrder 行為</li>



<li>按下確認付款去之後，會觸發一個行為，會出現付款已經完成，在畫面上付款狀態會改成付款完成，確認付款去按鈕就會隱藏</li>



<li>查看 console 關於 this.order 這筆訂單的資訊 is_paid 會改為 true 的狀態，並且增加 paid_date 屬性，紀錄用戶在哪一個時間點進行付款</li>
</ol>



<pre class="wp-block-code"><code>// views/UserCheckout.vue
&lt;template&gt;
  &lt;Loading :active="isLoading"&gt;&lt;/Loading&gt;
  &lt;div class="my-5 row justify-content-center"&gt;
    &lt;form class="col-md-6" @submit.prevent="payOrder"&gt;
      &lt;table class="table align-middle"&gt;
        &lt;thead&gt;
        &lt;th&gt;品名&lt;/th&gt;
        &lt;th&gt;數量&lt;/th&gt;
        &lt;th&gt;單價&lt;/th&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
        &lt;tr v-for="item in order.products" :key="item.id"&gt;
          &lt;td&gt;{{ item.product.title }}&lt;/td&gt;
          &lt;td&gt;{{ item.qty }}/{{ item.product.unit }}&lt;/td&gt;
          &lt;td class="text-end"&gt;{{ item.final_total }}&lt;/td&gt;
        &lt;/tr&gt;
        &lt;/tbody&gt;
        &lt;tfoot&gt;
        &lt;tr&gt;
          &lt;td colspan="2" class="text-end"&gt;總計&lt;/td&gt;
          &lt;td class="text-end"&gt;{{ order.total }}&lt;/td&gt;
        &lt;/tr&gt;
        &lt;/tfoot&gt;
      &lt;/table&gt;

      &lt;table class="table"&gt;
        &lt;tbody&gt;
        &lt;tr&gt;
          &lt;th width="100"&gt;Email&lt;/th&gt;
          &lt;td&gt;{{ order.user.email }}&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;th&gt;姓名&lt;/th&gt;
          &lt;td&gt;{{ order.user.name }}&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;th&gt;收件人電話&lt;/th&gt;
          &lt;td&gt;{{ order.user.tel }}&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;th&gt;收件人地址&lt;/th&gt;
          &lt;td&gt;{{ order.user.address }}&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;th&gt;付款狀態&lt;/th&gt;
          &lt;td&gt;
            &lt;span v-if="!order.is_paid"&gt;尚未付款&lt;/span&gt;
            &lt;span v-else class="text-success"&gt;付款完成&lt;/span&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
      &lt;div class="text-end" v-if="order.is_paid === false"&gt;
        &lt;button class="btn btn-danger"&gt;確認付款去&lt;/button&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      order: {
        user: {},
      },
      orderId: '',
      isLoading: false,
    };
  },
  methods: {
    // 取得某一筆訂單
    getOrder() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${this.orderId}`;
      this.$http.get(url)
        .then((res) =&gt; {
          if (res.data.success) {
            this.order = res.data.order;
            console.log(this.order);
          }
        });
    },
    // 確認付款
    payOrder() {
      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.orderId}`;
      this.$http.post(url)
        .then((res) =&gt; {
          console.log(res);
          if (res.data.success) {
            this.getOrder();
          }
        });
    },
  },
  created() {
    this.orderId = this.$route.params.orderId;
    console.log(this.orderId);
    this.getOrder();
  },
};
&lt;/script&gt;
</code></pre>



<pre class="wp-block-code"><code>// src/router/index.js
import { createRouter, createWebHashHistory } from 'vue-router';
import Home from '../views/Home.vue';

const routes = &#91;
  {
    path: '/',
    name: 'Home',
    component: Home,
  },
  {
    path: '/about',
    name: 'About',
    // route level code-splitting
    // this generates a separate chunk (about.&#91;hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue'),
  },
  {
    path: '/login',
    component: () =&gt; import('../views/Login.vue'),
  },
  {
    path: '/dashboard',
    component: () =&gt; import('../views/Dashboard.vue'),
    // 巢狀路由 - 產品列表
    children: &#91;
      {
        path: 'products',
        component: () =&gt; import('../views/Products.vue'),
      },
      {
        path: 'orders',
        component: () =&gt; import('../views/Orders.vue'),
      },
      {
        path: 'coupons',
        component: () =&gt; import('../views/Coupons.vue'),
      },
    ],
  },
  {
    path: '/user',
    component: () =&gt; import('../views/Userboard.vue'),
    children: &#91;
      {
        path: 'cart',
        component: () =&gt; import('../views/UserCart.vue'),
      },
      {
        path: 'product/:productId',
        component: () =&gt; import('@/views/UserProduct.vue'),
      },
      {
        path: 'checkout/:orderId',
        component: () =&gt; import('../views/UserCheckout.vue'),
      },
    ],
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
  linkActiveClass: 'active',
});

export default router;
</code></pre>



<h3 class="wp-block-heading">最終作業說明</h3>



<h4 class="wp-block-heading">最終作業繳交說明</h4>



<h5 class="wp-block-heading">一般練習</h5>



<ul class="wp-block-list">
<li>僅檢視原始碼</li>



<li>僅需完成課程基本條件</li>



<li>僅需要完成桌面版</li>
</ul>



<h5 class="wp-block-heading">求職作品</h5>



<ul class="wp-block-list">
<li>檢視畫面設計及原始碼</li>



<li>除了課程 API 需增加自己創意在內</li>



<li>行動版、桌面版皆需製作</li>



<li>已正式上線為目標</li>



<li>退件率高</li>



<li><strong>請標示作為求職作品使用</strong></li>
</ul>



<h4 class="wp-block-heading">作品製作建議</h4>



<h5 class="wp-block-heading">先決定主題</h5>



<ul class="wp-block-list">
<li>搜集素材</li>



<li>確認主題製作可行性</li>



<li>定義產品資訊</li>



<li>構思技術小巧思 (我的最愛、抽獎、地圖功能、倒數優惠…)</li>



<li>開始執行</li>
</ul>



<h4 class="wp-block-heading">素材資源</h4>



<ul class="wp-block-list">
<li>
<a href="https://getbootstrap.com/" target="_blank" rel="noreferrer noopener">Bootstrap</a>、<a href="https://bootstrap5.hexschool.com/" target="_blank" rel="noreferrer noopener">Bootstrap 中文版</a>
</li>



<li>
<a href="https://material.io/design" target="_blank" rel="noreferrer noopener">Material Design</a>、<a href="https://material-design.hexschool.io/" target="_blank" rel="noreferrer noopener">Material Design 中文版</a>
</li>



<li><a href="https://unsplash.com/" target="_blank" rel="noreferrer noopener">圖庫</a></li>



<li><a href="https://fonts.google.com/icons" target="_blank" rel="noreferrer noopener">Material Design Icon</a></li>



<li><a href="https://icons.getbootstrap.com/#icons" target="_blank" rel="noreferrer noopener">Bootstrap Icon</a></li>



<li><a href="https://fontawesome.com/" target="_blank" rel="noreferrer noopener">FontAwesome</a></li>



<li><a href="https://www.flaticon.com/" target="_blank" rel="noreferrer noopener">付費 icon</a></li>



<li><a href="https://www.google.com/get/noto/" target="_blank" rel="noreferrer noopener">字體 (無襯線、san-serif、黑體)</a></li>
</ul>



<h4 class="wp-block-heading">你的用心，會讓作品更加耀眼</h4>



<h5 class="wp-block-heading">盡可能避免的錯誤</h5>



<ul class="wp-block-list">
<li>缺少文案、作品不完整</li>



<li>沒有對齊、畫面跑版</li>



<li>使用者體驗的問題: 例如購物車為空時，避免讓用戶進入下一步</li>



<li>行動版無法運作</li>
</ul>



<h4 class="wp-block-heading">不知如何下手嗎</h4>



<h5 class="wp-block-heading">萬丈高樓平地起，規劃優於一切</h5>



<ul class="wp-block-list">
<li>先參考學長姐的作品</li>



<li>從搜集資料開始，規劃網站的文案、產品、各種小巧思</li>



<li>先製作版型，將流程一一的順好</li>



<li>將功能一一套上版型</li>



<li>最後修正，提交作業</li>
</ul>



<h3 class="wp-block-heading">最終作業提交規則文件</h3>



<h3 class="wp-block-heading">最終作業提交 – 程式勇者村</h3>
	</div>
<!-- .entry-content -->

	<footer class="entry-footer">
			</footer><!-- .entry-footer -->
</article><!-- #post-837 -->

	<nav class="navigation post-navigation" aria-label="文章">
		<h2 class="screen-reader-text">文章導覽</h2>
		<div class="nav-links">
<div class="nav-previous"><a href="/wordpress_blog/reviewvue3_08/" rel="prev"><span class="nav-subtitle">Previous:</span> <span class="nav-title">Vue3 複習08</span></a></div>
<div class="nav-next"><a href="/wordpress_blog/nodejs-crash-2024/" rel="next"><span class="nav-subtitle">Next:</span> <span class="nav-title">Node.js Crash Course (2024 Revamp)</span></a></div>
</div>
	</nav>
	</main><!-- #main -->


	</div></div>
			
			<footer id="colophon" class="site-footer">

				
				<div class="container-fluid">
					<div class="site-info">
						<div class="row">

															
								<div class="col-12 footer-copyright-elements footer-copyright-alignment-center">

									<div class="botiga-credits">&copy; 2025 wordpress_blog. 
Created by Gee Hsu. 
<br>Proudly powered by <a rel="nofollow" href="https://athemes.com/theme/botiga/">Botiga</a>
</div>
<div class="social-profile">
<a target="_blank" href="https://www.facebook.com/watergrass0402/"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></i></a><a target="_blank" href="https://github.com/GeeHsu"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></i></a>
</div>
								</div>
														
						</div>
					</div>
				</div>
<!-- .site-info -->

				
			</footer><!-- #colophon -->

			
			<div class="back-to-top visibility-all position-right"><i class="ws-svg-icon"><svg viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 15l7-7 7 7" stroke-width="3" stroke-linejoin="round"></path></svg></i></div>
</div>
<!-- #page -->


<script id="botiga-custom-js-extra">
var botiga = {"ajaxurl":"\/wp-admin\/admin-ajax.php","i18n":{"botiga_sharebox_copy_link":"Copy link","botiga_sharebox_copy_link_copied":"Copied!"}};
</script>
<script src="/wordpress_blog/wp-content/themes/botiga/assets/js/custom.min.js?ver=1.1.2" id="botiga-custom-js"></script>

</body>
</html>