<!DOCTYPE html>
<html lang="zh-TW">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="https://gmpg.org/xfn/11">

	<title>MERN Authentication Tutorial &#8211; wordpress_blog</title>
<meta name="robots" content="noindex, nofollow">
	<style>img:is([sizes="auto" i], [sizes^="auto," i]) { contain-intrinsic-size: 3000px 1500px }</style>
	<link rel="alternate" type="application/rss+xml" title="訂閱《wordpress_blog》&raquo; 資訊提供" href="/wordpress_blog/feed/">
<link rel="alternate" type="application/rss+xml" title="訂閱《wordpress_blog》&raquo; 留言的資訊提供" href="/wordpress_blog/comments/feed/">
<script>
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.7.2"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"🏳️‍⚧️","🏳️​⚧️")?!1:!n(e,"🇺🇳","🇺​🇳")&&!n(e,"🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴​󠁧​󠁢​󠁥​󠁮​󠁧​󠁿");case"emoji":return!n(e,"🐦‍⬛","🐦​⬛")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
</script>
<style id="wp-emoji-styles-inline-css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="/wordpress_blog/wp-includes/css/dist/block-library/style.min.css?ver=6.7.2" media="all">
<style id="classic-theme-styles-inline-css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css">:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--palette-1-color-0: #212121;--wp--preset--color--palette-1-color-1: #757575;--wp--preset--color--palette-1-color-2: #212121;--wp--preset--color--palette-1-color-3: #212121;--wp--preset--color--palette-1-color-4: #212121;--wp--preset--color--palette-1-color-5: #f5f5f5;--wp--preset--color--palette-1-color-6: #ffffff;--wp--preset--color--palette-1-color-7: #ffffff;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 14px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 18px;--wp--preset--font-size--x-large: 42px;--wp--preset--font-size--normal: 16px;--wp--preset--font-size--larger: 24px;--wp--preset--font-size--extra-large: 32px;--wp--preset--font-size--huge: 48px;--wp--preset--font-size--gigantic: 64px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="botiga-style-css" href="/wordpress_blog/wp-content/themes/botiga/style.css?ver=1.1.2" media="all">
<link rel="stylesheet" id="botiga-style-min-css" href="/wordpress_blog/wp-content/themes/botiga/assets/css/styles.min.css?ver=1.1.2" media="all">
<link rel="stylesheet" id="botiga-custom-styles-css" href="/wordpress_blog/wp-content/uploads/botiga/custom-styles.css?ver=1648804469" media="all">
<link rel="https://api.w.org/" href="/wordpress_blog/wp-json/">
<link rel="alternate" title="JSON" type="application/json" href="/wordpress_blog/wp-json/wp/v2/posts/865">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/wordpress_blog/xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.7.2">
<link rel="canonical" href="/wordpress_blog/mern-authentication-tutorial/">
<link rel="shortlink" href="/wordpress_blog/?p=865">
<link rel="alternate" title="oEmbed (JSON)" type="application/json+oembed" href="/wordpress_blog/wp-json/oembed/1.0/embed?url=%2Fmern-authentication-tutorial%2F">
<link rel="alternate" title="oEmbed (XML)" type="text/xml+oembed" href="/wordpress_blog/wp-json/oembed/1.0/embed?url=%2Fmern-authentication-tutorial%2F&#038;format=xml">
<link rel="icon" href="/wordpress_blog/wp-content/uploads/2022/03/logo.png" sizes="32x32">
<link rel="icon" href="/wordpress_blog/wp-content/uploads/2022/03/logo.png" sizes="192x192">
<link rel="apple-touch-icon" href="/wordpress_blog/wp-content/uploads/2022/03/logo.png">
<meta name="msapplication-TileImage" content="/wp-content/uploads/2022/03/logo.png">
	
</head>

<body class="post-template-default single single-post postid-865 single-format-standard wp-custom-logo wp-embed-responsive header-header_layout_1 blog-single-layout1">


<div id="page" class="site">

	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	
			<div class="top-bar visibility-desktop-only">
				<div class="container-fluid">
					<div class="top-bar-inner">
						<div class="row valign">

															<div class="col header-elements delimiter-none">
									<div class="header-item top-bar-social"><div class="social-profile">
<a target="_blank" href="https://www.facebook.com/watergrass0402/"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></i></a><a target="_blank" href="https://github.com/GeeHsu"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></i></a>
</div></div>								</div>
																						<div class="col header-elements delimiter-none">
													
			<nav class="header-item top-bar-secondary-navigation secondary-navigation">
				<div class="menu-topbar-container"><ul id="secondary" class="menu">
<li id="menu-item-143" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-143"><a href="/wordpress_blog/setup/">網站架設</a></li>
<li id="menu-item-144" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-144"><a href="/wordpress_blog/source/">資料來源</a></li>
<li id="menu-item-262" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-262"><a href="/wordpress_blog/resource/">學習資源</a></li>
</ul></div>			</nav>
											</div>
							
						</div>
					</div>
				</div>
			</div>
			
							
				<header id="masthead" class="site-header header_layout_1">
					<div class="container-fluid">
						<div class="site-header-inner">
							<div class="row valign">
								<div class="col-md-5">
										
			<nav id="site-navigation" class="main-navigation">
				<div class="menu-navbar-container"><ul id="primary-menu" class="menu">
<li id="menu-item-109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-109"><a href="/wordpress_blog/about/">關於</a></li>
<li id="menu-item-110" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-110">
<a href="/wordpress_blog/learn/">學習</a><span tabindex="0" class="dropdown-symbol"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512.011 512.011"><path d="M505.755 123.592c-8.341-8.341-21.824-8.341-30.165 0L256.005 343.176 36.421 123.592c-8.341-8.341-21.824-8.341-30.165 0s-8.341 21.824 0 30.165l234.667 234.667a21.275 21.275 0 0015.083 6.251 21.275 21.275 0 0015.083-6.251l234.667-234.667c8.34-8.341 8.34-21.824-.001-30.165z"></path></svg></i></span>
<ul class="sub-menu">
	<li id="menu-item-140" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-140"><a href="/wordpress_blog/category/hexschool/">六角學院</a></li>
	<li id="menu-item-141" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-141"><a href="/wordpress_blog/category/ninja/">Net Ninja</a></li>
	<li id="menu-item-483" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-483"><a href="/wordpress_blog/category/youtube/">Youtube</a></li>
</ul>
</li>
<li id="menu-item-111" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-111"><a href="/wordpress_blog/linestore/">LINE STORE</a></li>
</ul></div>			</nav><!-- #site-navigation -->
											</div>
								<div class="col-md-2">
												<div class="site-branding">
				<a href="/wordpress_blog/" class="custom-logo-link" rel="home"><img width="512" height="512" src="/wordpress_blog/wp-content/uploads/2022/03/logo.png" class="custom-logo" alt="wordpress_blog" decoding="async" fetchpriority="high"></a>					<p class="site-title"><a href="/wordpress_blog/" rel="home">wordpress_blog</a></p>
										<p class="site-description">This is a dynamic to static website.</p>
							</div>
<!-- .site-branding -->
											</div>
								<div class="col-md-5 header-elements">
																	</div>							
							</div>
						</div>
					</div>
								<div class="header-search-form">
			<form role="search" method="get" class="search-form" action="/">
	<label class="screen-reader-text" for="search-form-1">Search&hellip;</label>
	<input type="search" id="search-form-1" class="search-field" value="" name="s" placeholder="Search &hellip;">
	<button type="submit" class="search-submit" value="Search"><i class="ws-svg-icon"><svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.875 3.75a7.125 7.125 0 100 14.25 7.125 7.125 0 000-14.25zM2.25 10.875a8.625 8.625 0 1117.25 0 8.625 8.625 0 01-17.25 0z"></path><path fill-rule="evenodd" d="M15.913 15.914a.75.75 0 011.06 0l4.557 4.556a.75.75 0 01-1.06 1.06l-4.557-4.556a.75.75 0 010-1.06z"></path></svg></i></button>
</form>
			</div>
			
									</header>

										<div class="search-overlay"></div>
			
			<div class="botiga-offcanvas-menu">
				<div class="mobile-header-item">
					<div class="row">
						<div class="col">
										<div class="site-branding">
				<a href="/wordpress_blog/" class="custom-logo-link" rel="home"><img width="512" height="512" src="/wordpress_blog/wp-content/uploads/2022/03/logo.png" class="custom-logo" alt="wordpress_blog" decoding="async"></a>					<p class="site-title"><a href="/wordpress_blog/" rel="home">wordpress_blog</a></p>
										<p class="site-description">This is a dynamic to static website.</p>
							</div>
<!-- .site-branding -->
									</div>
						<div class="col align-right">
							<a class="mobile-menu-close" href="#"><i class="ws-svg-icon icon-cancel"><svg width="16" height="16" fill="none" viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2.219.781L.78 2.22 9.562 11l-8.78 8.781 1.437 1.438L11 12.437l8.781 8.782 1.438-1.438L12.437 11l8.782-8.781L19.78.78 11 9.562 2.219.783z"></path></svg></i></a>
						</div>
					</div>
				</div>
				<div class="mobile-header-item">
						
			<nav id="site-navigation" class="main-navigation">
				<div class="menu-navbar-container"><ul id="primary-menu" class="menu">
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-109"><a href="/wordpress_blog/about/">關於</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-110">
<a href="/wordpress_blog/learn/">學習</a><span tabindex="0" class="dropdown-symbol"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512.011 512.011"><path d="M505.755 123.592c-8.341-8.341-21.824-8.341-30.165 0L256.005 343.176 36.421 123.592c-8.341-8.341-21.824-8.341-30.165 0s-8.341 21.824 0 30.165l234.667 234.667a21.275 21.275 0 0015.083 6.251 21.275 21.275 0 0015.083-6.251l234.667-234.667c8.34-8.341 8.34-21.824-.001-30.165z"></path></svg></i></span>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-140"><a href="/wordpress_blog/category/hexschool/">六角學院</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-141"><a href="/wordpress_blog/category/ninja/">Net Ninja</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-483"><a href="/wordpress_blog/category/youtube/">Youtube</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-111"><a href="/wordpress_blog/linestore/">LINE STORE</a></li>
</ul></div>			</nav><!-- #site-navigation -->
							</div>
				<div class="mobile-header-item">
									<a target="&quot;_blank&quot;" class="button header-item" href="https://www.facebook.com/watergrass0402/">聯絡我</a>
							</div>			
			</div>
			
							<header id="masthead-mobile" class="site-header mobile-header">
					<div class="container-fluid">
						<div class="row valign flex-nowrap">
							<div class="col-sm-6 col-md-4 col-grow-mobile">
											<div class="site-branding">
				<a href="/wordpress_blog/" class="custom-logo-link" rel="home"><img width="512" height="512" src="/wordpress_blog/wp-content/uploads/2022/03/logo.png" class="custom-logo" alt="wordpress_blog" decoding="async"></a>					<p class="site-title"><a href="/wordpress_blog/" rel="home">wordpress_blog</a></p>
										<p class="site-description">This is a dynamic to static website.</p>
							</div>
<!-- .site-branding -->
										</div>
							<div class="col-auto col-sm-6 col-md-8 col-grow-mobile header-elements valign align-right">
																	
															<a href="#" class="menu-toggle">
				<i class="ws-svg-icon"><svg width="16" height="11" viewbox="0 0 16 11" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="16" height="1"></rect><rect y="5" width="16" height="1"></rect><rect y="10" width="16" height="1"></rect></svg></i>
			</a>
																		</div>						
						</div>
					</div>
								<div class="header-search-form">
			<form role="search" method="get" class="search-form" action="/">
	<label class="screen-reader-text" for="search-form-2">Search&hellip;</label>
	<input type="search" id="search-form-2" class="search-field" value="" name="s" placeholder="Search &hellip;">
	<button type="submit" class="search-submit" value="Search"><i class="ws-svg-icon"><svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.875 3.75a7.125 7.125 0 100 14.25 7.125 7.125 0 000-14.25zM2.25 10.875a8.625 8.625 0 1117.25 0 8.625 8.625 0 01-17.25 0z"></path><path fill-rule="evenodd" d="M15.913 15.914a.75.75 0 011.06 0l4.557 4.556a.75.75 0 01-1.06 1.06l-4.557-4.556a.75.75 0 010-1.06z"></path></svg></i></button>
</form>
			</div>
			
									</header>
						<div class="search-overlay"></div>
			<div class="header-image"><img src="/wordpress_blog/wp-content/uploads/2022/03/seashore.jpg" width="1920" height="500" alt=""></div>
<div class="container content-wrapper"><div class="row main-row">			
	<main id="primary" class="site-main no-sidebar">

		

<article id="post-865" class="post-865 post type-post status-publish format-standard hentry category-ninja">
	
		
	<header class="entry-header">
		
		
		<h1 class="entry-title">MERN Authentication Tutorial</h1>			<div class="entry-meta entry-meta-below delimiter-none">
<span class="posted-on"><a href="/wordpress_blog/mern-authentication-tutorial/" rel="bookmark"><time class="entry-date published" datetime="2024-07-08T17:29:35+08:00">2024 年 7 月 8 日</time><time class="updated" datetime="2025-03-26T08:58:36+08:00">2025 年 3 月 26 日</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="/wordpress_blog/author/gee-hsu/">gee.hsu</a></span></span>
</div>			</header><!-- .entry-header -->

	
	<div class="entry-content">
		
<p>Learning From Youtube Channel: Net Ninja<br>Video:&nbsp;<a href="https://www.youtube.com/watch?v=WsRBmwNkv3Q&amp;list=PL4cUxeGkcC9g8OhpOZxNdhXggFz2lOuCT&amp;index=1" target="_blank" rel="noreferrer noopener">MERN Authentication Tutorial</a><br>Thank you.</p>



<h2 class="wp-block-heading">#1 – Intro &amp; Starter Project</h2>



<p>Learn how to implement authentication (using JSON web tokens), within the MERN stack, in this tutorial series.</p>



<ul class="wp-block-list">
<li>下載初始專案、講解專案檔案結構、內容</li>



<li>移動到 backend 資料夾 – cd backend</li>



<li>安裝 npm 套件 – npm install</li>



<li>移動到 frontend 資料夾 – cd frontend</li>



<li>安裝 npm 套件 – npm install</li>



<li>執行後端 backend – npm run dev</li>



<li>執行前端 frontend – npm start</li>
</ul>



<h2 class="wp-block-heading">#2 – User Routes, Controller &amp; Model</h2>



<p>In this MERN auth tutorial, you’ll make a user controller &amp; model, and set up some routes for authentication.</p>



<ul class="wp-block-list">
<li>在 routes 資料夾裡面建立 user.js 檔案</li>



<li>修改 user.js 檔案</li>



<li>在 controllers 資料夾裡面建立 userController.js 檔案</li>



<li>修改 userController.js 檔案</li>



<li>修改 user.js 檔案，controller functions</li>



<li>修改 server.js 檔案</li>



<li>在 models 資料夾裡面建立 userModel.js 檔案</li>



<li>修改 useModel.js 檔案</li>



<li>修改 userController.js 檔案，User</li>



<li>使用 API 測試工具 Postman<br>http://localhost:4000/api/user/login，POST 方法<br>Body > raw > JSON</li>



<li>使用 API 測試工具<br>http://localhost:4000/api/user/signup，POST 方法<br>Body > raw > JSON</li>
</ul>



<pre class="wp-block-code"><code>// backend/routes/user.js
const express = require('express')

// controller functions
const { signupUser, loginUser } = require('../controllers/userController')

const router = express.Router()

// login route
router.post('/login', loginUser)

// signup route
router.post('/signup', signupUser)

module.exports = router
</code></pre>



<pre class="wp-block-code"><code>// backend/controllers/userController.js
const User = require('../models/userModel')

// login user
const loginUser = async (req, res) =&gt; {
  res.json({mssg: 'login user'})
}

// signup user
const signupUser = async (req, res) =&gt; {
  res.json({mssg: 'signup user'})
}

module.exports = { signupUser, loginUser }
</code></pre>



<pre class="wp-block-code"><code>// backend/server.js
require('dotenv').config()

const express = require('express')
const mongoose = require('mongoose')
const workoutRoutes = require('./routes/workouts')
const userRoutes = require('./routes/user')

// express app
const app = express()

// middleware
app.use(express.json())

app.use((req, res, next) =&gt; {
  console.log(req.path, req.method)
  next()
})

// routes
app.use('/api/workouts', workoutRoutes)
app.use('/api/user', userRoutes)

// connect to db
mongoose.connect(process.env.MONGO_URI)
  .then(() =&gt; {
    // listen for requests
    app.listen(process.env.PORT, () =&gt; {
      console.log('connected to db &amp; listening on port', process.env.PORT)
    })
  })
  .catch((error) =&gt; {
    console.log(error)
  })
</code></pre>



<pre class="wp-block-code"><code>// backend/models/userModel.js
const mongoose = require('mongoose')

const Schema = mongoose.Schema

const userSchema = new Schema({
  email: {
    type: String,
    required: true,
    unique: true
  },
  password: {
    type: String,
    required: true,
  }
})

module.exports = mongoose.model('User', userSchema)
</code></pre>



<pre class="wp-block-code"><code>// Body &gt; raw &gt; JSON - login
{
  "email": "yoshi@netninja.dev",
  "password": "abc123"
}
</code></pre>



<pre class="wp-block-code"><code>// Body &gt; raw &gt; JSON - signup
{
  "email": "yoshi@netninja.dev",
  "password": "abc123"
}
</code></pre>



<h2 class="wp-block-heading">#3 – Signing Up &amp; Hashing Passwords</h2>



<ul class="wp-block-list">
<li>修改 userModel.js 檔案，static signup method</li>



<li>安裝 bcrypt 套件 – npm install bcrypt<br>修改 userModel.js 檔案</li>



<li>修改 userController.js 檔案</li>



<li>修改 userModels.js 檔案，function</li>



<li>重新執行後端 server – nodemon server</li>



<li>使用 API 測試工具 Postman<br>http://localhost:4000/api/user/signup，POST 方法<br>Body > raw > JSON</li>
</ul>



<pre class="wp-block-code"><code>// backend/models/userModel.js
const mongoose = require('mongoose')
const bcrypt = require('bcrypt')

const Schema = mongoose.Schema

const userSchema = new Schema({
  email: {
    type: String,
    required: true,
    unique: true
  },
  password: {
    type: String,
    required: true,
  }
})

// static signup method
userSchema.statics.signup = async function (email, password) {

  const exists = await this.findOne({ email })

  if (exists) {
    throw Error('Email already in use')
  }

  const salt = await bcrypt.genSalt(10)
  const hash = await bcrypt.hash(password, salt)

  const user = await this.create({ email, password: hash })

  return user
}

module.exports = mongoose.model('User', userSchema)
</code></pre>



<pre class="wp-block-code"><code>// backend/controllers/userController.js
const User = require('../models/userModel')

// login user
const loginUser = async (req, res) =&gt; {
  res.json({mssg: 'login user'})
}

// signup user
const signupUser = async (req, res) =&gt; {
  const { email, password } = req.body

  try {
    const user = await User.signup(email, password)

    res.status(200).json({ email, user })
  } catch (error) {
    res.status(400).json({ error: error.message })
  }
}

module.exports = { signupUser, loginUser }
</code></pre>



<pre class="wp-block-code"><code>// Body &gt; raw &gt; JSON
{
  "email": "yoshi@netninja.dev",
  "password": "abc123"
}
</code></pre>



<h2 class="wp-block-heading">#4 – Email &amp; Password Validation</h2>



<ul class="wp-block-list">
<li>使用 API 測試工具 Postman<br>http://localhost:4000/api/user/signup，POST 方法<br>使用錯誤的 email 格式測試，沒有完整格式、空值</li>



<li>安裝 validator 套件 – npm install validator</li>



<li>修改 userModel.js 檔案，validator</li>



<li>使用 API 測試工具 Postman<br>http://localhost:4000/api/user/signup，POST 方法<br>使用錯誤的 email 格式測試，沒有完整格式、空值</li>
</ul>



<pre class="wp-block-code"><code>// backend/models/userModel.js
const mongoose = require('mongoose')
const bcrypt = require('bcrypt')
const validator = require('validator')

const Schema = mongoose.Schema

const userSchema = new Schema({
  email: {
    type: String,
    required: true,
    unique: true
  },
  password: {
    type: String,
    required: true,
  }
})

// static signup method
userSchema.statics.signup = async function (email, password) {

  // validation
    if (!email || !password) {
      throw Error('All fields must be filled')
    }
    if (!validator.isEmail(email)) {
      throw Error('Email not valid')
    }
    if (!validator.isStrongPassword(password)) {
      throw Error('Password not strong enough')
    }

  const exists = await this.findOne({ email })

  if (exists) {
    throw Error('Email already in use')
  }

  const salt = await bcrypt.genSalt(10)
  const hash = await bcrypt.hash(password, salt)

  const user = await this.create({ email, password: hash })

  return user
}

module.exports = mongoose.model('User', userSchema)
</code></pre>



<h2 class="wp-block-heading">#5 – JSON Web Tokens (theory)</h2>



<p>In this MERN Authentication tutorial you’ll learn about JSON Web Tokens (JWT’s) and how they work under the hood when it comes to authentication.</p>



<ul class="wp-block-list">
<li>講解 JSON Web Tokens</li>



<li>介紹 JWT 的 Encoded、Decoded</li>



<li>講解 Header、Payload、Signature</li>
</ul>



<h3 class="wp-block-heading">JSON Web Tokens</h3>



<p>Header<br>Contains the algorithm used for the JWT</p>



<p>Payload<br>Contains non-sensitive user data (e.g. a user id)</p>



<p>Signature<br>Used to verify the token by the server</p>



<h2 class="wp-block-heading">#6 – Signing Tokens</h2>



<p>In this MERN Authentication tutorial, we’ll see how to sign tokens and send them back to the client.</p>



<ul class="wp-block-list">
<li>安裝 jsonwebtoken 套件 – npm install jsonwebtoken</li>



<li>修改 userController.js 檔案</li>



<li>修改 .env 檔案，避免敏感、重要的資料上傳到 GitHub</li>



<li>使用 API 測試工具 Postman<br>http://localhost:4000/api/user/signup，POST 方法<br>Body > raw > JSON</li>
</ul>



<pre class="wp-block-code"><code>// backend/controllers/userController.js
const User = require('../models/userModel')
const jwt = require('jsonwebtoken')

const createToken = (_id) =&gt; {
  return jwt.sign({_id}, process.env.SECRET, { expiresIn: '3d' })
}

// login user
const loginUser = async (req, res) =&gt; {
  res.json({mssg: 'login user'})
}

// signup user
const signupUser = async (req, res) =&gt; {
  const { email, password } = req.body

  try {
    const user = await User.signup(email, password)

    // create a token
    const token = createToken(user._id)

    res.status(200).json({ email, token })
  } catch (error) {
    res.status(400).json({ error: error.message })
  }
}

module.exports = { signupUser, loginUser }
</code></pre>



<pre class="wp-block-code"><code>// backend/.env
PORT=4000
MONGO_URI=mongodb+srv://mario:test1234@mernapp.bldt4v0.mongodb.net/?retryWrites=true&amp;w=majority&amp;appName=MERNapp
SECRET =learnfromnetninjathankyou
</code></pre>



<pre class="wp-block-code"><code>// Body &gt; raw &gt; JSON
{
  "email": "luigi@netninja.dev",
  "password": "ABCabc123!"
}
</code></pre>



<h2 class="wp-block-heading">#7 – Logging Users In</h2>



<ul class="wp-block-list">
<li>修改 userModel.js 檔案，static login method</li>



<li>修改 userController.js 檔案，login user</li>



<li>使用 API 測試工具 Postman，測試各種資料情形<br>http://localhost:4000/api/user/login，POST 方法<br>Body > raw > JSON</li>
</ul>



<pre class="wp-block-code"><code>// backend/models/userModel.js
const mongoose = require('mongoose')
const bcrypt = require('bcrypt')
const validator = require('validator')

const Schema = mongoose.Schema

const userSchema = new Schema({
  email: {
    type: String,
    required: true,
    unique: true
  },
  password: {
    type: String,
    required: true,
  }
})

// static signup method
userSchema.statics.signup = async function (email, password) {

  // validation
    if (!email || !password) {
      throw Error('All fields must be filled')
    }
    if (!validator.isEmail(email)) {
      throw Error('Email not valid')
    }
    if (!validator.isStrongPassword(password)) {
      throw Error('Password not strong enough')
    }

  const exists = await this.findOne({ email })

  if (exists) {
    throw Error('Email already in use')
  }

  const salt = await bcrypt.genSalt(10)
  const hash = await bcrypt.hash(password, salt)

  const user = await this.create({ email, password: hash })

  return user
}

// static login method
userSchema.statics.login = async function (email, password) {

  if (!email || !password) {
    throw Error('All fields must be filled')
  }

  const user = await this.findOne({ email })

  if (!user) {
    throw Error('Incorrect email')
  }

  const match = await bcrypt.compare(password, user.password)

  if (!match) {
    throw Error('Incorrect password')
  }

  return user
}

module.exports = mongoose.model('User', userSchema)
</code></pre>



<pre class="wp-block-code"><code>// backend/controllers/userController.js
const User = require('../models/userModel')
const jwt = require('jsonwebtoken')

const createToken = (_id) =&gt; {
  return jwt.sign({_id}, process.env.SECRET, { expiresIn: '3d' })
}

// login user
const loginUser = async (req, res) =&gt; {
  const { email, password } = req.body

  try {
    const user = await User.login(email, password)

    // create a token
    const token = createToken(user._id)

    res.status(200).json({ email, token })
  } catch (error) {
    res.status(400).json({ error: error.message })
  }
}

// signup user
const signupUser = async (req, res) =&gt; {
  const { email, password } = req.body

  try {
    const user = await User.signup(email, password)

    // create a token
    const token = createToken(user._id)

    res.status(200).json({ email, token })
  } catch (error) {
    res.status(400).json({ error: error.message })
  }
}

module.exports = { signupUser, loginUser }
</code></pre>



<pre class="wp-block-code"><code>// Body &gt; raw &gt; JSON
{
  "email": "luigi@netninja.dev",
  "password": "ABCabc123!"
}
</code></pre>



<h2 class="wp-block-heading">#8 – React Auth Context</h2>



<ul class="wp-block-list">
<li>在 context 資料夾裡面建立 AuthContext.js 檔案</li>



<li>修改 AuthContext.js 檔案</li>



<li>修改 index.js 檔案，匯入 AuthContextProvider</li>



<li>在 hook 資料夾裡面建立 useAuthContext.js 檔案</li>



<li>修改 useAuthContext.js 檔案</li>
</ul>



<pre class="wp-block-code"><code>// backend/src/context/AuthContext.js
import { createContext, useReducer } from 'react'

export const AuthContext = createContext()

export const authReducer = (state, action) =&gt; {
  switch (action.type) {
    case 'LOGIN':
      return { user: action.payload }
    case 'LOGOUT':
      return { user: null}
    default:
      return state
  }
}

export const AuthContextProvider = ({ children }) =&gt; {
  const &#91;state, dispatch] = useReducer(authReducer, {
    user: null
  })

  console.log('AuthContext State: ', state)

  return (
    &lt;AuthContext.Provider value={{...state, dispatch}}&gt;
      { children }
    &lt;/AuthContext.Provider&gt;
  )
}
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/index.js
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import { WorkoutsContextProvider } from './context/WorkoutContext';
import { AuthContextProvider } from './context/AuthContext';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  &lt;React.StrictMode&gt;
    &lt;AuthContextProvider&gt;
      &lt;WorkoutsContextProvider&gt;
        &lt;App /&gt;
      &lt;/WorkoutsContextProvider&gt;
    &lt;/AuthContextProvider&gt;
  &lt;/React.StrictMode&gt;
);
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/hooks/useAuthContext.js
import { AuthContext } from "../context/AuthContext";
import { useContext } from 'react'

export const useAuthContext = () =&gt; {
  const context = useContext(AuthContext)

  if (!context) {
    throw Error('useAuthContext must be used inside an AuthContextProvider')
  }

  return context
}
</code></pre>



<h2 class="wp-block-heading">#9 – Login &amp; Signup Forms</h2>



<p>In this MERN auth tutorial, we’ll flesh out the login and signup forms.</p>



<ul class="wp-block-list">
<li>在 pages 資料夾裡面建立 Signup.js 檔案</li>



<li>修改 Signup.js 檔案</li>



<li>在 pages 資料夾裡面建立 Login.js 檔案</li>



<li>修改 Login.js 檔案，從 Signup.js 複製修改</li>



<li>修改 App.js 檔案</li>



<li>修改 Navbar.js 檔案</li>



<li>修改 index.css 檔案</li>



<li>測試網頁表單 Sign up 關於 console 查詢顯示</li>
</ul>



<pre class="wp-block-code"><code>// frontend/src/pages/Signup.js
import { useState } from 'react'

const Signup = () =&gt; {
  const &#91;email, setEmail] = useState('')
  const &#91;password, setPassword] = useState('')

  const handleSubmit = async (e) =&gt; {
    e.preventDefault()

    console.log(email, password)
  }

  return (
    &lt;form className='signup' onSubmit={handleSubmit}&gt;
      &lt;h3&gt;Sign up&lt;/h3&gt;

      &lt;label&gt;Email:&lt;/label&gt;
      &lt;input
      type="email"
      onChange={(e) =&gt; setEmail(e.target.value)}
      value={email}
      /&gt;
      &lt;label&gt;Password:&lt;/label&gt;
      &lt;input
      type="password"
      onChange={(e) =&gt; setPassword(e.target.value)}
      value={password}
      /&gt;
      
      &lt;button&gt;Sign up&lt;/button&gt;
    &lt;/form&gt;
  )
}

export default Signup
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/pages/Login.js
import { useState } from 'react'

const Login = () =&gt; {
  const &#91;email, setEmail] = useState('')
  const &#91;password, setPassword] = useState('')

  const handleSubmit = async (e) =&gt; {
    e.preventDefault()

    console.log(email, password)
  }

  return (
    &lt;form className='login' onSubmit={handleSubmit}&gt;
      &lt;h3&gt;Log in&lt;/h3&gt;

      &lt;label&gt;Email:&lt;/label&gt;
      &lt;input
      type="email"
      onChange={(e) =&gt; setEmail(e.target.value)}
      value={email}
      /&gt;
      &lt;label&gt;Password:&lt;/label&gt;
      &lt;input
      type="password"
      onChange={(e) =&gt; setPassword(e.target.value)}
      value={password}
      /&gt;
      
      &lt;button&gt;Log in&lt;/button&gt;
    &lt;/form&gt;
  )
}

export default Login
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/App.js
import { BrowserRouter , Routes, Route } from 'react-router-dom'

// pages &amp; components
import Home from './pages/Home'
import Login from './pages/Login';
import Signup from './pages/Signup';
import Navbar from './components/Navbar'

function App() {
  return (
    &lt;div className="App"&gt;
        &lt;BrowserRouter&gt;
          &lt;Navbar /&gt;
          &lt;div className="pages"&gt;
            &lt;Routes&gt;
              &lt;Route
                path="/"
                element={&lt;Home /&gt;} 
              /&gt;
              &lt;Route
                path="/login"
                element={&lt;Login /&gt;} 
              /&gt;
              &lt;Route
                path="/signup"
                element={&lt;Signup /&gt;} 
              /&gt;
            &lt;/Routes&gt;
          &lt;/div&gt;
        &lt;/BrowserRouter&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/components/Navbar.js
import { Link } from "react-router-dom"

const Navbar = () =&gt; {

  return (
    &lt;header&gt;
      &lt;div className="container"&gt;
        &lt;Link to="/"&gt;
          &lt;h1&gt;Workout Buddy&lt;/h1&gt;
        &lt;/Link&gt;
        &lt;nav&gt;
          &lt;div&gt;
            &lt;Link to="/login"&gt;Login&lt;/Link&gt;
            &lt;Link to="/signup"&gt;Signup&lt;/Link&gt;
          &lt;/div&gt;
        &lt;/nav&gt;
      &lt;/div&gt;
    &lt;/header&gt;
  )
}

export default Navbar
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/index.css
/* google font */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;800&amp;family=VT323&amp;display=swap');

/* layout */
:root {
  --primary: #1aac83;
  --error: #e7195a;
}
body {
  background: #f1f1f1;
  margin: 0;
  font-family: "Poppins";
}
header {
  background: #fff;
}
header .container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 10px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
header a {
  color: #333;
  text-decoration: none;
}
.pages{
  max-width: 1400px;
  padding: 20px;
  margin: 0 auto;
}

/* homepage */
.home {
  display: grid;
  grid-template-columns: 3fr 1fr;
  gap: 100px;
}

.workout-details {
  background: #fff;
  border-radius: 4px;
  margin: 20px auto;
  padding: 20px;
  position: relative;
  box-shadow: 2px 2px 5px rgba(0,0,0,0.05);
}

.workout-details h4 {
  margin: 0 0 10px 0;
  font-size: 1.2em;
  color: var(--primary);
}

.workout-details p {
  margin: 0;
  font-size: 0.9em;
  color: #555;
}

.workout-details span {
  position: absolute;
  top: 20px;
  right: 20px;
  cursor: pointer;
  background: #f1f1f1;
  padding: 6px;
  border-radius: 50%;
  color: #333;
}

/* new workout form */
label, input {
  display: block;
}

input {
  padding: 10px;
  margin-top: 10px;
  margin-bottom: 20px;
  width: 100%;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-sizing: border-box;
}

form button {
  background: var(--primary);
  border: 0;
  color: #fff;
  padding: 10px;
  font-family: "Poppins";
  border-radius: 4px;
  cursor: pointer;
}

div.error {
  padding: 10px;
  background: #ffefef;
  border: 1px solid var(--error);
  color: var(--error);
  border-radius: 4px;
  margin: 20px 0;
}

input.error {
  border: 1px solid var(--error);
}

/* navbar */
nav {
  display: flex;
  align-items: center;
}

nav a {
  margin-left: 10px;
}

/* auth forms */
form.signup, form.login {
  max-width: 400px;
  margin: 40px auto;
  padding: 20px;
  background: #fff;
  border-radius: 4px;
}
</code></pre>



<h2 class="wp-block-heading">#10 – Making a useSignup Hook</h2>



<p>In this MERN auth lesson, you’ll create a custom, reusable React hook that we can use to sign new users up to the application.</p>



<ul class="wp-block-list">
<li>在 hooks 資料夾裡面建立 useSignup.js 檔案</li>



<li>修改 useSignup.js 檔案</li>



<li>修改 Signup.js 檔案，useSignup</li>



<li>測試 Sign up 表單能否正常運作</li>
</ul>



<pre class="wp-block-code"><code>// frontend/src/hooks/useSignup.js
import { useState } from 'react'
import { useAuthContext } from './useAuthContext'

export const useSignup = () =&gt; {
  const &#91;error, setError] = useState(null)
  const &#91;isLoading, setIsLoading] = useState(null)
  const { dispatch } = useAuthContext()

  const signup = async (email, password) =&gt; {
    setIsLoading(true)
    setError(null)

    const response = await fetch('/api/user/signup', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({email, password})
    })
    const json = await response.json()

    if (!response.ok) {
      setIsLoading(false)
      setError(json.error)
    }
    if (response.ok) {
      // save the user to local storage
      localStorage.setItem('user', JSON.stringify(json))

      // update the auth context
      dispatch({type: 'LOGIN', payload: json})

      setIsLoading(false)
    }
  }

  return { signup, isLoading, error}
} 
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/pages/Signup.js
import { useState } from 'react'
import { useSignup } from '../hooks/useSignup'

const Signup = () =&gt; {
  const &#91;email, setEmail] = useState('')
  const &#91;password, setPassword] = useState('')
  const {signup, error, isLoading} = useSignup()

  const handleSubmit = async (e) =&gt; {
    e.preventDefault()

    await signup(email, password)
  }

  return (
    &lt;form className='signup' onSubmit={handleSubmit}&gt;
      &lt;h3&gt;Sign up&lt;/h3&gt;

      &lt;label&gt;Email:&lt;/label&gt;
      &lt;input
      type="email"
      onChange={(e) =&gt; setEmail(e.target.value)}
      value={email}
      /&gt;
      &lt;label&gt;Password:&lt;/label&gt;
      &lt;input
      type="password"
      onChange={(e) =&gt; setPassword(e.target.value)}
      value={password}
      /&gt;
      
      &lt;button disabled={isLoading}&gt;Sign up&lt;/button&gt;
      {error &amp;&amp; &lt;div className='error'&gt;{error}&lt;/div&gt;}
    &lt;/form&gt;
  )
}

export default Signup
</code></pre>



<h2 class="wp-block-heading">#11 – Making a useLogout Hook</h2>



<p>In this MERN auth tutorial, we’ll make a custom useLogout hook to log users out of the application.</p>



<ul class="wp-block-list">
<li>在 hooks 資料夾裡面建立 useLogout.js 檔案</li>



<li>修改 useLogout.js 檔案</li>



<li>修改 Navbar.js 檔案</li>



<li>修改 index.css 檔案</li>



<li>測試 Log out 能否正確刪除 Local Storage 資料<br>console 檢視狀態</li>
</ul>



<pre class="wp-block-code"><code>// frontend/src/hooks/useLogout.js
import { useAuthContext } from './useAuthContext'

export const useLogout = () =&gt; {
  const { dispatch } = useAuthContext()

  const logout = () =&gt; {
    // remove user from storage
    localStorage.removeItem('user')

    // dispatch logout action
    dispatch({type: 'LOGOUT'})
  }

  return {logout}
}
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/components/Navbar.js
import { Link } from "react-router-dom"
import { useLogout } from '../hooks/useLogout'

const Navbar = () =&gt; {
  const { logout } = useLogout()

  const handleClick = () =&gt; {
    logout()
  }

  return (
    &lt;header&gt;
      &lt;div className="container"&gt;
        &lt;Link to="/"&gt;
          &lt;h1&gt;Workout Buddy&lt;/h1&gt;
        &lt;/Link&gt;
        &lt;nav&gt;
          &lt;div&gt;
            &lt;button onClick={handleClick}&gt;Log out&lt;/button&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;Link to="/login"&gt;Login&lt;/Link&gt;
            &lt;Link to="/signup"&gt;Signup&lt;/Link&gt;
          &lt;/div&gt;
        &lt;/nav&gt;
      &lt;/div&gt;
    &lt;/header&gt;
  )
}

export default Navbar
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/index.css
/* google font */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;800&amp;family=VT323&amp;display=swap');

/* layout */
:root {
  --primary: #1aac83;
  --error: #e7195a;
}
body {
  background: #f1f1f1;
  margin: 0;
  font-family: "Poppins";
}
header {
  background: #fff;
}
header .container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 10px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
header a {
  color: #333;
  text-decoration: none;
}
.pages{
  max-width: 1400px;
  padding: 20px;
  margin: 0 auto;
}

/* homepage */
.home {
  display: grid;
  grid-template-columns: 3fr 1fr;
  gap: 100px;
}

.workout-details {
  background: #fff;
  border-radius: 4px;
  margin: 20px auto;
  padding: 20px;
  position: relative;
  box-shadow: 2px 2px 5px rgba(0,0,0,0.05);
}

.workout-details h4 {
  margin: 0 0 10px 0;
  font-size: 1.2em;
  color: var(--primary);
}

.workout-details p {
  margin: 0;
  font-size: 0.9em;
  color: #555;
}

.workout-details span {
  position: absolute;
  top: 20px;
  right: 20px;
  cursor: pointer;
  background: #f1f1f1;
  padding: 6px;
  border-radius: 50%;
  color: #333;
}

/* new workout form */
label, input {
  display: block;
}

input {
  padding: 10px;
  margin-top: 10px;
  margin-bottom: 20px;
  width: 100%;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-sizing: border-box;
}

form button {
  background: var(--primary);
  border: 0;
  color: #fff;
  padding: 10px;
  font-family: "Poppins";
  border-radius: 4px;
  cursor: pointer;
}

div.error {
  padding: 10px;
  background: #ffefef;
  border: 1px solid var(--error);
  color: var(--error);
  border-radius: 4px;
  margin: 20px 0;
}

input.error {
  border: 1px solid var(--error);
}

/* navbar */
nav {
  display: flex;
  align-items: center;
}

nav a {
  margin-left: 10px;
}

nav button {
  background: #fff;
  color: var(--primary);
  border: 2px solid var(--primary);
  padding: 6px 10px;
  border-radius: 4px;
  font-family: "Poppins";
  cursor: pointer;
  font-size: 1em;
}

/* auth forms */
form.signup, form.login {
  max-width: 400px;
  margin: 40px auto;
  padding: 20px;
  background: #fff;
  border-radius: 4px;
}
</code></pre>



<h2 class="wp-block-heading">#12 – Making a useLogin Hook</h2>



<p>In this MERN auth tutorial, we’ll make a custom useLogin hook to log users in to the application.</p>



<ul class="wp-block-list">
<li>在 hooks 資料夾裡面建立 useLogin.js 檔案</li>



<li>修改 useLogin.js 檔案，複製 useSignup.js 程式碼做修改</li>



<li>修改 Login.js 檔案</li>



<li>註冊好帳號，測試登入帳號<br>講解 Local Storage、Token、Refresh</li>
</ul>



<pre class="wp-block-code"><code>// frontend/src/hooks/useLogin.js
import { useState } from 'react'
import { useAuthContext } from './useAuthContext'

export const useLogin = () =&gt; {
  const &#91;error, setError] = useState(null)
  const &#91;isLoading, setIsLoading] = useState(null)
  const { dispatch } = useAuthContext()

  const login = async (email, password) =&gt; {
    setIsLoading(true)
    setError(null)

    const response = await fetch('/api/user/login', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({email, password})
    })
    const json = await response.json()

    if (!response.ok) {
      setIsLoading(false)
      setError(json.error)
    }
    if (response.ok) {
      // save the user to local storage
      localStorage.setItem('user', JSON.stringify(json))

      // update the auth context
      dispatch({type: 'LOGIN', payload: json})

      setIsLoading(false)
    }
  }

  return { login, isLoading, error}
} 
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/pages/Login.js
import { useState } from 'react'
import { useLogin } from '../hooks/useLogin'

const Login = () =&gt; {
  const &#91;email, setEmail] = useState('')
  const &#91;password, setPassword] = useState('')
  const {login, error, isLoading} = useLogin()

  const handleSubmit = async (e) =&gt; {
    e.preventDefault()

    await login(email, password)
  }

  return (
    &lt;form className='login' onSubmit={handleSubmit}&gt;
      &lt;h3&gt;Log in&lt;/h3&gt;

      &lt;label&gt;Email:&lt;/label&gt;
      &lt;input
      type="email"
      onChange={(e) =&gt; setEmail(e.target.value)}
      value={email}
      /&gt;
      &lt;label&gt;Password:&lt;/label&gt;
      &lt;input
      type="password"
      onChange={(e) =&gt; setPassword(e.target.value)}
      value={password}
      /&gt;
      
      &lt;button disabled={isLoading}&gt;Log in&lt;/button&gt;
      {error &amp;&amp; &lt;div className='error'&gt;{error}&lt;/div&gt;}
    &lt;/form&gt;
  )
}

export default Login
</code></pre>



<h2 class="wp-block-heading">#13 – Setting the Initial Auth Status</h2>



<ul class="wp-block-list">
<li>修改 Navbar.js 檔案，匯入 useAuthContext</li>



<li>測試登入表單確認功能是否正常</li>



<li>重整頁面後會回到登入頁面</li>



<li>修改 AuthContext.js 檔案，useEffect</li>



<li>重整頁面後仍會保持在登入狀態</li>



<li>測試登出、登入功能是否正常</li>
</ul>



<pre class="wp-block-code"><code>// frontend/src/components/Navbar.js
import { Link } from "react-router-dom"
import { useLogout } from '../hooks/useLogout'
import { useAuthContext } from "../hooks/useAuthContext"

const Navbar = () =&gt; {
  const { logout } = useLogout()
  const { user } = useAuthContext()

  const handleClick = () =&gt; {
    logout()
  }

  return (
    &lt;header&gt;
      &lt;div className="container"&gt;
        &lt;Link to="/"&gt;
          &lt;h1&gt;Workout Buddy&lt;/h1&gt;
        &lt;/Link&gt;
        &lt;nav&gt;
          {user &amp;&amp; (
            &lt;div&gt;
              &lt;span&gt;{user.email}&lt;/span&gt;
              &lt;button onClick={handleClick}&gt;Log out&lt;/button&gt;
            &lt;/div&gt;
          )}
          {!user &amp;&amp; (
            &lt;div&gt;
              &lt;Link to="/login"&gt;Login&lt;/Link&gt;
              &lt;Link to="/signup"&gt;Signup&lt;/Link&gt;
            &lt;/div&gt;
          )}
        &lt;/nav&gt;
      &lt;/div&gt;
    &lt;/header&gt;
  )
}

export default Navbar
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/context/AuthContext.js
import { createContext, useReducer, useEffect } from 'react'

export const AuthContext = createContext()

export const authReducer = (state, action) =&gt; {
  switch (action.type) {
    case 'LOGIN':
      return { user: action.payload }
    case 'LOGOUT':
      return { user: null}
    default:
      return state
  }
}

export const AuthContextProvider = ({ children }) =&gt; {
  const &#91;state, dispatch] = useReducer(authReducer, {
    user: null
  })

  useEffect(() =&gt; {
    const user = JSON.parse(localStorage.getItem('user'))

    if (user) {
      dispatch({ type: 'LOGIN', payload: user })
    }
  }, &#91;])

  console.log('AuthContext State: ', state)

  return (
    &lt;AuthContext.Provider value={{...state, dispatch}}&gt;
      { children }
    &lt;/AuthContext.Provider&gt;
  )
}
</code></pre>



<h2 class="wp-block-heading has-background" style="background-color:#cf2e2e">#14 – Protecting API Routes</h2>



<p>In this MERN auth tutorial, you’ll learn how to protect certain API routes from unauthenticated users.</p>



<ul class="wp-block-list">
<li>在 backend 資料夾建立 middleware 資料夾</li>



<li>在 middleware 資料夾裡面建立 requireAuth.js 檔案</li>



<li>查看 workouts.js 檔案</li>



<li>修改 requireAuth.js 檔案</li>



<li>修改 workouts.js 檔案，requireAuth</li>



<li>使用 API 測試工具 Postman<br>http://localhost:4000/api/workouts/，GET 方法<br>Auth > Bearer > Bearer Token<br>http://localhost:4000/api/user/login，POST 方法<br>取得 token 資料</li>
</ul>



<pre class="wp-block-code"><code>// backend/middleware/requireAuth.js
const jwt = require('jsonwebtoken')
const User = require('../models/userModel')

const requireAuth = async (req, res, next) =&gt; {

  // verify authentication
  const { authorization } = req.headers

  if (!authorization) {
    return res.status(401).json({error: 'Authorization token required'})
  }

  const token = authorization.split(' ')&#91;1]

  try {
    const {_id} = jwt.verify(token, process.env.SECRET)

    req.user = await User.findOne({ _id }).select('_id')
    next()

  } catch (error) {
    console.log(error);
    res.status(401).json({error: 'Request is not authorized'})
  }

}

module.exports = requireAuth
</code></pre>



<pre class="wp-block-code"><code>// backend/routes/workouts.js
const express = require('express')
const {
  createWorkout,
  getWorkouts,
  getWorkout,
  deleteWorkout,
  updateWorkout
} = require('../controllers/workoutController')
const requireAuth = require('../middleware/requireAuth')

const router = express.Router()

// require auth for all workout routes
router.use(requireAuth)

// GET all workouts
router.get('/', getWorkouts)

// GET a single workout
router.get('/:id', getWorkout)

// POST a new workout
router.post('/', createWorkout)

// DELETE a workout
router.delete('/:id', deleteWorkout)

// UPDATE a workout
router.patch('/:id', updateWorkout)

module.exports = router
</code></pre>



<h2 class="wp-block-heading">#15 – Making Authorized Requests</h2>



<ul class="wp-block-list">
<li>需要調整的有三個地方，Home.js、WorkoutForm.js、WorkoutDetails.js 檔案</li>



<li>修改 Home.js 檔案</li>



<li>修改 WorkoutForm.js 檔案</li>



<li>修改 WorkoutDetails.js 檔案</li>



<li>使用 Add a New Workout 測試功能是否正常</li>



<li>登入帳號才能新增、刪除 Workout</li>
</ul>



<pre class="wp-block-code"><code>// frontend/src/pages/Home.js
import { useEffect } from 'react'
import { useWorkoutsContext } from '../hooks/useWorkoutsContext'
import { useAuthContext } from '../hooks/useAuthContext'

// components
import WorkoutDetails from '../components/WorkoutDetails'
import WorkoutForm from '../components/WorkoutForm'

const Home = () =&gt; {
  const {workouts, dispatch} = useWorkoutsContext()
  const {user} = useAuthContext()
  
  useEffect(() =&gt; {
    const fetchWorkouts = async () =&gt; {
      const response = await fetch('/api/workouts', {
        headers: {
          'Authorization': `Bearer ${user.token}`
        }
      })
      const json = await response.json()

      if (response.ok) {
        dispatch({type: 'SET_WORKOUTS', payload: json})
      }
    }

    if (user) {
      fetchWorkouts()
    }
  }, &#91;dispatch, user])
  
  return (
    &lt;div className="home"&gt;
      &lt;div className="workouts"&gt;
        {workouts &amp;&amp; workouts.map((workout) =&gt; {
          return &lt;WorkoutDetails key={workout._id} workout={workout} /&gt;
        })}
      &lt;/div&gt;
      &lt;WorkoutForm /&gt;
    &lt;/div&gt;
  )
}

export default Home
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/components/WorkoutForm.js
import { useState } from "react"
import { useWorkoutsContext } from "../hooks/useWorkoutsContext"
import { useAuthContext } from "../hooks/useAuthContext"

const WorkoutForm = () =&gt; {
  const { dispatch } = useWorkoutsContext()
  const { user } = useAuthContext()

  const &#91;title, setTitle] = useState('')
  const &#91;load, setLoad] = useState('')
  const &#91;reps, setReps] = useState('')
  const &#91;error, setError] = useState(null)
  const &#91;emptyFields, setEmptyFields] = useState(&#91;])

  const handleSubmit = async (e) =&gt; {
    e.preventDefault()

    if (!user) {
      setError('You must be logged in')
      return
    }

    const workout = {title, load, reps}

    const response = await fetch('/api/workouts', {
      method: 'POST',
      body: JSON.stringify(workout),
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${user.token}`
      }
    })
    const json = await response.json()

    if (!response.ok) {
      setError(json.error)
      setEmptyFields(json.emptyFields)
    }
    if (response.ok) {
      setTitle('')
      setLoad('')
      setReps('')
      setError(null)
      setEmptyFields(&#91;])
      console.log('new workout added', json);
      dispatch({type: 'CREATE_WORKOUT', payload: json})
    }
  }

  return (
    &lt;form className="create" onSubmit={handleSubmit}&gt;
      &lt;h3&gt;Add a New Workout&lt;/h3&gt;

      &lt;label&gt;Exercise Title:&lt;/label&gt;
      &lt;input
        type="text"
        onChange={(e) =&gt; setTitle(e.target.value)}
        value={title}
        className={emptyFields.includes('title') ? 'error' : ''}
      /&gt;

      &lt;label&gt;Load (in kg):&lt;/label&gt;
      &lt;input
        type="number"
        onChange={(e) =&gt; setLoad(e.target.value)}
        value={load}
        className={emptyFields.includes('load') ? 'error' : ''}
      /&gt;

      &lt;label&gt;Reps:&lt;/label&gt;
      &lt;input
        type="number"
        onChange={(e) =&gt; setReps(e.target.value)}
        value={reps}
        className={emptyFields.includes('reps') ? 'error' : ''}
      /&gt;

      &lt;button&gt;Add Workout&lt;/button&gt;
      {error &amp;&amp; &lt;div className="error"&gt;{error}&lt;/div&gt;}
    &lt;/form&gt;
  )
}

export default WorkoutForm
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/components/WorkoutDetails.js
import { useWorkoutsContext } from '../hooks/useWorkoutsContext'
import { useAuthContext } from '../hooks/useAuthContext'

// date fns
import formatDistanceToNow from 'date-fns/formatDistanceToNow'

const WorkoutDetails = ({ workout }) =&gt; {
  const { dispatch } = useWorkoutsContext()
  const { user } = useAuthContext()

  const handleClick = async () =&gt; {
    if (!user) {
      return
    }
    const response = await fetch('/api/workouts/' + workout._id, {
      method: 'DELETE',
      headers: {
        'Authorization': `Bearer ${user.token}`
      }
    })
    const json = await response.json()

    if (response.ok) {
      dispatch({type: 'DELETE_WORKOUT', payload: json})
    }
  }

  return (
    &lt;div className="workout-details"&gt;
      &lt;h4&gt;{workout.title}&lt;/h4&gt;
      &lt;p&gt;&lt;strong&gt;Load (kg): &lt;/strong&gt;{workout.load}&lt;/p&gt;
      &lt;p&gt;&lt;strong&gt;Reps: &lt;/strong&gt;{workout.reps}&lt;/p&gt;
      &lt;p&gt;{formatDistanceToNow(new Date(workout.createdAt), { addSuffix: true })}&lt;/p&gt;
      &lt;span className='material-symbols-outlined' onClick={handleClick}&gt;delete&lt;/span&gt;
    &lt;/div&gt;
  )
}

export default WorkoutDetails
</code></pre>



<h2 class="wp-block-heading">#16 – Protecting React Routes</h2>



<p>In this MERN auth tutorial we’ll protect some of the React routes from users that are not authenticated.</p>



<ul class="wp-block-list">
<li>修改 App.js 檔案，匯入 Navigate、useAuthContext</li>



<li>修改 index.css 檔案</li>
</ul>



<pre class="wp-block-code"><code>// frontend/src/App.js
import { BrowserRouter , Routes, Route, Navigate } from 'react-router-dom'
import { useAuthContext } from './hooks/useAuthContext'

// pages &amp; components
import Home from './pages/Home'
import Login from './pages/Login';
import Signup from './pages/Signup';
import Navbar from './components/Navbar'

function App() {
  const { user } = useAuthContext()

  return (
    &lt;div className="App"&gt;
        &lt;BrowserRouter&gt;
          &lt;Navbar /&gt;
          &lt;div className="pages"&gt;
            &lt;Routes&gt;
              &lt;Route
                path="/"
                element={user ? &lt;Home /&gt; : &lt;Navigate to="/login" /&gt;} 
              /&gt;
              &lt;Route
                path="/login"
                element={!user ? &lt;Login /&gt; : &lt;Navigate to="/" /&gt;} 
              /&gt;
              &lt;Route
                path="/signup"
                element={!user ? &lt;Signup /&gt; : &lt;Navigate to="/" /&gt;} 
              /&gt;
            &lt;/Routes&gt;
          &lt;/div&gt;
        &lt;/BrowserRouter&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/index.css
/* google font */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;800&amp;family=VT323&amp;display=swap');

/* layout */
:root {
  --primary: #1aac83;
  --error: #e7195a;
}
body {
  background: #f1f1f1;
  margin: 0;
  font-family: "Poppins";
}
header {
  background: #fff;
}
header .container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 10px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
header a {
  color: #333;
  text-decoration: none;
}
.pages{
  max-width: 1400px;
  padding: 20px;
  margin: 0 auto;
}

/* homepage */
.home {
  display: grid;
  grid-template-columns: 3fr 1fr;
  gap: 100px;
}

.workout-details {
  background: #fff;
  border-radius: 4px;
  margin: 20px auto;
  padding: 20px;
  position: relative;
  box-shadow: 2px 2px 5px rgba(0,0,0,0.05);
}

.workout-details h4 {
  margin: 0 0 10px 0;
  font-size: 1.2em;
  color: var(--primary);
}

.workout-details p {
  margin: 0;
  font-size: 0.9em;
  color: #555;
}

.workout-details span {
  position: absolute;
  top: 20px;
  right: 20px;
  cursor: pointer;
  background: #f1f1f1;
  padding: 6px;
  border-radius: 50%;
  color: #333;
}

/* new workout form */
label, input {
  display: block;
}

input {
  padding: 10px;
  margin-top: 10px;
  margin-bottom: 20px;
  width: 100%;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-sizing: border-box;
}

form button {
  background: var(--primary);
  border: 0;
  color: #fff;
  padding: 10px;
  font-family: "Poppins";
  border-radius: 4px;
  cursor: pointer;
}

div.error {
  padding: 10px;
  background: #ffefef;
  border: 1px solid var(--error);
  color: var(--error);
  border-radius: 4px;
  margin: 20px 0;
}

input.error {
  border: 1px solid var(--error);
}

/* navbar */
nav {
  display: flex;
  align-items: center;
}

nav a {
  margin-left: 10px;
}

nav button {
  background: #fff;
  color: var(--primary);
  border: 2px solid var(--primary);
  padding: 6px 10px;
  border-radius: 4px;
  font-family: "Poppins";
  cursor: pointer;
  font-size: 1em;
  margin-left: 10px;
}

/* auth forms */
form.signup, form.login {
  max-width: 400px;
  margin: 40px auto;
  padding: 20px;
  background: #fff;
  border-radius: 4px;
}
</code></pre>



<h2 class="wp-block-heading">#17 – Assigning Workouts to Users</h2>



<ul class="wp-block-list">
<li>刪除所有的 Workouts</li>



<li>修改 workoutModel.js 檔案，user_id</li>



<li>修改 workoutController.js 檔案，user_id</li>



<li>增加 Workout 內容<br>目前還是會在不同帳號看到相同內容<br>分別在不同帳號增加 Workout 內容</li>



<li>使用 API 測試工具 Postman，GET 方法<br>http://localhost:4000/api/workouts/<br>必須加上 Bearer<br>可以看到 Response 的 user_id 的差異</li>



<li>修改 workoutController.js，get all workouts 加入 user_id</li>



<li>登入不同的帳號確認 Workout 內容<br>問題: 會短暫看到其他人的 Workout 內容</li>



<li>clear global workouts state<br>修改 useLogout.js 檔案，匯入 useWorkoutsContext</li>
</ul>



<pre class="wp-block-code"><code>// backend/models/workoutModel.js
const mongoose = require('mongoose')

const Schema =  mongoose.Schema

const workoutSchema = new Schema({
  title: {
    type:String,
    required: true
  },
  reps: {
    type: Number,
    required: true
  },
  load: {
    type: Number,
    required: true
  },
  user_id: {
    type: String,
    required: true
  }
}, { timestamps: true })

module.exports = mongoose.model('Workout', workoutSchema)
</code></pre>



<pre class="wp-block-code"><code>// backend/controllers/workoutController.js
const Workout = require('../models/workoutModel')
const mongoose = require('mongoose')

// get all workouts
const getWorkouts = async (req, res) =&gt; {
  const user_id = req.user._id

  const workouts = await Workout.find({ user_id }).sort({createdAt: -1})

  res.status(200).json(workouts)
}


// get a single workout
const getWorkout = async (req, res) =&gt; {
  const { id } = req.params

  if (!mongoose.Types.ObjectId.isValid(id)) {
    return res.status(404).json({error: 'No such workout'})
  }

  const workout = await Workout.findById(id)

  if (!workout) {
    return res.status(404).json({error: 'No such workout'})
  }

  res.status(200).json(workout)
}


// create new workout
const createWorkout = async (req, res) =&gt; {
  const { title, load, reps } = req.body

  let emptyFields = &#91;]

  if(!title) {
    emptyFields.push('title')
  }
  if(!load) {
    emptyFields.push('load')
  }
  if(!reps) {
    emptyFields.push('reps')
  }
  if(emptyFields.length &gt; 0) {
    return res.status(400).json({ error: 'Please fill in all fields', emptyFields })
  }

  // add doc to db
  try {
    const user_id = req.user._id
    const workout = await Workout.create({title, load, reps, user_id})
    res.status(200).json(workout)
  } catch (error) {
    res.status(400).json({ error: error.message })
  }
}

// delete a workout
const deleteWorkout = async (req, res) =&gt; {
  const { id } = req.params

  if (!mongoose.Types.ObjectId.isValid(id)) {
    return res.status(404).json({error: 'No such workout'})
  }

  const workout = await Workout.findOneAndDelete({_id: id})

  if (!workout) {
    return res.status(404).json({error: 'No such workout'})
  }

  res.status(200).json(workout)
}

// update a workout
const updateWorkout = async (req, res) =&gt; {
  const { id } = req.params

  if (!mongoose.Types.ObjectId.isValid(id)) {
    return res.status(404).json({error: 'No such workout'})
  }

  const workout = await Workout.findOneAndUpdate({_id: id}, {
    ...req.body
  })

  if (!workout) {
    return res.status(404).json({error: 'No such workout'})
  }

  res.status(200).json(workout)
}


module.exports = {
  getWorkouts,
  getWorkout,
  createWorkout,
  deleteWorkout,
  updateWorkout
}
</code></pre>



<pre class="wp-block-code"><code>// frontend/src/hooks/useLogout.js
import { useAuthContext } from './useAuthContext'
import { useWorkoutsContext } from './useWorkoutsContext'

export const useLogout = () =&gt; {
  const { dispatch } = useAuthContext()
  const { dispatch: workoutsDispatch } = useWorkoutsContext()

  const logout = () =&gt; {
    // remove user from storage
    localStorage.removeItem('user')

    // dispatch logout action
    dispatch({type: 'LOGOUT'})
    workoutsDispatch({type: 'SET_WORKOUTS', payload: null})
  }

  return {logout}
}</code></pre>
	</div>
<!-- .entry-content -->

	<footer class="entry-footer">
			</footer><!-- .entry-footer -->
</article><!-- #post-865 -->

	<nav class="navigation post-navigation" aria-label="文章">
		<h2 class="screen-reader-text">文章導覽</h2>
		<div class="nav-links">
<div class="nav-previous"><a href="/wordpress_blog/mern-stack-tutorial/" rel="prev"><span class="nav-subtitle">Previous:</span> <span class="nav-title">MERN Stack Tutorial</span></a></div>
<div class="nav-next"><a href="/wordpress_blog/reviewvue3_10/" rel="next"><span class="nav-subtitle">Next:</span> <span class="nav-title">Vue3 複習10</span></a></div>
</div>
	</nav>
	</main><!-- #main -->


	</div></div>
			
			<footer id="colophon" class="site-footer">

				
				<div class="container-fluid">
					<div class="site-info">
						<div class="row">

															
								<div class="col-12 footer-copyright-elements footer-copyright-alignment-center">

									<div class="botiga-credits">&copy; 2025 wordpress_blog. 
Created by Gee Hsu. 
<br>Proudly powered by <a rel="nofollow" href="https://athemes.com/theme/botiga/">Botiga</a>
</div>
<div class="social-profile">
<a target="_blank" href="https://www.facebook.com/watergrass0402/"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></i></a><a target="_blank" href="https://github.com/GeeHsu"><i class="ws-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></i></a>
</div>
								</div>
														
						</div>
					</div>
				</div>
<!-- .site-info -->

				
			</footer><!-- #colophon -->

			
			<div class="back-to-top visibility-all position-right"><i class="ws-svg-icon"><svg viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 15l7-7 7 7" stroke-width="3" stroke-linejoin="round"></path></svg></i></div>
</div>
<!-- #page -->


<script id="botiga-custom-js-extra">
var botiga = {"ajaxurl":"\/wp-admin\/admin-ajax.php","i18n":{"botiga_sharebox_copy_link":"Copy link","botiga_sharebox_copy_link_copied":"Copied!"}};
</script>
<script src="/wordpress_blog/wp-content/themes/botiga/assets/js/custom.min.js?ver=1.1.2" id="botiga-custom-js"></script>

</body>
</html>